{% import "admin/macro.html.twig" as admin_macro %}
{% import "common/data-dict-macro.html.twig" as dict_macro %}

  <table class="table table-striped table-hover" id="course-table">
    <thead>
    <tr>
      <td class='text-center'>
        <input class="batch-select" type="checkbox">
      </td>
      <th>{{'admin.course_manage.chooser.num'|trans}}</th>
      <th width="30%">{{'admin.course_manage.chooser.name'|trans}}</th>
      {% if withCoursePlan %}
        <th width="20%">{{ 'admin.course_manage.chooser.plan_name'|trans }}</th>
      {% else %}
        <th>{{'admin.course_manage.chooser.student_num'|trans}}</th>
        <th>{{'admin.course_manage.chooser.status'|trans}}</th>
      {% endif %}
      <th>{{'admin.course_manage.chooser.creator'|trans}}</th>
    </tr>
    </thead>
    <tbody>
    {% for courseSet in courseSets %}
      {% set user = users[courseSet.creator]|default(null) %}
      {% set category = categories[courseSet.categoryId]|default(null) %}
      <tr id="course-tr-{{ courseSet.id }}">
        <td class='text-center' data-id="{{courseSet.id}}">
          <input class="batch-item" type="checkbox" value="{{courseSet.id}}" id="batch-item-{{ courseSet.id|default() }}">
        </td>
        <td>{{ courseSet.id }}</td>
        <td>
          <a href="{{ path('course_show',{id: courseSet.defaultCourseId}) }}" target="_blank"><strong>{{ courseSet.title }}</strong></a>
          <br>
        </td>
        {% if withCoursePlan %}
          <td>
            {% if courseSet.courses|default(null)|length == 1 %}
              {% for course in courseSet.courses %}
                {{course.title}}
              {% endfor %}
              <select class="form-control js-course-select width-150 hidden" id="course-select-{{courseSet.id}}" style="width:80%;display: inline-block;">
                {% if courseSet.courses %}
                  {% for course in courseSet.courses %}
                    {{course.title}}
                    <option value="{{course.id}}" data-display-title="{{ get_formated_course_title(course) }}">{{course.title}}</option>
                  {% endfor %}
                {% endif %}
              </select>
            {% else %}
              <select class="form-control js-course-select width-150" id="course-select-{{courseSet.id}}" style="width:80%;display: inline-block;">
                {% if courseSet.courses|default(null) %}
                  {% for course in courseSet.courses %}
                    {{course.title}}
                    <option value="{{course.id}}" data-display-title="{{ get_formated_course_title(course) }}">
                      {{course.title}}
                    </option>
                  {% endfor %}
                {% endif %}
              </select>
              <a class="color-gray" data-toggle="popover" data-trigger="hover" data-placement="top" data-content="{{'classroom.classroom_manage.course_select.tips'|trans}}"><i class="es-icon es-icon-help"></i></a>
            {% endif %}
          </td>
        {% else %}
          <td>{{ courseSet.studentNum }}</td>
          <td>{{ dict_macro.courseStatus(courseSet.status) }}</td>
        {% endif %}
        <td>
          {{ admin_macro.user_link(user) }}
          <br>
          <span class="text-muted text-sm">{{ courseSet.createdTime|date('Y-n-d H:i') }}</span>
        </td>
      </tr>
    {% else %}
      <tr><td colspan="20"><div class="empty">{{'admin.course_manage.chooser.empty'|trans}}</div></td></tr>
    {% endfor %}
    </tbody>
  </table>
  {% if paginator|default() %}
      {{ admin_macro.ajax_paginator(paginator) }}
  {% endif %}