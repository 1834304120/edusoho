{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/settings/approval/index.js"],"names":["$","validate","rules","idcard","truename","required","chinese","trim","maxlength","minlength","faceImg","backImg","messages","Translator","trans","submitHandler","form","$form","$btn","find","each","$this","spaceVal","val","finalVal","button","submit","cd","upload","el","on","event","file","src","currentTarget","$target","data","addClass","css","length","html","append","code","message","type"],"mappings":";;;;;;;;AAAAA,EAAE,gBAAF,EAAoBC,QAApB,CAA6B;AAC3BC,SAAO;AACLC,YAAQ,uBADH;AAELC,cAAU;AACRC,gBAAU,IADF;AAERC,eAAS,IAFD;AAGRC,YAAM,IAHE;AAIRC,iBAAW,EAJH;AAKRC,iBAAW;AALH,KAFL;AASLC,aAAS,4BATJ;AAULC,aAAS;AAVJ,GADoB;AAa3BC,YAAU;AACRF,aAAS;AACPL,gBAAUQ,WAAWC,KAAX,CAAiB,sCAAjB;AADH,KADD;AAIRH,aAAS;AACPN,gBAAUQ,WAAWC,KAAX,CAAiB,qCAAjB;AADH;AAJD,GAbiB;AAqB3BC,iBAAe,uBAASC,IAAT,EAAe;AAC5B,QAAMC,QAAQjB,EAAEgB,IAAF,CAAd;AACA,QAAME,OAAOD,MAAME,IAAN,CAAW,iBAAX,CAAb;AACAnB,MAAE,eAAF,EAAmBoB,IAAnB,CAAwB,YAAW;AACjC,UAAMC,QAAQrB,EAAE,IAAF,CAAd;AACA,UAAMsB,WAAWD,MAAME,GAAN,EAAjB;AACA,UAAMC,WAAWxB,EAAEO,IAAF,CAAOe,QAAP,CAAjB;AACAD,YAAME,GAAN,CAAUC,QAAV;AACD,KALD;AAMAN,SAAKO,MAAL,CAAY,SAAZ;AACAT,SAAKU,MAAL;AACD;AAhC0B,CAA7B;;AAmCAC,GAAGC,MAAH,CAAU;AACRC,MAAI;AADI,CAAV,EAEGC,EAFH,CAEM,SAFN,EAEiB,UAACC,KAAD,EAAQC,IAAR,EAAcC,GAAd,EAAsB;AACrC,MAAIZ,QAAQrB,EAAE+B,MAAMG,aAAR,CAAZ;AACA,MAAIC,UAAUnC,EAAEqB,MAAMe,IAAN,CAAW,QAAX,CAAF,CAAd;;AAEAD,UAAQE,QAAR,CAAiB,MAAjB,EAAyBC,GAAzB,CAA6B;AAC3B,iCAA2BL,GAA3B;AAD2B,GAA7B;;AAIA,MAAI,CAACE,QAAQhB,IAAR,CAAa,OAAb,EAAsBoB,MAA3B,EAAmC;AACjC,QAAIC,OAAO,0BAAX;AACAL,YAAQM,MAAR,CAAeD,IAAf;AACD;AACF,CAdD,EAcGV,EAdH,CAcM,OAdN,EAce,UAACY,IAAD,EAAU;AACvB,MAAIA,SAAS,iBAAb,EAAgC;AAC9Bf,OAAGgB,OAAH,CAAW;AACTC,YAAM,QADG;AAETD,eAAS9B,WAAWC,KAAX,CAAiB,6BAAjB;AAFA,KAAX;AAID,GALD,MAKO,IAAI4B,SAAS,iBAAb,EAAgC;AACrCf,OAAGgB,OAAH,CAAW;AACTC,YAAM,QADG;AAETD,eAAS9B,WAAWC,KAAX,CAAiB,iCAAjB;AAFA,KAAX;AAID;AACF,CA1BD,E","file":"app/js/settings/approval/index.js","sourcesContent":["$('#approval-form').validate({\n  rules: {\n    idcard: 'required idcardNumber',\n    truename: {\n      required: true,\n      chinese: true,\n      trim: true,\n      maxlength: 25,\n      minlength: 2\n    },\n    faceImg: 'required isImage limitSize',\n    backImg: 'required isImage limitSize'\n  },\n  messages: {\n    faceImg: {\n      required: Translator.trans('user.fields.idcard_front_placeholder')\n    },\n    backImg: {\n      required: Translator.trans('user.fields.idcard_back_placeholder')\n    }\n  },\n  submitHandler: function(form) {\n    const $form = $(form);\n    const $btn = $form.find('[type=\"submit\"]');\n    $('.js-input-val').each(function() {\n      const $this = $(this);\n      const spaceVal = $this.val();\n      const finalVal = $.trim(spaceVal);\n      $this.val(finalVal);\n    })\n    $btn.button('loading');\n    form.submit();\n  }\n});\n\ncd.upload({\n  el: '.js-upload-input',\n}).on('success', (event, file, src) => {\n  let $this = $(event.currentTarget);\n  let $target = $($this.data('target'));\n\n  $target.addClass('done').css({\n    'background-image': `url(${src})`,\n  });\n\n  if (!$target.find('.mask').length) {\n    let html = '<div class=\"mask\"></div>';\n    $target.append(html);\n  }\n}).on('error', (code) => {\n  if (code === 'FILE_SIZE_LIMIT') {\n    cd.message({\n      type: 'danger',\n      message: Translator.trans('uploader.size_2m_limit_hint')\n    });\n  } else if (code === 'FLIE_TYPE_LIMIT') {\n    cd.message({\n      type: 'danger',\n      message: Translator.trans('uploader.type_denied_limit_hint')\n    });\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/approval/index.js"],"sourceRoot":""}