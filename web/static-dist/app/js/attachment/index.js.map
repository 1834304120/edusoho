{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/attachment/index.js"],"names":["$modal","$","$uploader","find","uploadProcess","document","type","uploader","UploaderSDK","id","attr","sdkBaseUri","app","cloudSdkBaseUri","disableDataUpload","cloudDisableLogReport","disableSentry","initUrl","data","finishUrl","accept","process","fileSingleSizeLimit","ui","locale","documentElement","lang","on","message","file","length","minute","parseInt","second","Math","round","val","$metas","currentTarget","$ids","$list","module","get","html","append","modal","siblings","hide","one","event","destroy"],"mappings":";;;;;AAAA,wB;;;;;;;;;;ACAA;;;;;;AAEA,IAAIA,SAASC,EAAE,mBAAF,CAAb;AACA,IAAIC,YAAYF,OAAOG,IAAP,CAAY,qBAAZ,CAAhB;;AAEA,IAAMC,gBAAgB;AACpBC,YAAU;AACRC,UAAM;AADE;AADU,CAAtB;;AAMA,IAAIC,WAAW,IAAIC,WAAJ,CAAgB;AAC7BC,MAAIP,UAAUQ,IAAV,CAAe,IAAf,CADyB;AAE7BC,cAAYC,IAAIC,eAFa;AAG7BC,qBAAmBF,IAAIG,qBAHM;AAI7BC,iBAAeJ,IAAIG,qBAJU;AAK7BE,WAASf,UAAUgB,IAAV,CAAe,SAAf,CALoB;AAM7BC,aAAWjB,UAAUgB,IAAV,CAAe,WAAf,CANkB;AAO7BE,UAAQlB,UAAUgB,IAAV,CAAe,QAAf,CAPqB;AAQ7BG,WAASjB,aARoB;AAS7BkB,uBAAqBpB,UAAUgB,IAAV,CAAe,qBAAf,CATQ;AAU7BK,MAAI,QAVyB;AAW7BC,UAAQnB,SAASoB,eAAT,CAAyBC;AAXJ,CAAhB,CAAf;;AAcAnB,SAASoB,EAAT,CAAY,OAAZ,EAAqB,UAASrB,IAAT,EAAe;AAClC,wBAAO,QAAP,EAAiBA,KAAKsB,OAAtB;AACD,CAFD;;AAIArB,SAASoB,EAAT,CAAY,aAAZ,EAA2B,UAACE,IAAD,EAAU;AACnC,MAAIA,KAAKC,MAAL,IAAeD,KAAKC,MAAL,GAAc,CAAjC,EAAoC;AAClC,QAAIC,SAASC,SAASH,KAAKC,MAAL,GAAc,EAAvB,CAAb;AACA,QAAIG,SAASC,KAAKC,KAAL,CAAWN,KAAKC,MAAL,GAAc,EAAzB,CAAb;AACA7B,MAAE,SAAF,EAAamC,GAAb,CAAiBL,MAAjB;AACA9B,MAAE,SAAF,EAAamC,GAAb,CAAiBH,MAAjB;AACAhC,MAAE,SAAF,EAAamC,GAAb,CAAiBL,SAAS,EAAT,GAAcE,MAA/B;AACD;;AAED,MAAMI,SAASpC,EAAE,qBAAF,CAAf;AACA,MAAMqC,gBAAgBD,OAAOnB,IAAP,CAAY,eAAZ,CAAtB;;AAEA,MAAIqB,OAAOtC,EAAE,MAAMoC,OAAOnB,IAAP,CAAY,UAAZ,CAAR,CAAX;AACA,MAAIsB,QAAQvC,EAAE,MAAMoC,OAAOnB,IAAP,CAAY,WAAZ,CAAR,CAAZ;AACA,MAAIoB,iBAAiB,EAArB,EAAyB;AACvBC,WAAOtC,EAAE,gBAAcqC,aAAd,GAA4B,GAA9B,EAAmCnC,IAAnC,CAAwC,MAAMkC,OAAOnB,IAAP,CAAY,UAAZ,CAA9C,CAAP;AACAsB,YAAQvC,EAAE,gBAAcqC,aAAd,GAA4B,GAA9B,EAAmCnC,IAAnC,CAAwC,MAAMkC,OAAOnB,IAAP,CAAY,WAAZ,CAA9C,CAAR;AACD;;AAED,MAAIuB,SAASxC,EAAE,sBAAF,EAA0BmC,GAA1B,EAAb;AACAnC,IAAEyC,GAAF,CAAM,sBAAsBb,KAAKpB,EAA3B,GAAgC,OAAtC,EAA+C,EAACgC,QAAQA,MAAT,EAA/C,EAAgE,UAAUE,IAAV,EAAgB;AAC9EH,UAAMI,MAAN,CAAaD,IAAb;AACAJ,SAAKH,GAAL,CAASP,KAAKpB,EAAd;AACAT,WAAO6C,KAAP,CAAa,MAAb;AACAL,UAAMM,QAAN,CAAe,iBAAf,EAAkCC,IAAlC;AACD,GALD;AAMD,CA1BD;;AA4BA;AACA/C,OAAOgD,GAAP,CAAW,eAAX,EAA4B,UAACC,KAAD,EAAW;AACrC1C,WAAS2C,OAAT;AACA3C,aAAW,IAAX;AACD,CAHD,E","file":"app/js/attachment/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import notify from 'common/notify';\n\nlet $modal = $('#attachment-modal');\nlet $uploader = $modal.find('#uploader-container');\n\nconst uploadProcess = {\n  document: {\n    type: 'html',\n  },\n};\n\nlet uploader = new UploaderSDK({\n  id: $uploader.attr('id'),\n  sdkBaseUri: app.cloudSdkBaseUri,\n  disableDataUpload: app.cloudDisableLogReport,\n  disableSentry: app.cloudDisableLogReport,\n  initUrl: $uploader.data('initUrl'),\n  finishUrl: $uploader.data('finishUrl'),\n  accept: $uploader.data('accept'),\n  process: uploadProcess,\n  fileSingleSizeLimit: $uploader.data('fileSingleSizeLimit'),\n  ui: 'single',\n  locale: document.documentElement.lang\n});\n\nuploader.on('error', function(type) {\n  notify('danger', type.message);\n});\n\nuploader.on('file.finish', (file) => {\n  if (file.length && file.length > 0) {\n    let minute = parseInt(file.length / 60);\n    let second = Math.round(file.length % 60);\n    $('#minute').val(minute);\n    $('#second').val(second);\n    $('#length').val(minute * 60 + second);\n  }\n\n  const $metas = $('[data-role=\"metas\"]');\n  const currentTarget = $metas.data('currentTarget');\n\n  let $ids = $('.' + $metas.data('idsClass'));\n  let $list = $('.' + $metas.data('listClass'));\n  if (currentTarget != '') {\n    $ids = $('[data-role='+currentTarget+']').find('.' + $metas.data('idsClass'));\n    $list = $('[data-role='+currentTarget+']').find('.' + $metas.data('listClass'));\n  }\n\n  let module = $('input[name=\"module\"]').val();\n  $.get('/attachment/file/' + file.id + '/show', {module: module},function (html) {\n    $list.append(html);\n    $ids.val(file.id);\n    $modal.modal('hide');\n    $list.siblings('.js-upload-file').hide();\n  });\n});\n\n//只执行一次\n$modal.one('hide.bs.modal', (event) => {\n  uploader.destroy();\n  uploader = null;\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/attachment/index.js"],"sourceRoot":""}