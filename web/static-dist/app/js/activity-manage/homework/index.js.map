{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/common/component/question-operate/index.js","webpack:///./app/Resources/static-src/app/common/component/question-subjective/index.js","webpack:///./app/Resources/static-src/app/js/activity-manage/homework/index.js","webpack:///./app/Resources/static-src/app/js/activity-manage/homework/create.js"],"names":["QuestionOperate","$form","$modal","initEvent","on","deleteQuestion","event","replaceQuestion","previewQuestion","batchDelete","initSortList","adjustment","$tbody","find","td","hasClass","tdHtml","sortable","containerPath","containerSelector","itemSelector","placeholder","exclude","onDragStart","item","container","_super","$","removeClass","offset","pointer","rootGroup","left","top","onDrag","position","height","css","onDrop","parents","each","$tr","data","detach","insertAfter","addClass","refreshSeqs","$target","currentTarget","excludeIds","push","val","modal","get","join","type","html","stopPropagation","id","closest","remove","trigger","length","$redmine","text","Translator","trans","show","setTimeout","slideUp","self","index","questionId","preventDefault","window","open","seq","questionSubjectiveRemask","$element","hasSubjective","$subjectiveRemask","contents","console","log","$from","Create","BatchSelect","parent","document","Homework","$iframeContent","$homeworkModal","$questionPickedModal","$step2_form","$step3_form","validator2","init","setValidateRule","inItStep2form","showPickQuestion","hide","form","validator","editor","CKEDITOR","replace","toolbar","fileSingleSizeLimit","app","filebrowserImageUploadUrl","getData","$btn","validate","onkeyup","rules","title","required","maxlength","trim","course_title","description","content","messages","questionLength","initCkeditor","addMethod","value","element","optional","test","format","reg"],"mappings":"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","file":"app/js/activity-manage/homework/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import notify from 'common/notify';\nimport { questionSubjectiveRemask } from '../question-subjective';\n\nexport default class QuestionOperate {\n  constructor($form, $modal) {\n    this.$form = $form;\n    this.$modal = $modal;\n    this.initEvent();\n  }\n\n  initEvent() { \n    this.$form.on('click','[data-role=\"item-delete-btn\"]',event=>this.deleteQuestion(event));\n    this.$form.on('click','[data-role=\"replace-item\"]',event=>this.replaceQuestion(event));\n    this.$form.on('click','[data-role=\"preview-btn\"]',event=>this.previewQuestion(event));\n    this.$form.on('click','[data-role=\"batch-delete-btn\"]',event=>this.batchDelete(event));\n    this.initSortList();\n  }\n\n  initSortList() {\n    let adjustment;\n    const $tbody = this.$form.find('tbody');\n    const td = $tbody.hasClass('js-homework-table') ? '': '<td></td>';\n    const tdHtml = `<tr class=\"question-placehoder js-placehoder\"><td></td><td></td><td></td><td></td><td></td><td></td><td></td>${td}</tr>`;\n    $tbody.sortable({\n      containerPath: '> tr',\n      containerSelector:'tbody',\n      itemSelector: 'tr.is-question',\n      placeholder: tdHtml,\n      exclude: '.notMoveHandle',\n      onDragStart: function(item, container, _super) {\n        if (!item.hasClass('have-sub-questions')) {\n          $('.js-have-sub').removeClass('is-question');\n        }\n        let offset = item.offset(),\n          pointer = container.rootGroup.pointer;\n        adjustment = {\n          left: pointer.left - offset.left,\n          top: pointer.top - offset.top\n        };\n        _super(item, container);\n      },\n      onDrag: function(item, position) {\n        const height = item.height();\n        item.css({\n          left: position.left - adjustment.left,\n          top: position.top - adjustment.top\n        });\n\n        $('.js-placehoder').css({\n          'height': height,\n        });\n      },\n      onDrop: (item, container, _super) => {\n        _super(item, container);\n        if (item.hasClass('have-sub-questions')) {\n          let $tbody = item.parents('tbody');\n          $tbody.find('tr.is-question').each(function() {\n            let $tr = $(this);\n            $tbody.find('[data-parent-id=' + $tr.data('id') + ']').detach().insertAfter($tr);\n          });\n        } else {\n          $('.js-have-sub').addClass('is-question');\n        }\n        this.refreshSeqs();\n      }\n    });\n  }\n\n  replaceQuestion(event) {\n    let $target = $(event.currentTarget);\n    let excludeIds = [];\n    let $tbody = this.$form.find('tbody:visible');\n\n    $tbody.find('[name=\"questionIds[]\"]').each(function(){\n      excludeIds.push($(this).val());\n    });\n\n    this.$modal.data('manager', this).modal();\n    $.get($target.data('url'), {excludeIds: excludeIds.join(','), type: $tbody.data('type')}, html => {\n      this.$modal.html(html);\n    });\n  }\n\n  deleteQuestion(event) {\n    event.stopPropagation();\n    let $target = $(event.currentTarget);\n    let id = $target.closest('tr').data('id');\n    let $tbody =  $target.closest('tbody');\n    $tbody.find('[data-parent-id=\"'+id+'\"]').remove();\n    $target.closest('tr').remove();\n    questionSubjectiveRemask(this.$form);\n    $tbody.trigger('lengthChange');\n    this.refreshSeqs();\n  }\n\n  batchDelete(event) {\n    if (this.$form.find('[data-role=\"batch-item\"]:checked').length == 0) {\n      let $redmine = this.$form.find('.js-help-redmine');\n      if($redmine) {\n        $redmine.text(Translator.trans('activity.testpaper_manage.question_required_error_hint')).show();\n        setTimeout(function() {\n          $redmine.slideUp();\n        }, 3000);\n      }else {\n        notify('danger', Translator.trans('activity.testpaper_manage.question_required_error_hint'));\n      }\n    }\n    let self = this;\n\n    this.$form.find('[data-role=\"batch-item\"]:checked').each(function(index,item){\n      let questionId = $(this).val();\n\n      if ($(this).closest('tr').data('type') == 'material') {\n        self.$form.find('[data-parent-id=\"'+questionId+'\"]').remove();\n      }\n      $(this).closest('tr').remove();\n      \n    });\n    questionSubjectiveRemask(this.$form);\n  }\n\n  previewQuestion(event) {\n    event.preventDefault();\n    window.open($(event.currentTarget).data('url'), '_blank', 'directories=0,height=580,width=820,scrollbars=1,toolbar=0,status=0,menubar=0,location=0');\n  }\n\n  refreshSeqs() {\n    let seq = 1;\n    this.$form.find('tbody tr').each(function(){\n      let $tr = $(this);\n                  \n      if (!$tr.hasClass('have-sub-questions')) { \n        $tr.find('td.seq').html(seq);\n        seq ++;\n      }\n    });  \n\n    this.$form.find('[name=\"questionLength\"]').val((seq - 1) > 0 ? (seq - 1 ) : null );       \n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/component/question-operate/index.js","export let questionSubjectiveRemask = ($element) => {\n  let hasSubjective = false;\n  let html = '';\n  const $subjectiveRemask = $('#task-create-content-iframe').contents().find('.js-subjective-remask');\n\n  $element.find('tbody tr').each(function() {\n    let type = $(this).data('type');\n    console.log(type);\n    if (type == 'essay') {\n      hasSubjective = true;\n    }\n  });\n  console.log(hasSubjective);\n  if(hasSubjective || $element.find('tbody tr').length == 0) {\n    $subjectiveRemask.html('');\n    return;\n  }\n\n  console.log($subjectiveRemask);\n\n  if($subjectiveRemask.data('type') == 'homework') {\n    html = Translator.trans('activity.homework_manage.objective_question_hint');\n  }\n  else {\n    html = Translator.trans('activity.homework_manage.pass_objective_question_hint');\n  }\n  $subjectiveRemask.html(html).removeClass('hidden');\n};\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/component/question-subjective/index.js","import BatchSelect from 'app/common/widget/batch-select';\nimport QuestionOperate from 'app/common/component/question-operate';\nimport Create from './create';\n\nlet $from = $('#step2-form');\nnew Create($('#iframe-content'));\nnew BatchSelect($from);\nnew QuestionOperate($from,$('#attachment-modal',window.parent.document));\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/homework/index.js","export default class Homework {\n  constructor($iframeContent) {\n    this.$homeworkModal = $('#modal', window.parent.document);\n    this.$questionPickedModal = $('#attachment-modal', window.parent.document);\n    this.$element = $iframeContent;\n    this.$step2_form = this.$element.find('#step2-form');\n    this.$step3_form = this.$element.find('#step3-form');\n    this.validator2 = null;\n    this.init();\n  }\n\n  init() {\n    this.initEvent();\n    this.setValidateRule();\n    this.inItStep2form();\n  }\n\n  initEvent() {\n    this.$element.on('click', '[data-role=\"pick-item\"]', event => this.showPickQuestion(event));\n    this.$questionPickedModal.on('shown.bs.modal', () => {\n      this.$homeworkModal.hide();\n    });\n    this.$questionPickedModal.on('hidden.bs.modal', () => {\n      this.$homeworkModal.show();\n      this.$questionPickedModal.html('');\n      if(this.validator2) {\n        this.validator2.form();\n      }\n    });\n  }\n\n  initCkeditor(validator) {\n    let editor = CKEDITOR.replace('homework-about-field', {\n      toolbar: 'Task',\n      fileSingleSizeLimit: app.fileSingleSizeLimit,\n      filebrowserImageUploadUrl: $('#homework-about-field').data('imageUploadUrl'),\n    });\n    editor.on('change', () => {\n      $('#homework-about-field').val(editor.getData());\n    });\n    editor.on('blur', () => {\n      validator.form();\n    });\n  }\n\n  showPickQuestion(event) {\n    event.preventDefault();\n    let $btn = $(event.currentTarget);\n    let excludeIds = [];\n    $('#question-table-tbody').find('[name=\"questionIds[]\"]').each(function () {\n      excludeIds.push($(this).val());\n    });\n    this.$questionPickedModal.modal().data('manager', this);\n    $.get($btn.data('url'), {\n      excludeIds: excludeIds.join(',')\n    }, html => {\n      this.$questionPickedModal.html(html);\n    });\n  }\n\n  inItStep2form() {\n    var validator = this.$step2_form.validate({\n      onkeyup: false,\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n          course_title: true,\n        },\n        description: {\n          required: true\n        },\n        content: 'required',\n        'questionLength': {\n          required: true\n        },\n      },\n      messages: {\n        description: Translator.trans('activity.homework_manage.question_homework_hint'),\n        questionLength: Translator.trans('activity.homework_manage.question_required_error_hint'),\n      },\n    });\n    this.validator2 = validator;\n    this.initCkeditor(validator);\n    this.$step2_form.data('validator', validator);\n\n  }\n\n  setValidateRule() {\n    $.validator.addMethod('arithmeticFloat', function (value, element) {\n      return this.optional(element) || /^[0-9]+(\\.[0-9]?)?$/.test(value);\n    }, $.validator.format(Translator.trans('activity.homework_manage.arithmetic_float_error_hint')));\n\n    $.validator.addMethod('positiveInteger', function (value, element) {\n      return this.optional(element) || /^[1-9]\\d*$/.test(value);\n    }, $.validator.format(Translator.trans('activity.homework_manage.positive_integer_error_hint')));\n\n    $.validator.addMethod('DateAndTime', function (value, element) {\n      let reg = /^(?:(?!0000)[0-9]{4}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-8])|(?:0[13-9]|1[0-2])-(?:29|30)|(?:0[13578]|1[02])-31)|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)-02-29) ([0-1]{1}[0-9]{1})|(2[0-4]{1}):[0-5]{1}[0-9]{1}$/;\n      return this.optional(element) || reg.test(value);\n    }, $.validator.format(Translator.trans('activity.homework_manage.date_and_time_error_hint:mm')));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/homework/create.js"],"sourceRoot":""}