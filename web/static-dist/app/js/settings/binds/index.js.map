{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/settings/binds/index.js"],"names":["WECHAT_BIND_INTRO","$","on","$this","url","data","cd","confirm","title","Translator","trans","content","okText","cancelText","post","message","type","setTimeout","window","location","reload","wechatIntro","doneLabel","customClass","introJs","setOptions","steps","element","intro","skipLabel","showBullets","tooltipPosition","showStepNumbers","exitOnEsc","exitOnOverlayClick","tooltipClass","start","$notificationEnable","val","store","get","set","$target","attr","res","img"],"mappings":";;;;;;;;AAAA;;AACA,IAAMA,oBAAoB,mBAA1B;;AAEAC,EAAE,gBAAF,EAAoBC,EAApB,CAAuB,OAAvB,EAAgC,YAAW;AACzC,MAAIC,QAAQF,EAAE,IAAF,CAAZ;AACA,MAAIG,MAAMD,MAAME,IAAN,CAAW,KAAX,CAAV;;AAEAC,KAAGC,OAAH,CAAW;AACTC,WAAOC,WAAWC,KAAX,CAAiB,4BAAjB,CADE;AAETC,aAASF,WAAWC,KAAX,CAAiB,8BAAjB,CAFA;AAGTE,YAAQH,WAAWC,KAAX,CAAiB,cAAjB,CAHC;AAITG,gBAAYJ,WAAWC,KAAX,CAAiB,YAAjB;AAJH,GAAX,EAKGR,EALH,CAKM,IALN,EAKY,YAAM;AAChBD,MAAEa,IAAF,CAAOV,GAAP,EAAY,UAAUC,IAAV,EAAgB;AAC1BC,SAAGS,OAAH,CAAW,EAACC,MAAM,SAAP,EAAkBD,SAASN,WAAWC,KAAX,CAAiBL,KAAKU,OAAtB,CAA3B,EAAX;AACAE,iBAAW,YAAW;AACpBC,eAAOC,QAAP,CAAgBC,MAAhB;AACD,OAFD,EAEG,IAFH;AAGD,KALD;AAMD,GAZD;AAaD,CAjBD;;AAmBA,IAAMC,cAAc,SAAdA,WAAc,GAAM;AACxB,MAAMC,YAAY,yCAAlB;AACA,MAAMC,cAAc,oBAApB;AACAC,YAAUC,UAAV,CAAqB;AACnBC,WAAO,CAAC;AACNC,eAAS,gBADH;AAENC,aAAOnB,WAAWC,KAAX,CAAiB,uCAAjB;AAFD,KAAD,CADY;AAKnBmB,eAAWP,SALQ;AAMnBA,eAAWA,SANQ;AAOnBQ,iBAAa,KAPM;AAQnBC,qBAAiB,MARE;AASnBC,qBAAiB,KATE;AAUnBC,eAAW,KAVQ;AAWnBC,wBAAoB,KAXD;AAYnBC,kBAAcZ;AAZK,GAArB,EAaGa,KAbH;AAcD,CAjBD;;AAmBA,IAAIC,sBAAsBpC,EAAE,8BAAF,EAAkCqC,GAAlC,EAA1B;AACA,IAAI,CAACC,MAAMC,GAAN,CAAUxC,iBAAV,CAAD,IAAiCC,EAAE,8BAAF,EAAkCI,IAAlC,CAAuC,QAAvC,MAAqD,MAAtF,IAAgGgC,mBAApG,EAAyH;AACvHE,QAAME,GAAN,CAAUzC,iBAAV,EAA6B,IAA7B;AACAqB;AACD;;AAED,IAAIqB,UAAUzC,EAAE,sBAAF,CAAd;AACA,IAAI,OAAOyC,QAAQrC,IAAR,CAAa,KAAb,CAAP,IAA+B,WAAnC,EAAgD;AAC9CJ,IAAEuC,GAAF,CAAME,QAAQrC,IAAR,CAAa,KAAb,CAAN,EAA2B,eAAO;AAChCqC,YAAQC,IAAR,CAAa,KAAb,EAAoBC,IAAIC,GAAxB;AACD,GAFD;AAGD,C","file":"app/js/settings/binds/index.js","sourcesContent":["import 'store';\nconst WECHAT_BIND_INTRO = 'WECHAT_BIND_INTRO';\n\n$('.js-unbind-btn').on('click', function() {\n  let $this = $(this);\n  let url = $this.data('url');\n\n  cd.confirm({\n    title: Translator.trans('user.settings.unbind_title'),\n    content: Translator.trans('user.settings.unbind_content'),\n    okText: Translator.trans('site.confirm'),\n    cancelText: Translator.trans('site.close'),\n  }).on('ok', () => {\n    $.post(url, function (data) {\n      cd.message({type: 'success', message: Translator.trans(data.message)});\n      setTimeout(function() {\n        window.location.reload();\n      }, 3000);\n    });\n  });\n});\n\nconst wechatIntro = () => {\n  const doneLabel = '<i class=\"es-icon es-icon-close01\"></i>';\n  const customClass = 'wechat-intro-intro';\n  introJs().setOptions({\n    steps: [{\n      element: '.js-wechat-btn',\n      intro: Translator.trans('wechat.notification.wechat_bind_hover'),\n    }],\n    skipLabel: doneLabel,\n    doneLabel: doneLabel,\n    showBullets: false,\n    tooltipPosition: 'down',\n    showStepNumbers: false,\n    exitOnEsc: false,\n    exitOnOverlayClick: false,\n    tooltipClass: customClass\n  }).start();\n}\n\nvar $notificationEnable = $('#wechat_notification_enabled').val();\nif (!store.get(WECHAT_BIND_INTRO) && $('#wechat_notification_enabled').data('status') !== 'bind' && $notificationEnable) {\n  store.set(WECHAT_BIND_INTRO, true);\n  wechatIntro();\n}\n\nlet $target = $(\"#wechat-login-qrcode\");\nif (typeof($target.data('url')) != 'undefined') {\n  $.get($target.data('url'), res => {\n    $target.attr('src', res.img);\n  });\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/binds/index.js"],"sourceRoot":""}