{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/admin-v2/default/index.js"],"names":["$","on","event","$target","currentTarget","slideToggle","value","text","Translator","trans","find","toggleClass","showAdImage","$cloudAd","img","res","$img","$box","boxWidth","width","window","WindowHeight","height","marginTop","attr","urlOfImage","append","css","modal","showCloudAd","get","data","error","Image","Cookies","image","src","complete","onload","set","expires","popover","trigger","placement","title","template","html","content","loadFirst","$stepsDom","length","$overviewDom","$entranceDom","$infoDom","$announcementDom","loadSecond","$applicationDom","$adviceDom","$changelogDom","$qrcodeDom","loadStep","setTimeout","click","cd","message","type"],"mappings":";;;;;;;;AAAA;;;;;;AAEAA,EAAE,iBAAF,EAAqBC,EAArB,CAAwB,OAAxB,EAAiC,UAACC,KAAD,EAAW;AAC1C,MAAMC,UAAUH,EAAEE,MAAME,aAAR,CAAhB;AACAJ,IAAE,WAAF,EAAeK,WAAf;AACA,MAAMC,QAAQN,EAAE,iBAAF,EAAqBO,IAArB,OAAgCC,WAAWC,KAAX,CAAiB,oBAAjB,CAAhC,GAAyED,WAAWC,KAAX,CAAiB,kBAAjB,CAAzE,GAA+GD,WAAWC,KAAX,CAAiB,oBAAjB,CAA7H;AACAT,IAAE,iBAAF,EAAqBO,IAArB,CAA0BD,KAA1B;AACAH,UAAQO,IAAR,CAAa,GAAb,EAAkBC,WAAlB,CAA8B,mDAA9B;AACD,CAND;;AAQA,IAAMC,cAAc,SAAdA,WAAc,CAACC,QAAD,EAAWC,GAAX,EAAgBC,GAAhB,EAAwB;AAC1C,MAAMC,OAAOhB,EAAEc,GAAF,CAAb;AACA,MAAMG,OAAOJ,SAASH,IAAT,CAAc,eAAd,CAAb;AACA,MAAMQ,WAAWD,KAAKE,KAAL,KAAeF,KAAKE,KAAL,EAAf,GAA8BnB,EAAEoB,MAAF,EAAUD,KAAV,KAAoB,EAAnE;AACA,MAAME,eAAerB,EAAEoB,MAAF,EAAUE,MAAV,EAArB;AACA,MAAMH,QAAQL,IAAIK,KAAlB;AACA,MAAIG,SAASR,IAAIQ,MAAjB;AACA,MAAIC,YAAY,CAAhB;AACA,MAAKJ,QAAQG,MAAT,IAAqB,IAAI,CAA7B,EAAiC;AAC/BA,aAASH,QAAQD,QAAR,GAAmBI,UAAUH,QAAQD,QAAlB,CAAnB,GAAiDI,UAAUJ,WAAWC,KAArB,CAA1D;AACAI,gBAAY,CAACF,eAAeC,MAAhB,IAA0B,CAAtC;AACD,GAHD,MAGO;AACLA,aAASD,eAAe,GAAf,GAAqB,GAArB,GAA2BA,eAAe,GAAnD;AACAL,SAAKM,MAAL,CAAYA,MAAZ;AACAN,SAAKG,KAAL,CAAW,MAAX;AACAI,gBAAY,CAACF,eAAeC,MAAhB,IAA0B,CAAtC;AACD;AACDT,WAASH,IAAT,CAAc,GAAd,EAAmBc,IAAnB,CAAwB,MAAxB,EAAgCT,IAAIU,UAApC,EAAgDC,MAAhD,CAAuDV,IAAvD,EAA6DW,GAA7D,CAAiE,EAAC,cAAcJ,SAAf,EAAjE;AACAV,WAASe,KAAT,CAAe,MAAf;AACD,CAnBD;;AAqBA,IAAMC,cAAc,SAAdA,WAAc,GAAM;AACxB,MAAMhB,WAAWb,EAAE,WAAF,CAAjB;AACAA,IAAE8B,GAAF,CAAMjB,SAASkB,IAAT,CAAc,KAAd,CAAN,EAA4B,UAAChB,GAAD,EAAS;AACnC,QAAIA,IAAIiB,KAAR,EAAe;AACb;AACD;AACD,QAAMlB,MAAM,IAAImB,KAAJ,EAAZ;AACA,QAAIC,mBAAQJ,GAAR,CAAY,UAAZ,KAA2Bf,IAAIoB,KAAnC,EAA0C;AACxC;AACD;AACDrB,QAAIsB,GAAJ,GAAUrB,IAAIoB,KAAd;AACA,QAAIrB,IAAIuB,QAAR,EAAkB;AAChBzB,kBAAYC,QAAZ,EAAsBC,GAAtB,EAA2BC,GAA3B;AACD,KAFD,MAEO;AACLD,UAAIwB,MAAJ,GAAa,YAAM;AACjB1B,oBAAYC,QAAZ,EAAsBC,GAAtB,EAA2BC,GAA3B;AACAD,YAAIwB,MAAJ,GAAa,IAAb;AACD,OAHD;AAID;AACF,GAjBD;;AAmBAzB,WAASZ,EAAT,CAAY,eAAZ,EAA6B,YAAM;AACjCiC,uBAAQK,GAAR,CAAY,UAAZ,EAAwB1B,SAASH,IAAT,CAAc,KAAd,EAAqBc,IAArB,CAA0B,KAA1B,CAAxB,EAA0D,EAACgB,SAAS,MAAM,EAAhB,EAA1D;AACD,GAFD;AAGD,CAxBD;;AA0BA,IAAMJ,MAAMpC,EAAE,kBAAF,EAAsB+B,IAAtB,CAA2B,KAA3B,CAAZ;AACA/B,EAAE,kBAAF,EAAsByC,OAAtB,CAA8B;AAC5BC,WAAS,OADmB;AAE5BC,aAAW,QAFiB;AAG5BC,SAAOpC,WAAWC,KAAX,CAAiB,sCAAjB,CAHqB;AAI5BoC,YAAU,4JAJkB;AAK5BC,QAAM,IALsB;AAM5BC,0BAAsBX,GAAtB;AAN4B,CAA9B;;AASA,IAAMY,YAAY,SAAZA,SAAY,GAAM;AACtB;AACA,MAAMC,YAAYjD,EAAE,WAAF,CAAlB;AACA,MAAIiD,UAAUC,MAAd,EAAsB;AACpBlD,MAAE8B,GAAF,CAAMmB,UAAUlB,IAAV,CAAe,KAAf,CAAN,EAA6B,UAACe,IAAD,EAAU;AACrCG,gBAAUH,IAAV,CAAeA,IAAf;AACD,KAFD;AAGD;;AAED;AACA,MAAMK,eAAenD,EAAE,mBAAF,CAArB;AACA,MAAImD,aAAaD,MAAjB,EAAyB;AACvBlD,MAAE8B,GAAF,CAAMqB,aAAapB,IAAb,CAAkB,KAAlB,CAAN,EAAgC,UAACe,IAAD,EAAU;AACxCK,mBAAaL,IAAb,CAAkBA,IAAlB;AACD,KAFD;AAGD;;AAED;AACA,MAAMM,eAAepD,EAAE,oBAAF,CAArB;AACA,MAAIoD,aAAaF,MAAjB,EAAyB;AACvBlD,MAAE8B,GAAF,CAAMsB,aAAarB,IAAb,CAAkB,KAAlB,CAAN,EAAgC,UAACe,IAAD,EAAU;AACxCM,mBAAaN,IAAb,CAAkBA,IAAlB;AACD,KAFD;AAGD;;AAED;AACA,MAAMO,WAAWrD,EAAE,gBAAF,CAAjB;AACA,MAAIqD,SAASH,MAAT,IAAmBG,SAAStB,IAAT,CAAc,KAAd,CAAvB,EAA6C;AAC3C/B,MAAE8B,GAAF,CAAMuB,SAAStB,IAAT,CAAc,KAAd,CAAN,EAA4B,UAACe,IAAD,EAAU;AACpCO,eAASP,IAAT,CAAcA,IAAd;AACD,KAFD;AAGD;;AAED;AACA,MAAMQ,mBAAmBtD,EAAE,kBAAF,CAAzB;AACA,MAAIsD,iBAAiBJ,MAAjB,IAA2BI,iBAAiBvB,IAAjB,CAAsB,KAAtB,CAA/B,EAA6D;AAC3D/B,MAAE8B,GAAF,CAAMwB,iBAAiBvB,IAAjB,CAAsB,KAAtB,CAAN,EAAoC,UAACe,IAAD,EAAU;AAC5CQ,uBAAiBR,IAAjB,CAAsBA,IAAtB;AACD,KAFD;AAGD;AACF,CAxCD;;AA2CA,IAAMS,aAAa,SAAbA,UAAa,GAAM;AACvB;AACA,MAAMC,kBAAkBxD,EAAE,oBAAF,CAAxB;AACA,MAAIwD,gBAAgBN,MAAhB,IAA0BM,gBAAgBzB,IAAhB,CAAqB,KAArB,CAA9B,EAA2D;AACzD/B,MAAE8B,GAAF,CAAM0B,gBAAgBzB,IAAhB,CAAqB,KAArB,CAAN,EAAmC,UAACe,IAAD,EAAU;AAC3CU,sBAAgBV,IAAhB,CAAqBA,IAArB;AACD,KAFD;AAGD;;AAED;AACA,MAAMW,aAAazD,EAAE,kBAAF,CAAnB;AACA,MAAIyD,WAAWP,MAAX,IAAqBO,WAAW1B,IAAX,CAAgB,KAAhB,CAAzB,EAAiD;AAC/C/B,MAAE8B,GAAF,CAAM2B,WAAW1B,IAAX,CAAgB,KAAhB,CAAN,EAA8B,UAACe,IAAD,EAAU;AACtCW,iBAAWX,IAAX,CAAgBA,IAAhB;AACD,KAFD;AAGD;;AAED;AACA,MAAMY,gBAAgB1D,EAAE,qBAAF,CAAtB;AACA,MAAI0D,cAAcR,MAAd,IAAwBQ,cAAc3B,IAAd,CAAmB,KAAnB,CAA5B,EAAuD;AACrD/B,MAAE8B,GAAF,CAAM4B,cAAc3B,IAAd,CAAmB,KAAnB,CAAN,EAAiC,UAACe,IAAD,EAAU;AACzCY,oBAAcZ,IAAd,CAAmBA,IAAnB;AACD,KAFD;AAGD;;AAED;AACA,MAAMa,aAAa3D,EAAE,kBAAF,CAAnB;AACA,MAAI2D,WAAWT,MAAX,IAAqBS,WAAW5B,IAAX,CAAgB,KAAhB,CAAzB,EAAiD;AAC/C/B,MAAE8B,GAAF,CAAM6B,WAAW5B,IAAX,CAAgB,KAAhB,CAAN,EAA8B,UAACe,IAAD,EAAU;AACtCa,iBAAWb,IAAX,CAAgBA,IAAhB;AACD,KAFD;AAGD;AACF,CAhCD;;AAkCA,IAAMc,WAAW,SAAXA,QAAW,GAAM;AACrBZ;AACAa,aAAW,YAAM;AACfN;AACD,GAFD,EAEE,IAFF;AAGD,CALD;;AAOAK;AACAxC,OAAOkB,MAAP,GAAgB,YAAM;AACpBT;AACD,CAFD;AAGA7B,EAAE,gBAAF,EAAoB8D,KAApB,CAA0B,YAAY;AACpCC,KAAGC,OAAH,CAAW,EAACC,MAAM,QAAP,EAAiB,WAAWzD,WAAWC,KAAX,CAAiB,yBAAjB,CAA5B,EAAX;AACD,CAFD,E","file":"app/js/admin-v2/default/index.js","sourcesContent":["import Cookies from 'js-cookie';\n\n$('.js-show-toggle').on('click', (event) => {\n  const $target = $(event.currentTarget);\n  $('.js-steps').slideToggle();\n  const value = $('.js-toggle-text').text() === Translator.trans('site.data.collapse') ? Translator.trans('site.data.expand'): Translator.trans('site.data.collapse');\n  $('.js-toggle-text').text(value);\n  $target.find('i').toggleClass('es-icon-keyboardarrowup es-icon-keyboardarrowdown');\n});\n\nconst showAdImage = ($cloudAd, img, res) => {\n  const $img = $(img);\n  const $box = $cloudAd.find('.modal-dialog');\n  const boxWidth = $box.width() ? $box.width() : $(window).width() - 20;\n  const WindowHeight = $(window).height();\n  const width = img.width;\n  let height = img.height;\n  let marginTop = 0;\n  if ((width / height) >= (4 / 3)) {\n    height = width > boxWidth ? height / (width / boxWidth) : height * (boxWidth / width);\n    marginTop = (WindowHeight - height) / 2;\n  } else {\n    height = WindowHeight > 600 ? 600 : WindowHeight * 0.9;\n    $img.height(height);\n    $img.width('auto');\n    marginTop = (WindowHeight - height) / 2;\n  }\n  $cloudAd.find('a').attr('href', res.urlOfImage).append($img).css({'margin-top': marginTop});\n  $cloudAd.modal('show');\n};\n\nconst showCloudAd = () => {\n  const $cloudAd = $('#cloud-ad');\n  $.get($cloudAd.data('url'), (res) => {\n    if (res.error) {\n      return;\n    }\n    const img = new Image();\n    if (Cookies.get('cloud-ad') == res.image) {\n      return;\n    }\n    img.src = res.image;\n    if (img.complete) {\n      showAdImage($cloudAd, img, res);\n    } else {\n      img.onload = () => {\n        showAdImage($cloudAd, img, res);\n        img.onload = null;\n      };\n    }\n  });\n\n  $cloudAd.on('hide.bs.modal', () => {\n    Cookies.set('cloud-ad', $cloudAd.find('img').attr('src'), {expires: 360 * 10});\n  });\n};\n\nconst src = $('.js-mini-program').data('src');\n$('.js-mini-program').popover({\n  trigger: 'hover',\n  placement: 'bottom',\n  title: Translator.trans('admin_v2.homepage.mini_program.title'),\n  template: '<div class=\"popover mini-program-popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>',\n  html: true,\n  content: `<img src=\"${src}\" width=\"200px\">`\n});\n\nconst loadFirst = () => {\n  //六步任务助手\n  const $stepsDom = $('.js-steps');\n  if ($stepsDom.length) {\n    $.get($stepsDom.data('url'), (html) => {\n      $stepsDom.html(html);\n    });\n  }\n\n  // 数据概览\n  const $overviewDom = $('.js-data-overview');\n  if ($overviewDom.length) {\n    $.get($overviewDom.data('url'), (html) => {\n      $overviewDom.html(html);\n    });\n  }\n\n  // 快速入口\n  const $entranceDom = $('.js-quick-entrance');\n  if ($entranceDom.length) {\n    $.get($entranceDom.data('url'), (html) => {\n      $entranceDom.html(html);\n    });\n  }\n\n  //网校信息块\n  const $infoDom = $('.js-admin-info');\n  if ($infoDom.length && $infoDom.data('url')) {\n    $.get($infoDom.data('url'), (html) => {\n      $infoDom.html(html);\n    });\n  }\n\n  // 站长公告\n  const $announcementDom = $('.js-announcement');\n  if ($announcementDom.length && $announcementDom.data('url')) {\n    $.get($announcementDom.data('url'), (html) => {\n      $announcementDom.html(html);\n    });\n  }\n};\n\n\nconst loadSecond = () => {\n  // 应用推荐\n  const $applicationDom = $('.application-intro');\n  if ($applicationDom.length && $applicationDom.data('url')) {\n    $.get($applicationDom.data('url'), (html) => {\n      $applicationDom.html(html);\n    });\n  }\n\n  //经营建议\n  const $adviceDom = $('.js-admin-advice');\n  if ($adviceDom.length && $adviceDom.data('url')) {\n    $.get($adviceDom.data('url'), (html) => {\n      $adviceDom.html(html);\n    });\n  }\n\n  //CHANGELOG\n  const $changelogDom = $('.js-admin-changelog');\n  if ($changelogDom.length && $changelogDom.data('url')) {\n    $.get($changelogDom.data('url'), (html) => {\n      $changelogDom.html(html);\n    });\n  }\n\n  //QRCODE\n  const $qrcodeDom = $('.js-admin-qrcode');\n  if ($qrcodeDom.length && $qrcodeDom.data('url')) {\n    $.get($qrcodeDom.data('url'), (html) => {\n      $qrcodeDom.html(html);\n    });\n  }\n};\n\nconst loadStep = () => {\n  loadFirst();\n  setTimeout(() => {\n    loadSecond();\n  },1000);\n};\n\nloadStep();\nwindow.onload = () => {\n  showCloudAd();\n};\n$('.js-no-network').click(function () {\n  cd.message({type: 'danger', 'message': Translator.trans('admin.can_not_link_data')});\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/admin-v2/default/index.js"],"sourceRoot":""}