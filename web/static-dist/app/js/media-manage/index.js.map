{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/media-manage/index.js","webpack:///./app/Resources/static-src/app/js/media-manage/coord.js","webpack:///./node_modules/subtitle/lib/add.js","webpack:///./app/Resources/static-src/app/js/media-manage/manage.js","webpack:///./node_modules/subtitle/lib/stringify.js","webpack:///./node_modules/subtitle/lib/getSubtitles.js","webpack:///./app/Resources/static-src/app/js/media-manage/messenger.js","webpack:///./node_modules/subtitle/lib/parse.js","webpack:///./node_modules/xtend/immutable.js","webpack:///./node_modules/subtitle/lib/toSrtTime.js","webpack:///./node_modules/subtitle/lib/toMS.js","webpack:///./app/Resources/static-src/app/js/media-manage/subtitle-select.js","webpack:///./node_modules/subtitle/lib/resync.js","webpack:///./app/Resources/static-src/app/js/media-manage/video.js","webpack:///./node_modules/subtitle/subtitle.js"],"names":["Manage","Tool","$elem","$","$editbox_list","partnum","mediaLength","data","parttime","i","$new_scale_default","clone","css","getleft","removeClass","removeAttr","find","text","sec2Time","Math","round","before","messenger","on","currentTime","event","changeleft","document","window","getSelection","removeAllRanges","selection","empty","left","pageX","width","times","gettime","sendToChild","id","time","off","videoLength","_width","_totaltime","parseInt","_left","$textTrackDisplay","$uploader","select","init","initTextDisplay","initSelect","initUploader","height","tabHeight","textTrackTitleHeight","selectorHeight","show","Select","$subtitleListElem","subtitleList","mediaId","_this","optionsLimit","html","Translator","trans","ajax","url","type","done","showSubtitleContent","post","hide","resetOptions","videoNo","subtitleCreateUrl","uploader","UploaderSDK","sdkBaseUri","app","cloudSdkBaseUri","disableDataUpload","cloudDisableLogReport","disableSentry","initUrl","finishUrl","ui","multi","accept","extensions","mimeTypes","process","common","err","error","file","name","success","addOption","setTimeout","get","subtitles","responseJSON","message","captions","Subtitle","parse","e","subtitleArray","getSubtitles","duration","timeFormat","map","cue","$subtitleDom","last","index","start","end","parseFloat","eq","addClass","EsMessenger","project","children","getElementById","convertStatus","status","statusMap","waiting","doing","none","options","$el","eventManager","initParent","initEvent","_self","$documentFragment","createDocumentFragment","append","templete","$parentDom","$list","$dataShow","$open","$close","$showBox","delegate","handleOpen","bind","handleClose","handleDelete","siblings","attr","setValue","toggle","getValue","length","trigger","getOptionsStr","getDefaultOption","handleOptionEmpty","open","optionsStr","option","value","slideDown","slideUp","el","target","parent","remove","splice","stopPropagation","fn","push","optionsArray","videoHtml","playerUrl"],"mappings":"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CA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;;;;;;;;;;;ACrCA,IAAIyH,YAAYjL,EAAE,mBAAF,CAAhB;AACA,IAAIkL,YAAYD,UAAU7K,IAAV,CAAe,kBAAf,CAAhB;AACA,IAAI0D,OAAO,mBAAmBoH,SAAnB,GAA+B,iJAA1C;AACAlL,EAAE,uBAAF,EAA2B8D,IAA3B,CAAgCA,IAAhC,E;;;;;;;;ACHA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,MAAM;AACnB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;;AAEA","file":"app/js/media-manage/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import Manage from './manage';\n\nnew Manage();\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/index.js","import messenger from './messenger';\nimport * as Tool from 'common/utils';\n\nlet $elem = $('.js-editbox');\nlet $editbox_list = $('#editbox-lesson-list');\nlet partnum = 6;\nlet mediaLength = $elem.data('mediaLength');\nlet parttime = mediaLength / partnum;\n\nfor (let i = 0; i <= partnum; i++) {\n  let $new_scale_default = $('[data-role=\"scale-default\"]').clone().css('left', getleft(parttime * i, mediaLength)).removeClass('hidden').removeAttr('data-role');\n  $new_scale_default.find('[data-role=\"scale-time\"]').text(Tool.sec2Time(Math.round(parttime * i)));\n  $('[data-role=\"scale-default\"]').before($new_scale_default);\n}\n\nmessenger.on('timechange', function(data) {\n  $('.scale-white').css('left', getleft(data.currentTime, mediaLength));\n});\n\n$('.scale-white').on('mousedown', function(event) {\n  let changeleft = false;\n  $(document).on('mousemove.playertime', function(event) {\n    window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();\n    let left = event.pageX > ($editbox_list.width() + 20) ? ($editbox_list.width() + 20) : event.pageX && event.pageX <= 20 ? 20 : event.pageX;\n    $('.scale-white').css('left', left);\n    let times = gettime(left, mediaLength);\n    messenger.sendToChild({ id: 'viewerIframe' }, 'setCurrentTime', { time: times });\n  }).on('mouseup.playertime', function(event) {\n    $(document).off('mousemove.playertime');\n    $(document).off('mousedown.playertime');\n    changeleft = true;\n    // messenger.sendToChild({ id: 'viewerIframe' }, 'setPlayerPlay');\n  });\n\n});\n\nfunction getleft(time, videoLength) {\n  let _width = $('#editbox-lesson-list').width();\n  let _totaltime = parseInt(videoLength);\n  let _left = time * _width / _totaltime;\n  return _left + 20;\n}\n\nfunction gettime(left, mediaLength) {\n  return Math.round((left - 20) * mediaLength / $('#editbox-lesson-list').width());\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/coord.js","/**\n * Module dependencies.\n */\n\nvar toMS = require('./toMS')\nvar toSrtTime = require('./toSrtTime')\n\n/**\n * Add a new caption into the array of subtitles.\n *\n * @param {Array} subtitles\n * @param {Object} caption\n * @return {Array} subtitles\n */\n\nmodule.exports = function add (subtitles, caption) {\n  if (!caption.start || !caption.end || !caption.text) {\n    throw new Error('Invalid caption data')\n  }\n\n  for (var prop in caption) {\n    if (!caption.hasOwnProperty(prop) || prop === 'text') {\n      continue\n    }\n\n    if (prop === 'start' || prop === 'end') {\n      if (/^(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})$/.test(caption[prop])) {\n        continue\n      }\n      if (/^\\d+$/.test(caption[prop])) {\n        caption[prop] = toSrtTime(caption[prop])\n      } else {\n        throw new Error('Invalid caption time format')\n      }\n    }\n  }\n\n  subtitles.push({\n    index: subtitles.length + 1,\n    start: caption.start,\n    end: caption.end,\n    duration: toMS(caption.end) - toMS(caption.start),\n    text: caption.text\n  })\n\n  return subtitles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/subtitle/lib/add.js\n// module id = 27d19b4547a9c8dcdebe\n// module chunks = app/js/media-manage/index","import './video';\nimport './coord';\nimport Select from './subtitle-select';\nimport messenger from './messenger';\nimport notify from 'common/notify';\nimport Subtitle from 'subtitle';\n\nlet $textTrackDisplay = $('.text-track-overview');\nlet $uploader = $('#uploader');\n\nclass Manage {\n  constructor() {\n    this.select = null;\n    this.init();\n  }\n\n  init() {\n    this.initTextDisplay();\n    this.initSelect();\n    this.initUploader();\n  }\n\n  initTextDisplay() {\n    let height = $('.manage-edit-body').height();\n    let tabHeight = $('.nav-tabs-edit').height();\n    let textTrackTitleHeight = $('.text-track-title').height();\n    let selectorHeight = $('#track-select').height();\n    $textTrackDisplay.height(height - tabHeight - textTrackTitleHeight - selectorHeight - 140).show();\n  }\n\n  initSelect() {\n    let select = Object.create(Select);\n    let $subtitleListElem = $('#track-select');\n    let subtitleList = $subtitleListElem.data('subtitleList');\n    let mediaId = $uploader.data('mediaId');\n    let _this = this;\n    \n    select.init({\n      id: '#track-select',\n      optionsLimit: 4\n    });\n    select.on('valuechange', function(data) {\n      if (!data) {\n        $textTrackDisplay.html(Translator.trans('subtitle.no_subtitle_hint'));\n        return;\n      }\n      $.ajax({\n        url: data.url,\n        type: 'GET',\n      }).done(_this.showSubtitleContent);\n    });\n    select.on('deleteoption', function(data) {\n      let url = `/media/${mediaId}/subtitle/${data.id}/delete`;\n      $.post(url, (data) => {\n        if (data) {\n          notify('success', Translator.trans('subtitle.delete_success_hint'));\n          $uploader.show();\n        }\n      });\n    });\n    select.on('optionlimit', function() {\n      $uploader.hide();\n    });\n    select.resetOptions(subtitleList);\n\n    this.select = select;\n  }\n\n  initUploader() {\n    let select = this.select;\n\n    let videoNo = $uploader.data('mediaGlobalId');\n    let mediaId = $uploader.data('mediaId');\n    let subtitleCreateUrl = $uploader.data('subtitleCreateUrl');\n    \n    let uploader = new UploaderSDK({\n      sdkBaseUri: app.cloudSdkBaseUri,\n      disableDataUpload: app.cloudDisableLogReport,\n      disableSentry: app.cloudDisableLogReport,\n      initUrl: $uploader.data('initUrl'),\n      finishUrl: $uploader.data('finishUrl'),\n      id: 'uploader',\n      ui: 'simple',\n      multi: true,\n      accept: {\n        extensions: ['srt'],\n        mimeTypes: ['text/srt']\n      },\n      type: 'sub',\n      process: {\n        common: {\n          videoNo: videoNo\n        }\n      }\n    });\n\n    uploader.on('error', function(err) {\n      if (err.error === 'Q_TYPE_DENIED') {\n        notify('danger', Translator.trans('subtitle.upload_srt_hint'));\n      }\n    });\n\n    uploader.on('file.finish', function(file) {\n      $.post(subtitleCreateUrl, {\n        'name': file.name,\n        'subtitleId': file.id,\n        'mediaId': mediaId\n      }).success(function (data) {\n        if (!data) {\n          return;\n        }\n        select.addOption(data);\n        notify('success', Translator.trans('subtitle.upload_success_hint'));\n        \n        setTimeout(function() {\n          let url = `/media/${mediaId}/subtitles`;\n          $.get(url).done(function(data) {\n            if (data.subtitles) {\n              select.resetOptions(data.subtitles);\n            }\n          });\n        }, 5000);\n      }).error(function(data) {\n        notify('danger', Translator.trans(data.responseJSON.error.message));\n      });\n    });\n  }\n\n  showSubtitleContent(data) {\n    let captions = new Subtitle();\n    \n    try {\n      captions.parse(data);\n    } catch(e) {\n      notify('danger', Translator.trans('subtitle.parse_error_hint'));\n      $textTrackDisplay.html(Translator.trans('subtitle.parse_error_hint'));\n      return;\n    }\n\n    let subtitleArray = captions.getSubtitles({\n      duration: true,\n      timeFormat: 'ms'\n    });\n\n    let html = '';\n    subtitleArray.map((cue) => {\n      html += `<p>${cue.text}</p>`;\n    });\n    \n    $textTrackDisplay.html(html);\n\n    let $subtitleDom = $textTrackDisplay.find('p');\n    \n    messenger.on('timechange', function(data) {\n      setTimeout(function() {\n        let last = subtitleArray.find(function(cue, index) {\n          if (cue.start / 1000 > data.currentTime) {\n            return cue;\n          }\n        });\n\n        $subtitleDom.removeClass('active');\n        if (!last) {\n          return;\n        }\n        if (last.index > 1 && subtitleArray[last.index - 2].end > parseFloat(data.currentTime) * 1000) {\n          $subtitleDom.eq(last.index - 2).addClass('active');\n        }\n      }, 0);\n    });\n  }\n  \n}\n\nexport default Manage;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/manage.js","/**\n * Stringify the given array of subtitles.\n * @param {Array} subtitles\n * @return {String} srt\n */\n\nmodule.exports = function stringify (subtitles) {\n  var buffer = ''\n\n  subtitles.forEach(function (caption, index) {\n    if (index > 0) {\n      buffer += '\\n'\n    }\n    buffer += caption.index\n    buffer += '\\n'\n    buffer += caption.start + ' --> ' + caption.end\n    buffer += '\\n'\n    buffer += caption.text\n    buffer += '\\n'\n  })\n\n  return buffer\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/subtitle/lib/stringify.js\n// module id = 4fbc8f4e49952771dc85\n// module chunks = app/js/media-manage/index","/**\n * Module dependencies.\n */\n\nvar extend = require('xtend/immutable')\nvar toMS = require('./toMS')\n\n/**\n * Default options.\n */\n\nvar defaults = {\n  timeFormat: 'srt',\n  duration: false\n}\n\n/**\n * Transform the given array of subtitles.\n * @param {Array} subtitles\n * @param {Object} options\n * @return {Array} subtitles\n */\n\nmodule.exports = function getSubtitles (subtitles, options) {\n  options = extend(defaults, options)\n\n  if (options.timeFormat === 'ms') {\n    subtitles = subtitles.map(function (caption) {\n      caption.start = toMS(caption.start)\n      caption.end = toMS(caption.end)\n      return caption\n    })\n  }\n\n  if (!options.duration) {\n    subtitles = subtitles.map(function (caption) {\n      delete caption.duration\n      return caption\n    })\n  }\n\n  return subtitles\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/subtitle/lib/getSubtitles.js\n// module id = 558e05aa09312b06bb5c\n// module chunks = app/js/media-manage/index","import EsMessenger from 'app/common/messenger';\n\nlet messenger = new EsMessenger({\n  name: 'parent',\n  project: 'PlayerProject',\n  children: [document.getElementById('viewerIframe')],\n  type: 'parent'\n});\n\nexport default messenger;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/messenger.js","/**\n * Module dependencies.\n */\n\nvar toMS = require('./toMS')\n\n/**\n * Parse SRT string.\n * @param {String} srt\n * @return {Array} subtitles\n */\n\nmodule.exports = function parse (srt) {\n  var subs = []\n  var index\n  var time\n  var text\n  var start\n  var end\n\n  if (!srt) {\n    throw new Error('No SRT to parse')\n  }\n\n  srt = srt.trim()\n  srt += '\\n'\n  srt = srt\n    .replace(/\\r\\n/g, '\\n')\n    .replace(/\\n{3,}/g, '\\n\\n')\n    .split('\\n')\n\n  srt.forEach(function (line) {\n    line = line.toString()\n\n    // if we don't have an index, so we should expect an index\n    if (!index) {\n      if (/^\\d+$/.test(line)) {\n        index = parseInt(line)\n        return\n      }\n    }\n\n    // now we have to check for the time\n    if (!time) {\n      var match = line.match(/^(\\d{2}:\\d{2}:\\d{2},\\d{3}) --> (\\d{2}:\\d{2}:\\d{2},\\d{3})$/)\n      if (match) {\n        start = match[1]\n        end = match[2]\n        time = true\n        return\n      }\n    }\n\n    // now we get all the strings until we get an empty line\n    if (line.trim() === '') {\n      subs.push({\n        index: index,\n        start: start,\n        end: end,\n        duration: toMS(end) - toMS(start),\n        text: text || ''\n      })\n      index = time = start = end = text = null\n    } else {\n      if (!text) {\n        text = line\n      } else {\n        text += '\\n' + line\n      }\n    }\n  })\n\n  return subs\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/subtitle/lib/parse.js\n// module id = 62dd28380e65e28b6966\n// module chunks = app/js/media-manage/index","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/xtend/immutable.js\n// module id = 631b083c4a39c1f7f104\n// module chunks = app/js/media-manage/index","/**\n * Return the given milliseconds as SRT timestamp.\n * @param {Integer} milliseconds\n * @return {String} srtTimestamp\n */\n\nmodule.exports = function toSrtTime (milliseconds) {\n  if (!/^\\d+$/.test(milliseconds.toString())) {\n    throw new Error('Time should be an Integer value in milliseconds')\n  }\n\n  milliseconds = parseInt(milliseconds)\n\n  var date = new Date(0, 0, 0, 0, 0, 0, milliseconds)\n\n  var hours = date.getHours() < 10\n    ? '0' + date.getHours()\n    : date.getHours()\n\n  var minutes = date.getMinutes() < 10\n    ? '0' + date.getMinutes()\n    : date.getMinutes()\n\n  var seconds = date.getSeconds() < 10\n    ? '0' + date.getSeconds()\n    : date.getSeconds()\n\n  var ms = milliseconds - ((hours * 3600000) + (minutes * 60000) + (seconds * 1000))\n\n  if (ms < 100 && ms >= 10) {\n    ms = '0' + ms\n  } else if (ms < 10) {\n    ms = '00' + ms\n  }\n\n  var srtTime = hours + ':' + minutes + ':' + seconds + ',' + ms\n\n  return srtTime\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/subtitle/lib/toSrtTime.js\n// module id = 6d5fc844ee5e8f1afd1c\n// module chunks = app/js/media-manage/index","/**\n * Return the given SRT timestamp as milleseconds.\n * @param {String} srtTime\n * @returns {Number} milliseconds\n */\n\nmodule.exports = function toMS (srtTime) {\n  var match = srtTime.match(/^(\\d{2}):(\\d{2}):(\\d{2}),(\\d{3})$/)\n\n  if (!match) {\n    throw new Error('Invalid SRT time format')\n  }\n\n  var hours = parseInt(match[1], 10)\n  var minutes = parseInt(match[2], 10)\n  var seconds = parseInt(match[3], 10)\n  var milliseconds = parseInt(match[4], 10)\n\n  hours *= 3600000\n  minutes *= 60000\n  seconds *= 1000\n\n  return hours + minutes + seconds + milliseconds\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/subtitle/lib/toMS.js\n// module id = 7ea730999b7f9bc57768\n// module chunks = app/js/media-manage/index","const convertStatus = (status) => {\n  let statusMap = {\n    waiting: Translator.trans('subtitle.status.waiting'),\n    doing: Translator.trans('subtitle.status.doing'),\n    success: Translator.trans('subtitle.status.success'),\n    error: Translator.trans('subtitle.status.error'),\n    none: Translator.trans('subtitle.status.waiting')\n  };\n  return statusMap[status];\n};\n\nlet Select = {\n  init(options) {\n    this.$el = $(options.id);\n    this.options = [];\n    this.optionsLimit = options.optionsLimit || false;\n    this.eventManager = {};\n    this.initParent();\n    this.initEvent();\n  },\n  initParent() {\n    let _self = this;\n    let $documentFragment = $(document.createDocumentFragment());\n    $documentFragment.append(this.templete());\n    this.$el.append($documentFragment);\n    this.$parentDom = $('.track-select-parent');\n    this.$list = $('.track-selcet-list');\n    this.$dataShow = this.$parentDom.find('.data-show');\n    this.$open = this.$parentDom.find('.track-selcet-open-arrow');\n    this.$close = this.$parentDom.find('.track-selcet-close-arrow');\n    this.$showBox = this.$parentDom.find('.track-select-show');\n  },\n  initEvent() {\n    let _self = this;\n    this.$parentDom\n      .delegate('.track-selcet-open-arrow', 'click', this.handleOpen.bind(this))\n      .delegate('.track-selcet-close-arrow', 'click', this.handleClose.bind(this))\n      .delegate('.delete','click', this.handleDelete.bind(this))\n      .delegate('.select-item', 'click', function() {\n        $(this).siblings().removeClass('active');\n        $(this).addClass('active');\n        let name = $(this).find('.value').html();\n        let url = $(this).find('.value').attr('url');\n        _self.setValue({name:name,url:url});\n        _self.handleClose();\n      });\n    this.$showBox.on('click',this.toggle.bind(this));\n    this.on('valuechange',function(){\n      this.$dataShow.html(this.getValue().name);\n      this.$dataShow.attr('title',this.getValue().name);\n    });\n    this.on('listchange', function() {\n      if(this.optionsLimit && this.options.length >= this.optionsLimit ){\n        this.trigger('optionlimit');\n      }\n      this.$list.html(this.getOptionsStr());\n      this.setValue(this.getDefaultOption());\n    });\n    this.on('optionempty', this.handleOptionEmpty.bind(this));\n  },\n  templete() {\n    return `<div class=\"track-select-parent\">\n              <div class=\"track-select-show\">\n                <div class=\"data-show\" title=\"${this.getDefaultOption().name}\"></div>\n                <span class=\"track-selcet-open-arrow\">\n                  <i class=\"es-icon es-icon-keyboardarrowdown\"></i>\n                </span>\n                <span class=\"track-selcet-close-arrow\" style=\"display:none;\">\n                  <i class=\"es-icon es-icon-keyboardarrowup\"></i>\n                </span>\n              </div>\n              <ul class=\"track-selcet-list\" style=\"display:none;\">\n                ${this.getOptionsStr()}\n              </ul>\n            </div>`;\n  },\n  getDefaultOption() {\n    if (this.options.length) {\n      return this.options[0];\n    } else {\n      this.open ? this.handleClose() : '';\n      return false;\n    }\n  },\n  getOptionsStr() {\n    let _self = this;\n    if(!this.options.length){\n      this.trigger('optionempty');\n    }\n    let optionsStr = '';\n    this.options.map((option, index) => {\n      optionsStr += `<li class=\"select-item\">\n                        <div class=\"value\" title=\"${option.name}\" url=\"${option.url}\">\n                          ${option.name}\n                        </div>\n                        <span class=\"convertStatus convert-${option.convertStatus}\">${convertStatus(option.convertStatus)}</span>\n                        <i class=\"es-icon es-icon-close01 delete\" data-index=\"${index}\"></i>\n                      </li>`;\n    });\n    return optionsStr;\n  },\n  setValue(value) {\n    if (!value) {\n      this.$dataShow.html(Translator.trans('subtitle.no_subtitle_hint'));\n      this.trigger('valuechange',false);\n      return;\n    }\n    this.value = value;\n    this.trigger('valuechange',this.value);\n  },\n  getValue() {\n    return this.value || { name: Translator.trans('subtitle.no_subtitle_hint')};\n  },\n  toggle() {\n    this.open ? this.handleClose() : this.handleOpen();\n  },\n  handleOpen() {\n    if (!this.options.length) return;\n    this.open = true;\n    this.$open.hide();\n    this.$close.show();\n    this.$showBox.addClass('active');\n    this.$list.slideDown(200);\n  },\n  handleClose() {\n    this.open = false;\n    this.$close.hide();\n    this.$open.show();\n    this.$showBox.removeClass('active');\n    this.$list.slideUp(200);\n  },\n  handleDelete(e) {\n    let el = e.target;\n    $(el).parent().remove();\n    this.trigger('deleteoption',this.options[$(el).data('index')]);\n    this.options.splice($(el).data('index'),1);\n    this.trigger('listchange',this.options);\n    e.stopPropagation();\n  },\n  handleOptionEmpty() {\n    this.value = '';\n    this.trigger('valuechange',false);\n  },\n  on(event, fn) {\n    if (!this.eventManager[event]) {\n      this.eventManager[event] = [fn.bind(this)];\n    } else {\n      this.eventManager[event].push(fn.bind(this));\n    }\n  },\n  trigger(event, data) {\n    if (this.eventManager[event]) {\n      this.eventManager[event].map(function(fn) {\n        fn(data);\n      });\n    }\n  },\n  resetOptions(optionsArray) {\n    this.options = optionsArray;\n    this.trigger('listchange', this.options);\n  },\n  addOption(option) {\n    if (!option.convertStatus) {\n      option.convertStatus = 'waiting';\n    }\n    this.options.push(option);\n    this.trigger('listchange');\n  }\n};\n\nexport default Select;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/subtitle-select.js","/**\n * Module dependencies.\n */\n\nvar toMS = require('./toMS')\nvar toSrtTime = require('./toSrtTime')\n\n/**\n * Resync the subtitles.\n * @param {Array} subtitles\n * @param {Number} time\n */\n\nmodule.exports = function resync (subtitles, time) {\n  if (!/(-|\\+)?\\d+/.test(time.toString())) {\n    throw new Error('Invalid time: ' + time + '.Expected a valid integer')\n  }\n\n  time = parseInt(time, 10)\n\n  return subtitles.map(function (caption) {\n    var start = toMS(caption.start)\n    var end = toMS(caption.end)\n\n    start = start + time\n    end = end + time\n\n    caption.start = start < 0\n      ? toSrtTime(0)\n      : toSrtTime(start)\n\n    caption.end = end < 0\n      ? toSrtTime(0)\n      : toSrtTime(end)\n\n    return caption\n  })\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/subtitle/lib/resync.js\n// module id = a354ef45a5643f3faa0a\n// module chunks = app/js/media-manage/index","let videoHtml = $('#lesson-dashboard');\nlet playerUrl = videoHtml.data('media-player-url');\nlet html = '<iframe src=\\'' + playerUrl + '\\' name=\\'viewerIframe\\' id=\\'viewerIframe\\' width=\\'100%\\'allowfullscreen webkitallowfullscreen height=\\'100%\\' style=\\'border:0px\\'></iframe>';\n$('#lesson-video-content').html(html);\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/media-manage/video.js","'use strict'\n\n/*!\n * Subtitle.js\n * Parse and manipulate SRT (SubRip)\n * https://github.com/gsantiago/subtitle.js\n *\n * @version 0.1.5\n * @author Guilherme Santiago\n*/\n\n/**\n * Module dependencies.\n */\n\nvar toMS = require('./lib/toMS')\nvar toSrtTime = require('./lib/toSrtTime')\nvar parse = require('./lib/parse')\nvar stringify = require('./lib/stringify')\nvar resync = require('./lib/resync')\nvar getSubtitles = require('./lib/getSubtitles')\nvar add = require('./lib/add')\n\n/**\n * Export `Subtitle`.\n */\n\nmodule.exports = Subtitle\n\n/**\n * Subtitle constructor.\n * @constructor\n * @param {String} srt\n */\n\nfunction Subtitle (srt) {\n  if (!(this instanceof Subtitle)) return new Subtitle(srt)\n\n  this._subtitles = []\n\n  if (srt) {\n    this.parse(srt)\n  }\n}\n\n/**\n * Alias for `Subtitle.prototype`.\n */\n\nvar fn = Subtitle.prototype\n\n/**\n * Parse the given SRT.\n *\n * @method\n * @param {String} srt\n */\n\nfn.parse = function _parse (srt) {\n  this._subtitles = parse(srt)\n}\n\n/**\n * Add a caption.\n * You have to pass an object with the following data:\n * start - The start timestamp\n * end - The end timestamp\n * text - The caption text\n *\n * The timestamps support two patterns:\n * The SRT pattern: '00:00:24,400'\n * Or a positive integer representing milliseconds\n *\n * @public\n * @param {Object} Caption data\n */\n\nfn.add = function _add (caption) {\n  add(this._subtitles, caption)\n  return this\n}\n\n/**\n * Return the subtitles.\n *\n * @param {Object} Options\n * @returns {Array} Subtitles\n */\n\nfn.getSubtitles = function _getSubtitles (options) {\n  return getSubtitles(this._subtitles, options)\n}\n\n/**\n * Stringify the SRT.\n *\n * @returns {String} srt\n */\n\nfn.stringify = function _stringify () {\n  return stringify(this._subtitles)\n}\n\n/**\n * Resync the captions.\n *\n * @param {Integer} Time in milleseconds\n */\n\nfn.resync = function _resync (time) {\n  this._subtitles = resync(this._subtitles, time)\n  return this\n}\n\n/**\n * Convert the SRT time format to milliseconds\n *\n * @static\n * @param {String} SRT time format\n */\n\nSubtitle.toMS = toMS\n\n/**\n * Convert milliseconds to SRT time format\n *\n * @static\n * @param {Integer} Milleseconds\n */\n\nSubtitle.toSrtTime = toSrtTime\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/subtitle/subtitle.js\n// module id = d5971171c2b26114cfc1\n// module chunks = app/js/media-manage/index"],"sourceRoot":""}