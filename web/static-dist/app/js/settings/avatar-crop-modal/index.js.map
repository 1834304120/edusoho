{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/settings/avatar-crop-modal/index.js","webpack:///./node_modules/es-jcrop/css/Jcrop.min.css?2518","webpack:///./node_modules/es-jcrop/css/Jcrop.min.css"],"names":["CoverCrop","props","element","avatarCrop","saveBtn","init","imageCrop","initEvent","$","on","event","stopPropagation","$this","currentTarget","crop","imgs","large","medium","small","button","EsImageCrop","cropedWidth","cropedHeight","afterCrop","response","$saveBtn","url","data","post","images","status","val","avatar","attr","blur","modal","Translator","trans"],"mappings":"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","file":"app/js/settings/avatar-crop-modal/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import EsImageCrop from 'common/es-image-crop';\nimport notify from 'common/notify';\n\nclass CoverCrop {\n  constructor(props) {\n    this.element = props.element;\n    this.avatarCrop = props.avatarCrop;\n    this.saveBtn = props.saveBtn;\n    this.init();\n  }\n\n  init() {\n    let imageCrop = this.imageCrop();\n    this.initEvent(imageCrop);\n  }\n\n  initEvent(imageCrop) {\n    $(this.saveBtn).on('click', (event) => {\n      event.stopPropagation();\n      const $this = $(event.currentTarget);\n\n      imageCrop.crop({\n        imgs: {\n          large: [200, 200],\n          medium: [120, 120],\n          small: [48, 48]\n        }\n      });\n\n      $this.button('loading');\n    });\n  }\n\n  imageCrop() {\n    let imageCrop = new EsImageCrop({\n      element: this.avatarCrop,\n      cropedWidth: 200,\n      cropedHeight: 200\n    });\n\n    imageCrop.afterCrop = (response) => {\n      let $saveBtn = $(this.saveBtn);\n      \n      let url = $saveBtn.data('url');\n      \n      $.post(url, { images: response }, (response) => {\n        if (response.status === 'success') {\n          $('#profile_avatar').val(response.avatar);\n          $('#user-profile-form img').attr('src', response.avatar);\n          $('#profile_avatar').blur();\n          $('#modal').modal('hide');\n          \n          notify('success',Translator.trans('site.upload_success_hint'));\n        } else {\n          notify('danger',Translator.trans('upload_fail_retry_hint'));\n          $saveBtn.button('reset');\n        }\n      });\n    };\n    return imageCrop;\n  }\n\n}\n\nnew CoverCrop({\n  element: '#avatar-crop-form',\n  avatarCrop: '#avatar-crop',\n  saveBtn: '#upload-avatar-btn',\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/avatar-crop-modal/index.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../css-loader/index.js!./Jcrop.min.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"insertAt\":\"top\",\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../css-loader/index.js!./Jcrop.min.css\", function() {\n\t\t\tvar newContent = require(\"!!../../css-loader/index.js!./Jcrop.min.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader?insertAt=top!./node_modules/css-loader!./node_modules/es-jcrop/css/Jcrop.min.css\n// module id = c962afacd3de715604c1\n// module chunks = app/js/classroom-manage/set-picture-crop/index app/js/courseset-manage/cover-crop/index app/js/group/background-crop/index app/js/group/logo-crop/index app/js/open-course-manage/picture-crop/index app/js/settings/avatar-crop-modal/index app/js/settings/avatar-crop/index app/js/settings/profile-avatar-crop-modal/index","exports = module.exports = require(\"../../css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"/*! Jcrop.min.css v2.0.4 - build: 20151117\\n *  Copyright 2008-2015 Tapmodo Interactive LLC\\n *  Free software under MIT License\\n **/\\n\\n.jcrop-active{direction:ltr;text-align:left;box-sizing:border-box;-ms-touch-action:none}.jcrop-dragging{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.jcrop-selection{z-index:2}.jcrop-selection.jcrop-current{z-index:4}.jcrop-border{background:#fff url(\" + require(\"./Jcrop.gif\") + \");line-height:1px!important;font-size:0!important;overflow:hidden;position:absolute;filter:alpha(opacity=50)!important;opacity:.5!important}.jcrop-border.ord-w,.jcrop-border.ord-e,.jcrop-border.ord-n{top:0}.jcrop-border.ord-n,.jcrop-border.ord-s{width:100%;height:1px!important}.jcrop-border.ord-w,.jcrop-border.ord-e{height:100%;width:1px!important}.jcrop-border.ord-e{right:-1px}.jcrop-border.ord-n{top:-1px}.jcrop-border.ord-w{left:-1px}.jcrop-border.ord-s{bottom:-1px}.jcrop-selection{position:absolute}.jcrop-box{z-index:2;display:block;background:0 0;border:0;padding:0;margin:0;font-size:0}.jcrop-box:hover{background:0 0}.jcrop-box:active{background:0 0}.jcrop-box:focus{outline:1px rgba(128,128,128,.65) dotted}.jcrop-active,.jcrop-box{position:relative}.jcrop-box{width:100%;height:100%;cursor:move}.jcrop-handle{z-index:4;background-color:rgba(49,28,28,.58);border:1px #eee solid;width:9px;height:9px;font-size:0;position:absolute;filter:alpha(opacity=80)!important;opacity:.8!important}.jcrop-handle.ord-n{left:50%;margin-left:-5px;margin-top:-5px;top:0;cursor:n-resize}.jcrop-handle.ord-s{bottom:0;left:50%;margin-bottom:-5px;margin-left:-5px;cursor:s-resize}.jcrop-handle.ord-e{margin-right:-5px;margin-top:-5px;right:0;top:50%;cursor:e-resize}.jcrop-handle.ord-w{left:0;margin-left:-5px;margin-top:-5px;top:50%;cursor:w-resize}.jcrop-handle.ord-nw{left:0;margin-left:-5px;margin-top:-5px;top:0;cursor:nw-resize}.jcrop-handle.ord-ne{margin-right:-5px;margin-top:-5px;right:0;top:0;cursor:ne-resize}.jcrop-handle.ord-se{bottom:0;margin-bottom:-5px;margin-right:-5px;right:0;cursor:se-resize}.jcrop-handle.ord-sw{bottom:0;left:0;margin-bottom:-5px;margin-left:-5px;cursor:sw-resize}.jcrop-touch .jcrop-handle{z-index:4;background-color:rgba(49,28,28,.58);border:1px #eee solid;width:18px;height:18px;font-size:0;position:absolute;filter:alpha(opacity=80)!important;opacity:.8!important}.jcrop-touch .jcrop-handle.ord-n{left:50%;margin-left:-10px;margin-top:-10px;top:0;cursor:n-resize}.jcrop-touch .jcrop-handle.ord-s{bottom:0;left:50%;margin-bottom:-10px;margin-left:-10px;cursor:s-resize}.jcrop-touch .jcrop-handle.ord-e{margin-right:-10px;margin-top:-10px;right:0;top:50%;cursor:e-resize}.jcrop-touch .jcrop-handle.ord-w{left:0;margin-left:-10px;margin-top:-10px;top:50%;cursor:w-resize}.jcrop-touch .jcrop-handle.ord-nw{left:0;margin-left:-10px;margin-top:-10px;top:0;cursor:nw-resize}.jcrop-touch .jcrop-handle.ord-ne{margin-right:-10px;margin-top:-10px;right:0;top:0;cursor:ne-resize}.jcrop-touch .jcrop-handle.ord-se{bottom:0;margin-bottom:-10px;margin-right:-10px;right:0;cursor:se-resize}.jcrop-touch .jcrop-handle.ord-sw{bottom:0;left:0;margin-bottom:-10px;margin-left:-10px;cursor:sw-resize}.jcrop-dragbar{font-size:0;position:absolute}.jcrop-dragbar.ord-n,.jcrop-dragbar.ord-s{height:9px!important;width:100%}.jcrop-dragbar.ord-e,.jcrop-dragbar.ord-w{top:0;height:100%;width:9px!important}.jcrop-dragbar.ord-n{margin-top:-5px;cursor:n-resize;top:0}.jcrop-dragbar.ord-s{bottom:0;margin-bottom:-5px;cursor:s-resize}.jcrop-dragbar.ord-e{margin-right:-5px;right:0;cursor:e-resize}.jcrop-dragbar.ord-w{margin-left:-5px;cursor:w-resize}.jcrop-shades{position:relative;top:0;left:0}.jcrop-shades div{cursor:crosshair}.jcrop-noresize .jcrop-dragbar,.jcrop-noresize .jcrop-handle{display:none}.jcrop-selection.jcrop-nodrag .jcrop-box,.jcrop-nodrag .jcrop-shades div{cursor:default}.jcrop-light .jcrop-border{background:#fff;filter:alpha(opacity=70)!important;opacity:.7!important}.jcrop-light .jcrop-handle{background-color:#000;border-color:#fff}.jcrop-dark .jcrop-border{background:#000;filter:alpha(opacity=70)!important;opacity:.7!important}.jcrop-dark .jcrop-handle{background-color:#fff;border-color:#000}.solid-line .jcrop-border{background:#fff}.jcrop-thumb{position:absolute;overflow:hidden;z-index:5}.jcrop-active img,.jcrop-thumb img,.jcrop-thumb canvas{min-width:none;min-height:none;max-width:none;max-height:none}.jcrop-hl-active .jcrop-border{filter:alpha(opacity=20)!important;opacity:.2!important}.jcrop-hl-active .jcrop-handle{filter:alpha(opacity=10)!important;opacity:.1!important}.jcrop-hl-active .jcrop-selection:hover{}.jcrop-hl-active .jcrop-selection:hover .jcrop-border{background-color:#ccc;filter:alpha(opacity=50)!important;opacity:.5!important}.jcrop-hl-active .jcrop-selection.jcrop-current .jcrop-border{background:gray url(\" + require(\"./Jcrop.gif\") + \");opacity:.35!important;filter:alpha(opacity=35)!important}.jcrop-hl-active .jcrop-selection.jcrop-current .jcrop-handle{filter:alpha(opacity=30)!important;opacity:.3!important}.jcrop-hl-active .jcrop-selection.jcrop-focus .jcrop-border{background:url(\" + require(\"./Jcrop.gif\") + \");opacity:.65!important;filter:alpha(opacity=65)!important}.jcrop-hl-active .jcrop-selection.jcrop-focus .jcrop-handle{filter:alpha(opacity=60)!important;opacity:.6!important}button.jcrop-box{background:0 0}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/es-jcrop/css/Jcrop.min.css\n// module id = c962afacd3de715604c6\n// module chunks = app/js/classroom-manage/set-picture-crop/index app/js/courseset-manage/cover-crop/index app/js/group/background-crop/index app/js/group/logo-crop/index app/js/open-course-manage/picture-crop/index app/js/settings/avatar-crop-modal/index app/js/settings/avatar-crop/index app/js/settings/profile-avatar-crop-modal/index"],"sourceRoot":""}