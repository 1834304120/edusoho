{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/live-course/classroom/index.js"],"names":["intervalId","tryCount","getRoomUrl","clearInterval","html","Translator","trans","$","ajax","url","data","success","error","param","setInterval"],"mappings":";;;;;;;;AAAA,IAAIA,aAAa,CAAjB;AACA,IAAIC,WAAW,CAAf;;AAEA,SAASC,UAAT,GAAsB;AACpB,MAAID,WAAW,EAAf,EAAmB;AACjBE,kBAAcH,UAAd;;AAEA,QAAII,OAAOC,WAAWC,KAAX,CAAiB,sCAAjB,CAAX;;AAEAC,MAAE,gBAAF,EAAoBH,IAApB,CAAyBA,IAAzB;AACA;AACD;AACDG,IAAEC,IAAF,CAAO;AACLC,SAAKF,EAAE,gBAAF,EAAoBG,IAApB,CAAyB,KAAzB,CADA;AAELC,aAAS,iBAASD,IAAT,EAAe;AACtB,UAAIA,KAAKE,KAAT,EAAgB;AACdT,sBAAcH,UAAd;;AAEA,YAAII,QAAOM,KAAKE,KAAL,GAAWP,WAAWC,KAAX,CAAiB,GAAjB,CAAX,GAAiCD,WAAWC,KAAX,CAAiB,oCAAjB,CAA5C;;AAEAC,UAAE,gBAAF,EAAoBH,IAApB,CAAyBA,KAAzB;AACA;AACD;;AAED,UAAIM,KAAKD,GAAT,EAAc;AACZ,YAAIA,MAAMC,KAAKD,GAAf;AACA,YAAIC,KAAKG,KAAT,EAAgB;AACdJ,gBAAMA,MAAI,SAAJ,GAAcC,KAAKG,KAAzB;AACD;AACD,YAAIT,SAAO,mCAAiCK,GAAjC,GAAqC,2GAAhD;;AAEAF,UAAE,MAAF,EAAUH,IAAV,CAAeA,MAAf;;AAEAD,sBAAcH,UAAd;AACD;;AAEDC;AACD,KAzBI;AA0BLW,WAAO,iBAAW;AAChB;AACA;AACD;AA7BI,GAAP;AA+BD;;AAEDV;;AAEAF,aAAac,YAAYZ,UAAZ,EAAwB,IAAxB,CAAb,C","file":"app/js/live-course/classroom/index.js","sourcesContent":["let intervalId = 0;\nlet tryCount = 1;\n\nfunction getRoomUrl() {\n  if (tryCount > 10) {\n    clearInterval(intervalId);\n\n    let html = Translator.trans('classroom.live_room.entry_error_hint');\n    \n    $('#classroom-url').html(html);\n    return;\n  }\n  $.ajax({\n    url: $('#classroom-url').data('url'),\n    success: function(data) {\n      if (data.error) {\n        clearInterval(intervalId);\n\n        let html = data.error+Translator.trans('，')+Translator.trans('classroom.live_room.retry_or_close');\n        \n        $('#classroom-url').html(html);\n        return;\n      }\n\n      if (data.url) {\n        let url = data.url;\n        if (data.param) {\n          url = url+'?param='+data.param;\n        }\n        let html = '<iframe name=\"classroom\" src=\"'+url+'\" style=\"position:absolute; left:0; top:0; height:100%; width:100%; border:0px;\" scrolling=\"no\"></iframe>';\n\n        $('body').html(html);\n\n        clearInterval(intervalId);\n      }\n\n      tryCount ++;\n    },\n    error: function() {\n      //var html = \"进入直播教室错误，请联系管理员，<a href='javascript:document.location.reload()'>重试</a>或<a href='javascript:window.close();'>关闭</a>\"\n      //$(\"#classroom-url\").html(html);\n    }\n  });\n}\n\ngetRoomUrl();\n\nintervalId = setInterval(getRoomUrl, 3000);\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/live-course/classroom/index.js"],"sourceRoot":""}