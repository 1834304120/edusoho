{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/classroom-manage/classroom-create.js","webpack:///./app/Resources/static-src/app/js/classroom-manage/set-info/index.js"],"names":["classroomCreate","$","val","data","attr","click","removeAttr","select2","ajax","url","app","arguments","tagMatchUrl","dataType","quietMillis","term","page","q","page_limit","results","each","index","item","push","id","name","initSelection","element","callback","split","formatSelection","formatResult","width","multiple","maximumSelectionSize","placeholder","Translator","trans","createSearchChoice","initEditor","validator","initValidator","toggleExpiryValue","change","classroomStatus","expiryValue","match","addClass","removeClass","$esBlock","text","CKEDITOR","replace","allowedContent","toolbar","fileSingleSizeLimit","filebrowserImageUploadUrl","filebrowserFlashUploadUrl","treeview","dropdownAutoWidth","treeviewInitState","placeholderOption","validate","rules","title","required","expiryMode","$expriySetting","elementRemoveRules","find","remove","datetimepicker","elementAddRules","getExpiryModeDaysRules","undefined","language","document","documentElement","lang","autoclose","format","minView","endDate","Date","now","on","form","getExpiryModeDateRules","digits","min","max","messages","date","after_now_date","$element","options"],"mappings":"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","file":"app/js/classroom-manage/set-info/index.js","sourcesContent":["const classroomCreate = ()=>{\n  if($('#create-classroom').val() != ''){\n    if($('#showable-open').data('showable')==1){\n      $('#showable-open').attr('checked','checked');\n      if($('#buyable-open').data('buyable')==1){\n        $('#buyable-open').attr('checked','checked');\n      }else{\n        $('#buyable-close').attr('checked','checked');\n      }\n    }\n    else{\n      $('#showable-close').attr('checked','checked');\n      if($('#buyable-open').data('buyable')==1){\n        $('#buyable-open').attr('checked','checked');\n      }\n      else{\n        $('#buyable-close').attr('checked','checked');\n      }\n      $('#buyable').attr('hidden','hidden');\n    }\n  }\n  $('#showable-close').click(function(){\n    $('#buyable').attr('hidden','hidden');\n  });\n  $('#showable-open').click(function(){\n    $('#buyable').removeAttr('hidden');\n  });\n  $('#classroom_tags').select2({\n\n    ajax: {\n      url: app.arguments.tagMatchUrl + '#',\n      dataType: 'json',\n      quietMillis: 100,\n      data: function (term, page) {\n        return {\n          q: term,\n          page_limit: 10\n        };\n      },\n      results: function (data) {\n        var results = [];\n        $.each(data, function (index, item) {\n\n          results.push({\n            id: item.name,\n            name: item.name\n          });\n        });\n\n        return {\n          results: results\n        };\n\n      }\n    },\n    initSelection: function (element, callback) {\n      var data = [];\n      $(element.val().split(',')).each(function () {\n        data.push({\n          id: this,\n          name: this\n        });\n      });\n      callback(data);\n    },\n    formatSelection: function (item) {\n      return item.name;\n    },\n    formatResult: function (item) {\n      return item.name;\n    },\n    width: 'off',\n    multiple: true,\n    maximumSelectionSize: 20,\n    placeholder: Translator.trans('classroom.manage.tag_required_hint'),\n    createSearchChoice: function () {\n      return null;\n    }\n  });\n};\nexport default classroomCreate();\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/classroom-manage/classroom-create.js","import 'app/js/classroom-manage/classroom-create';\n\ninitEditor();\nconst validator = initValidator();\ntoggleExpiryValue($('[name=expiryMode]:checked').val());\n\n$('[name=\\'expiryMode\\']').change(function () {\n  if (app.arguments.classroomStatus === 'published') {\n    return false;\n  }\n  var expiryValue = $('[name=\\'expiryValue\\']').val();\n  if (expiryValue) {\n    if (expiryValue.match('-')) {\n      $('[name=\\'expiryValue\\']').data('date', $('[name=\\'expiryValue\\']').val());\n    } else {\n      $('[name=\\'expiryValue\\']').data('days', $('[name=\\'expiryValue\\']').val());\n    }\n    $('[name=\\'expiryValue\\']').val('');\n  }\n\n  if ($(this).val() == 'forever') {\n    $('.expiry-value-js').addClass('hidden');\n  } else {\n    $('.expiry-value-js').removeClass('hidden');\n    var $esBlock = $('.expiry-value-js > .controls > .help-block');\n    $esBlock.text($esBlock.data($(this).val()));\n  }\n  toggleExpiryValue($(this).val());\n});\n\nfunction initEditor() {\n  CKEDITOR.replace('about', {\n    allowedContent: true,\n    toolbar: 'Detail',\n    fileSingleSizeLimit: app.fileSingleSizeLimit,\n    filebrowserImageUploadUrl: $('#about').data('imageUploadUrl'),\n    filebrowserFlashUploadUrl: $('#about').data('flashUploadUrl')\n  });\n\n  $('[name=\"categoryId\"]').select2({\n    treeview: true,\n    dropdownAutoWidth: true,\n    treeviewInitState: 'collapsed',\n    placeholderOption: 'first'\n  });\n}\n\nfunction initValidator() {\n  return $('#classroom-set-form').validate({\n    rules: {\n      title: {\n        required: true,\n      }\n    },\n  });\n}\n\nfunction toggleExpiryValue(expiryMode) {\n  const $expriySetting = $('.expiry-value-js');\n  if (!$('[name=\\'expiryValue\\']').val()) {\n    $('[name=\\'expiryValue\\']').val($('[name=\\'expiryValue\\']').data(expiryMode));\n  }\n  elementRemoveRules($('[name=\\'expiryValue\\']'));\n  $expriySetting.removeClass('has-error').find('.jq-validate-error').remove();\n  $expriySetting.find('input').removeClass('form-control-error');\n  switch (expiryMode) {\n  case 'days':\n    $('[name=\"expiryValue\"]').datetimepicker('remove');\n    $('.expiry-value-js .controls > span').removeClass('hidden');\n    elementAddRules($('[name=\"expiryValue\"]'),getExpiryModeDaysRules());\n    break;\n  case 'date':\n    if($('#classroom_expiryValue').attr('readonly') !== undefined){\n      return false;\n    }\n    $('.expiry-value-js .controls > span').addClass('hidden');\n    $('#classroom_expiryValue').datetimepicker({\n      language: document.documentElement.lang,\n      autoclose: true,\n      format: 'yyyy-mm-dd',\n      minView: 'month',\n      endDate: new Date(Date.now() + 86400 * 365 * 10 * 1000)\n    }).on('hide', () => {\n      validator.form();\n    });\n    $('#classroom_expiryValue').datetimepicker('setStartDate', new Date);\n    elementAddRules($('[name=\"expiryValue\"]'),getExpiryModeDateRules());\n    break;\n  default:\n    break;\n  }\n}\n\nfunction getExpiryModeDaysRules() {\n  return {\n    required: true,\n    digits:true,\n    min: 1,\n    max: 10000,\n    messages: {\n      required: Translator.trans('classroom.manage.expiry_mode_days_error_hint'),\n    }\n  };\n}\n\nfunction getExpiryModeDateRules() {\n  return {\n    required: true,\n    date: true,\n    after_now_date: true,\n    messages: {\n      required: Translator.trans('classroom.manage.expiry_mode_date_error_hint'),\n    }\n  };\n}\n\nfunction elementAddRules($element, options) {\n  $element.rules('add', options);\n}\n\nfunction elementRemoveRules($element) {\n  $element.rules('remove');\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/classroom-manage/set-info/index.js"],"sourceRoot":""}