{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/user/userinfo-fields-common-no-ajax.js","webpack:///./app/Resources/static-src/app/js/user/fill-info/index.js","webpack:///./app/Resources/static-src/app/js/user/userinfo-fields-common.js"],"names":["UserInfoFieldsItemValidate","options","validator","$element","validate","currentDom","rules","email","required","remote","url","$","data","type","val","mobile","phone","truename","chinese_alphanumeric","minlength","maxlength","qq","idcard","idcardNumber","gender","company","job","weibo","weixin","messages","Translator","trans","getCustomFields","ParentUserInfo","element","setup","createValidator","initComponents","smsCodeValidate","initEvent","on","event","changeCaptcha","sendSms","each","datetimepicker","autoclose","format","minView","language","document","documentElement","lang","submitHandler","form","valid","post","attr","serialize","resp","location","href","modal","length","alphanumeric","es_remote","callback","bool","removeClass","addClass","find","Math","random","unsigned_integer","SmsSender","smsType","dataTo","captchaNum","captcha","captchaValidated","preSmsSend","couldSender","i","positive_integer","float","date","e","$code","currentTarget"],"mappings":"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","file":"app/js/user/fill-info/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import ParentUserInfo from './userinfo-fields-common';\n\nexport default class UserInfoFieldsItemValidate extends ParentUserInfo {\n  constructor(options) {\n    super(options);\n  }\n\n  createValidator() {\n    this.validator = this.$element.validate({\n      currentDom: '#form-submit-btn',\n      rules: {\n        email: {\n          required: true,\n          email: true,\n          remote: {\n            url: $('#email').data('url'),\n            type: 'get',\n            data: {\n              'value': function () {\n                return $('#email').val();\n              }\n            }\n          }\n        },\n        mobile: {\n          required: true,\n          phone: true,\n          remote: {\n            url: $('#mobile').data('url'),\n            type: 'get',\n            data: {\n              'value': function () {\n                return $('#mobile').val();\n              }\n            }\n          }\n        },\n        truename: {\n          required: true,\n          chinese_alphanumeric: true,\n          minlength: 2,\n          maxlength: 36,\n        },\n        qq: {\n          required: true,\n          qq: true,\n        },\n        idcard: {\n          required: true,\n          idcardNumber: true,\n        },\n        gender: {\n          required: true,\n        },\n        company: {\n          required: true,\n        },\n        job: {\n          required: true,\n        },\n        weibo: {\n          required: true,\n          url: true,\n        },\n        weixin: {\n          required: true,\n        }\n      },\n      messages: {\n        gender: {\n          required: Translator.trans('site.choose_gender_hint'),\n        },\n        mobile: {\n          phone: Translator.trans('validate.phone.message'),\n        }\n      }\n    });\n    this.getCustomFields();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/user/userinfo-fields-common-no-ajax.js","import UserInfoFieldsItemValidate from '../userinfo-fields-common-no-ajax';\n\nnew UserInfoFieldsItemValidate({\n  element: '#fill-userinfo-form'\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/user/fill-info/index.js","import SmsSender from 'app/common/widget/sms-sender';\nimport notify from 'common/notify';\n\nexport default class UserInfoFieldsItemValidate {\n  constructor(options) {\n    this.validator = null;\n    this.$element = $(options.element);\n    this.setup();\n  }\n\n  setup() {\n    this.createValidator();\n    this.initComponents();\n    this.smsCodeValidate();\n    this.initEvent();\n  }\n\n  initEvent()\n  {\n    this.$element.on('click', '#getcode_num', (event) => this.changeCaptcha(event));\n    this.$element.on('click', '.js-sms-send', (event) => this.sendSms(event));\n  }\n\n  initComponents() {\n    $('.date').each(function () {\n      $(this).datetimepicker({\n        autoclose: true,\n        format: 'yyyy-mm-dd',\n        minView: 2,\n        language: document.documentElement.lang\n      });\n    });\n  }\n\n  createValidator() {\n    this.validator = this.$element.validate({\n      currentDom: '#form-submit-btn',\n      rules: {\n        email: {\n          required: true,\n          email: true,\n          remote: {\n            url: $('#email').data('url'),\n            type: 'get',\n            data: {\n              'value': function () {\n                return $('#email').val();\n              }\n            }\n          }\n        },\n        mobile: {\n          required: true,\n          phone: true,\n          remote: {\n            url: $('#mobile').data('url'),\n            type: 'get',\n            data: {\n              'value': function () {\n                return $('#mobile').val();\n              }\n            }\n          }\n        },\n        truename: {\n          required: true,\n          chinese_alphanumeric: true,\n          minlength: 2,\n          maxlength: 36,\n        },\n        qq: {\n          required: true,\n          qq: true,\n        },\n        idcard: {\n          required: true,\n          idcardNumber: true,\n        },\n        gender: {\n          required: true,\n        },\n        company: {\n          required: true,\n        },\n        job: {\n          required: true,\n        },\n        weibo: {\n          required: true,\n          url: true,\n        },\n        weixin: {\n          required: true,\n        }\n      },\n      messages: {\n        gender: {\n          required: Translator.trans('site.choose_gender_hint'),\n        },\n        mobile: {\n          phone: Translator.trans('validate.phone.message'),\n        }\n      },\n      submitHandler: form => {\n        if ($(form).valid()) {\n          $.post($(form).attr('action'), $(form).serialize(), resp => {\n            if (resp.url) {\n              location.href = resp.url;\n            } else {\n              notify('success', Translator.trans('site.save_success_hint'));\n              $('#modal').modal('hide');\n            }\n\n          });\n        }\n      }\n    });\n    this.getCustomFields();\n  }\n\n  smsCodeValidate() {\n    if ($('.js-captch-num').length > 0) {\n      \n      //$('.js-captch-num').find('#getcode_num').attr(\"src\", $(\"#getcode_num\").data(\"url\") + \"?\" + Math.random());\n\n      $('input[name=\"captcha_num\"]').rules('add', {\n        required: true,\n        alphanumeric: true,\n        es_remote: {\n          type: 'get',\n          callback: function (bool) {\n            if (bool) {\n              $('.js-sms-send').removeClass('disabled');\n            } else {\n              $('.js-sms-send').addClass('disabled');\n              $('.js-captch-num').find('#getcode_num').attr('src',$('#getcode_num').data('url')+ '?' + Math.random());\n            }\n          }\n        },\n        messages: {\n          required: Translator.trans('site.captcha_code.required'),\n          alphanumeric: Translator.trans('json_response.verification_code_error.message'),\n        }\n      });\n\n      $('input[name=\"sms_code\"]').rules('add', {\n        required: true,\n        unsigned_integer: true,\n        es_remote: {\n          type: 'get',\n        },\n        messages: {\n          required: Translator.trans('validate.sms_code_input.message'),\n        }\n      });\n    }\n  }\n\n  sendSms() {\n\n    new SmsSender({\n      element: '.js-sms-send',\n      url: $('.js-sms-send').data('smsUrl'),\n      smsType: 'sms_bind',\n      dataTo: 'mobile',\n      captchaNum: 'captcha_num',\n      captcha: true,\n      captchaValidated: $('input[name=\"captcha_num\"]').valid(),\n      preSmsSend: function () {\n        let couldSender = true;\n        return couldSender;\n      }\n    });\n  }\n\n  getCustomFields() {\n    for (var i = 1; i <= 5; i++) {\n      $(`[name=\"intField${i}\"]`).rules('add', {\n        required: true,\n        positive_integer: true,\n      });\n      $(`[name=\"floatField${i}\"]`).rules('add', {\n        required: true,\n        float: true,\n      });\n      $(`[name=\"dateField${i}\"]`).rules('add', {\n        required: true,\n        date: true,\n      });\n    }\n    for (i = 1; i <= 10; i++) {\n      $(`[name=\"varcharField${i}\"]`).rules('add', {\n        required: true,\n      });\n      $(`[name=\"textField${i}\"]`).rules('add', {\n        required: true,\n      });\n    }\n  }\n\n  changeCaptcha(e) {\n    var $code = $(e.currentTarget);\n    $code.attr('src', $code.data('url') + '?' + Math.random());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/user/userinfo-fields-common.js"],"sourceRoot":""}