{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/settings/security-questions/index.js","webpack:///./app/Resources/static-src/app/js/settings/security-questions/security-questions.js"],"names":["SecurityQuestion","element","saveBtn","props","$q1","$","$q2","$q3","selectOptions","init","validator","initEvent","$node","_this","changeOptions","cd","select","el","on","value","text","includes","Translator","trans","Error","forEach","item","push","val","btn","validate","currentDom","ajax","rules","required","maxlength","submitSuccess","data","message","modal","window","location","reload","submitError","responseJSON"],"mappings":";;;;;AAAA,wB;;;;;;;;;;ACAA;;;;;;AAEA,IAAIA,2BAAJ,CAAqB;AACnBC,WAAS,mCADU;AAEnBC,WAAS;AAFU,CAArB,E;;;;;;;;;;;;;;;;;;;;;;ACFA;;;;;;IAEMF,gB;AACJ,4BAAYG,KAAZ,EAAmB;AAAA;;AACjB,SAAKF,OAAL,GAAeE,MAAMF,OAArB;AACA,SAAKC,OAAL,GAAeC,MAAMD,OAArB;AACA,SAAKE,GAAL,GAAWC,EAAE,mBAAF,CAAX;AACA,SAAKC,GAAL,GAAWD,EAAE,mBAAF,CAAX;AACA,SAAKE,GAAL,GAAWF,EAAE,mBAAF,CAAX;;AAEA,SAAKG,aAAL,GAAqB,EAArB;;AAEA,SAAKC,IAAL;AACD;;;;2BAEM;AACL,WAAKC,SAAL;AACA,WAAKC,SAAL;AACD;;;gCAEW;AAAA;;AACV,UAAMC,QAAQP,EAAE,KAAKJ,OAAP,CAAd;AACA,UAAMY,QAAQ,IAAd;;AAEA,WAAKC,aAAL;;AAEAC,SAAGC,MAAH,CAAU;AACRC,YAAI;AADI,OAAV,EAEGC,EAFH,CAEM,cAFN,EAEsB,UAACC,KAAD,EAAQC,IAAR,EAAiB;AACrC,YAAI,OAAKZ,aAAL,CAAmBa,QAAnB,CAA4BF,KAA5B,CAAJ,EAAwC;AACtC,gCAAO,QAAP,EAAiBG,WAAWC,KAAX,CAAiB,+DAAjB,CAAjB;AACA,gBAAM,IAAIC,KAAJ,CAAUF,WAAWC,KAAX,CAAiB,+DAAjB,CAAV,CAAN;AACD;AAEF,OARD,EAQGL,EARH,CAQM,QARN,EAQgB,UAACC,KAAD,EAAQC,IAAR,EAAiB;AAC/B,eAAKN,aAAL;AACD,OAVD;AAWD;;;oCAEe;AAAA;;AACd,WAAKN,aAAL,GAAqB,EAArB;AACA,OAAC,KAAKJ,GAAN,EAAW,KAAKE,GAAhB,EAAqB,KAAKC,GAA1B,EAA+BkB,OAA/B,CAAuC,UAACC,IAAD,EAAU;AAC/C,eAAKlB,aAAL,CAAmBmB,IAAnB,CAAwBD,KAAKE,GAAL,EAAxB;AACD,OAFD;AAGD;;;gCAEW;AACV,UAAIC,MAAM,KAAK3B,OAAf;AACAG,QAAE,KAAKJ,OAAP,EAAgB6B,QAAhB,CAAyB;AACvBC,oBAAYF,GADW;AAEvBG,cAAM,IAFiB;AAGvBC,eAAO;AACL,sBAAY;AACVC,sBAAU,IADA;AAEVC,uBAAW;AAFD,WADP;AAKL,sBAAY;AACVD,sBAAU,IADA;AAEVC,uBAAW;AAFD,WALP;AASL,sBAAY;AACVD,sBAAU,IADA;AAEVC,uBAAW;AAFD,WATP;AAaL,+BAAqB;AAbhB,SAHgB;AAkBvBC,qBAlBuB,yBAkBTC,IAlBS,EAkBH;AAClB,gCAAO,SAAP,EAAkBf,WAAWC,KAAX,CAAiBc,KAAKC,OAAtB,CAAlB;;AAEAjC,YAAE,QAAF,EAAYkC,KAAZ,CAAkB,MAAlB;AACAC,iBAAOC,QAAP,CAAgBC,MAAhB;AACD,SAvBsB;AAwBvBC,mBAxBuB,uBAwBXN,IAxBW,EAwBL;AAChB,gCAAO,QAAP,EAAkBf,WAAWC,KAAX,CAAiBc,KAAKO,YAAL,CAAkBN,OAAnC,CAAlB;AACD;AA1BsB,OAAzB;AA4BD;;;;;kBAGYtC,gB","file":"app/js/settings/security-questions/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import SecurityQuestion from './security-questions';\n\nnew SecurityQuestion({\n  element: '#settings-security-questions-form',\n  saveBtn: '#password-save-btn'\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/security-questions/index.js","import notify from 'common/notify';\n\nclass SecurityQuestion {\n  constructor(props) {\n    this.element = props.element;\n    this.saveBtn = props.saveBtn;\n    this.$q1 = $('[name=question-1]');\n    this.$q2 = $('[name=question-2]');\n    this.$q3 = $('[name=question-3]');\n\n    this.selectOptions = [];\n\n    this.init();\n  }\n\n  init() {\n    this.validator();\n    this.initEvent();\n  }\n\n  initEvent() {\n    const $node = $(this.element);\n    const _this = this;\n\n    this.changeOptions();\n\n    cd.select({\n      el: '.js-cd-select',\n    }).on('beforeChange', (value, text) => {\n      if (this.selectOptions.includes(value)) {\n        notify('danger', Translator.trans('user.settings.security.security_questions.type_duplicate_hint'));\n        throw new Error(Translator.trans('user.settings.security.security_questions.type_duplicate_hint'));\n      }\n\n    }).on('change', (value, text) => {\n      this.changeOptions();\n    });\n  }\n\n  changeOptions() {\n    this.selectOptions = [];\n    [this.$q1, this.$q2, this.$q3].forEach((item) => {\n      this.selectOptions.push(item.val());\n    });\n  }\n\n  validator() {\n    let btn = this.saveBtn;\n    $(this.element).validate({\n      currentDom: btn,\n      ajax: true,\n      rules: {\n        'answer-1': {\n          required: true,\n          maxlength: 20\n        },\n        'answer-2': {\n          required: true,\n          maxlength: 20\n        },\n        'answer-3': {\n          required: true,\n          maxlength: 20\n        },\n        'userLoginPassword': 'required'\n      },\n      submitSuccess(data) {\n        notify('success', Translator.trans(data.message));\n        \n        $('.modal').modal('hide');\n        window.location.reload();\n      },\n      submitError(data) {\n        notify('danger',  Translator.trans(data.responseJSON.message));\n      }\n    });\n  }\n}\n\nexport default SecurityQuestion;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/security-questions/security-questions.js"],"sourceRoot":""}