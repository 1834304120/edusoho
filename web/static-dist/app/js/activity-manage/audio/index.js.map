{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/activity-manage/audio/index.js","webpack:///./app/Resources/static-src/app/js/activity-manage/audio/audio.js"],"names":["Audio","$","initStep2Form","autoValidatorLength","initFileChooser","$step2_form","validator","data","validate","groups","nameGroup","rules","title","required","maxlength","trim","course_title","minute","second","messages","Translator","trans","unsigned_integer","second_range","blur","form","parseInt","val","fileChooser","FileChooser","console","log","onSelectFile","placeMediaAttr","file","length","undefined","$minute","$second","$length","source","valid","id","uri","on"],"mappings":"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","file":"app/js/activity-manage/audio/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import Audio from './audio';\n\nnew Audio();\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/audio/index.js","import FileChooser from 'app/js/file-chooser/file-choose';\nimport { chooserUiOpen, chooserUiClose, showChooserType } from 'app/js/activity-manage/widget/chooser-ui.js';\nexport default class Audio {\n  constructor() {\n    showChooserType($('[name=\"ext[mediaId]\"]'));\n    this.initStep2Form();\n    this.autoValidatorLength();\n    this.initFileChooser();\n  }\n\n  initStep2Form() {\n    var $step2_form = $('#step2-form');\n    var validator = $step2_form.data('validator');\n\n    $step2_form.validate({\n      groups: {\n        nameGroup: 'minute second'\n      },\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n          course_title: true,\n        },\n        minute: 'required unsigned_integer unsigned_integer',\n        second: 'required second_range unsigned_integer',\n        'ext[mediaId]': 'required'\n      },\n      messages: {\n        minute: {\n          required: Translator.trans('activity.audio_manage.length_required_error_hint'),\n          unsigned_integer: Translator.trans('activity.audio_manage.length_unsigned_integer_error_hint')\n        },\n        second: {\n          required: Translator.trans('activity.audio_manage.length_required_error_hint'),\n          second_range: Translator.trans('activity.audio_manage.second_range_error_hint'),\n          unsigned_integer: Translator.trans('activity.audio_manage.length_unsigned_integer_error_hint')\n        },\n        'ext[mediaId]': Translator.trans('activity.audio_manage.media_error_hint')\n      }\n    });\n\n  }\n\n  autoValidatorLength() {\n    $('.js-length').blur(function () {\n      let validator = $('#step2-form').data('validator');\n      if (validator && validator.form()) {\n        const minute = parseInt($('#minute').val()) | 0;\n        const second = parseInt($('#second').val()) | 0;\n        $('#length').val(minute * 60 + second);\n      }\n    });\n  }\n\n  initFileChooser() {\n    const fileChooser = new FileChooser();\n    console.log(fileChooser);\n    const onSelectFile = file => {\n      chooserUiClose();\n      let placeMediaAttr = (file) => {\n        if (file.length !== 0 && file.length !== undefined) {\n          let $minute = $('#minute');\n          let $second = $('#second');\n          let $length = $('#length');\n\n          let length = parseInt(file.length);\n          let minute = parseInt(length / 60);\n          let second = length % 60;\n          $minute.val(minute);\n          $second.val(second);\n          $length.val(length);\n          file.minute = minute;\n          file.second = second;\n        }\n        $('[name=\"media\"]').val(JSON.stringify(file));\n      };\n      placeMediaAttr(file);\n\n      $('[name=\"ext[mediaId]\"]').val(file.source);\n      $('#step2-form').valid();\n      if (file.source == 'self') {\n        $('#ext_mediaId').val(file.id);\n        $('#ext_mediaUri').val('');\n      } else {\n        $('#ext_mediaId').val('');\n        $('#ext_mediaUri').val(file.uri);\n      }\n    };\n    fileChooser.on('select', onSelectFile);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/audio/audio.js"],"sourceRoot":""}