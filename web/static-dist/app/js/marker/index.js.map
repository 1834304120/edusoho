{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/marker/manage.js","webpack:///./app/Resources/static-src/app/js/marker/index.js","webpack:///./app/Resources/static-src/app/js/marker/messenger.js","webpack:///./app/Resources/static-src/app/js/marker/video.js","webpack:///./app/Resources/static-src/app/js/marker/drag.js"],"names":["drag","initMarkerArry","mediaLength","messenger","Drag","element","_video_time","addScale","markerJson","$marker","markers_array","url","$","data","param","markerId","id","second","questionId","questionMarkers","seq","post","undefined","attr","push","time","removeClass","find","mergeScale","$merg_emarker","sourceMarkerId","targetMarkerId","merg_id","remove","i","splice","updateScale","console","log","deleteScale","$marker_question","marker_questions_num","addClass","children","length","sortList","updateSeq","$scale","Array","questionIds","Manage","options","$form","formSelect","markerSelect","init","initData","initEvent","count","parseInt","document","body","clientHeight","serialize","response","html","popover","Cookies","get","initIntro","initDrag","set","expires","path","$img","img","createElement","imgheight","window","height","offset","top","src","left","width","css","on","onQuestionPreview","event","onMoreQuestion","onCloseHelp","onFormSubmit","onChangeSelect","onFormAutoSubmit","keyCode","preventDefault","e","validator","validate","form","currentTarget","modal","target","$this","hide","parent","$list","getpage","lastpage","val","append","animate","scrollTop","closest","ajax","type","cache","async","success","markersMeta","videoTime","EsMessenger","name","project","getElementById","videoHtml","playerUrl","Tool","editbox","scalebox","timepartnum","$element","courseId","initSortable","initeditbox","initMarker","lisentresize","initPlayer","itemDraggable","itemRmove","stopEvent","slideScale","hoverScale","previewMouseDown","_self","changeleft","$editbox_list","getleft","currentTime","getSelection","removeAllRanges","selection","empty","pageX","times","gettime","sendToChild","off","_obj","sortable","group","drop","delay","handle","onDrop","$item","container","_super","hasClass","$_scale","num","each","text","$marker_item","extend","isresize","$_editbox","time2Sec","_partnum","_parttime","$new_scale_default","clone","removeAttr","sec2Time","Math","round","before","$scale_blue","$new_scale_blue","$scale_blue_time","$scale_blue_item","j","$new_scale_blue_item","end","Translator","trans","stem","replace","after","newSortList","resize","_width","_totaltime","_left","itemSelector","maskShow","_updateSeq","isContainer","isValidTarget","show","marker_array","$merge_marker","_mover_left","_move_time","$dragingitem","$scale_red","$scale_red_details","$dragingitemcopy","abs","$moveeditem","appendTo","_addScale","$scale_blue_list","stopPropagation","_deleteScale","$moveitem","_oldleft","_mergeScale","_updateScale","$merg_marker"],"mappings":"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","file":"app/js/marker/index.js","sourcesContent":["import './video';\nimport messenger from './messenger';\nimport Drag from './drag';\nimport Cookies from 'js-cookie';\n\nlet drag = (initMarkerArry, mediaLength, messenger) => {\n  let drag = new Drag({\n    element: '#task-dashboard',\n    initMarkerArry: initMarkerArry,\n    _video_time: mediaLength,\n    messenger: messenger,\n    addScale(markerJson, $marker, markers_array) {\n      var url = $('.js-pane-question-content').data('queston-marker-add-url');\n      var param = {\n        markerId: markerJson.id,\n        second: markerJson.second,\n        questionId: markerJson.questionMarkers[0].questionId,\n        seq: markerJson.questionMarkers[0].seq\n      };\n      $.post(url, param, function (data) {\n        if (data.id == undefined) {\n          return;\n        }\n        //新增时间刻度\n        if (markerJson.id == undefined) {\n          $marker.attr('id', data.markerId);\n          markers_array.push({id: data.markerId, time: markerJson.second});\n          //排序\n        }\n        $marker.removeClass('hidden');\n        $marker.find('.item-lesson[question-id=' + markerJson.questionMarkers[0].questionId + ']').attr('id', data.id);\n      });\n      return markerJson;\n    },\n    mergeScale(markerJson, $marker, $merg_emarker, markers_array) {\n      var url = $('.js-pane-question-content').data('marker-merge-url');\n      $.post(url, {\n        sourceMarkerId: markerJson.id,\n        targetMarkerId: markerJson.merg_id\n      }, function (data) {\n        $marker.remove();\n        for (let i in markers_array) {\n          if (markers_array[i].id == markerJson.id) {\n            markers_array.splice(i, 1);\n            break;\n          }\n        }\n      });\n      return markerJson;\n    },\n    updateScale(markerJson, $marker) {\n      var url = $('.js-pane-question-content').data('marker-update-url');\n      var param = {\n        id: markerJson.id,\n        second: markerJson.second\n      };\n      if(markerJson.second){\n        $.post(url, param, function (data) {\n        });\n      }else{\n        console.log('do not need upgrade scale...');\n      }\n      return markerJson;\n    },\n    deleteScale(markerJson, $marker, $marker_question, marker_questions_num, markers_array) {\n      var url = $('.js-pane-question-content').data('queston-marker-delete-url');\n      $.post(url, {\n        questionId: markerJson.questionMarkers[0].id\n      }, function (data) {\n        $marker_question.remove();\n        console.log(markerJson.questionMarkers[0].questionId, 'questionId');\n        $('#subject-lesson-list').find('.item-lesson[question-id=' + markerJson.questionMarkers[0].questionId + ']').removeClass('disdragg').addClass('drag');\n        if ($marker.find('[data-role=\"scale-blue-list\"]').children().length <= 0) {\n          $marker.remove();\n          for (let i in markers_array) {\n            if (markers_array[i].id == $marker.attr('id')) {\n              markers_array.splice(i, 1);\n              break;\n            }\n          }\n        } else {\n          //剩余排序\n          console.log('drag', drag);\n          drag.sortList($marker.find('[data-role=\"scale-blue-list\"]'));\n        }\n      });\n    },\n    updateSeq($scale, markerJson) {\n      if (markerJson == undefined || markerJson.questionMarkers == undefined || markerJson.questionMarkers.length == 0) {\n        return;\n      }\n\n      let url = $('.js-pane-question-content').data('queston-marker-sort-url');\n      let param = new Array();\n\n      for (let i = 0; i < markerJson.questionMarkers.length; i++) {\n        param.push(markerJson.questionMarkers[i].id);\n      }\n\n      $.post(url, {questionIds: param});\n    }\n  });\n\n  return drag;\n};\n\nclass Manage {\n  constructor(options) {\n    this.$form = $(options.formSelect);\n    this.$marker = $(options.markerSelect);\n    this.init();\n  }\n\n  init() {\n    this.initData();\n    this.initEvent();\n  }\n\n  initData() {\n    let count = parseInt((document.body.clientHeight - 350) / 50) > 0 ? parseInt((document.body.clientHeight - 350) / 50) : 1;\n    \n    $.post(this.$form.attr('action'), this.$form.serialize() + '&pageSize=' + count, (response) => {\n      $('#subject-lesson-list').html(response);\n      $('[data-toggle=\"popover\"]').popover();\n      if (!Cookies.get('MARK-MANGE-GUIDE')) {\n        this.initIntro();\n      } else {\n        this.initDrag();\n        $('#step-1').removeClass('introhelp-icon-help');\n      }\n      Cookies.set('MARK-MANGE-GUIDE', 'true', {expires: 360, path: '/'});\n      this.$form.data('pageSize', count);\n    });\n  }\n\n  initIntro() {\n    $('.js-introhelp-overlay').removeClass('hidden');\n    $('.show-introhelp').addClass('show');\n\n    var $img = $('.js-introhelp-img img'),\n      img = document.createElement('img'),\n      imgheight = $(window).height() - $img.offset().top - 80;\n        \n    img.src = $img.attr('src');\n    let left = imgheight * img.width / img.height / 2 + 50;\n    $img.height(imgheight);\n    $('.js-introhelp-img').css('margin-left', '-' + left + 'px');\n  }\n\n  initEvent() {\n    this.$marker.on('click', '.js-question-preview', event => this.onQuestionPreview(event));\n    this.$marker.on('click', '.js-more-questions', event => this.onMoreQuestion(event));\n    this.$marker.on('click', '.js-close-introhelp', event => this.onCloseHelp(event));\n    this.$marker.on('click', '#mark-form-submit', event => this.onFormSubmit(event));\n    this.$marker.on('change', '#mark-form-target', event => this.onChangeSelect(event));\n    this.$marker.on('keydown', '#mark-form-keyword', event => this.onFormAutoSubmit(event));\n  }\n\n  onFormAutoSubmit(event) {\n    if (event.keyCode == 13) {\n      event.preventDefault();\n      this.onFormSubmit(event);\n    }\n  }\n\n  onFormSubmit(e) {\n    let validator = this.$form.validate();\n\n    if (validator.form()) {\n      let count = this.$form.data('pageSize');\n      $.post(this.$form.attr('action'), this.$form.serialize() + '&pageSize=' + count, function (response) {\n        $('#subject-lesson-list').html(response);\n      });\n    }\n  }\n\n  onChangeSelect(e) {\n    this.onFormSubmit(e);\n  }\n\n  onQuestionPreview(e) {\n    $.get($(e.currentTarget).data('url'), function (response) {\n      $('.modal').modal('show');\n      $('.modal').html(response);\n    });\n  }\n\n  onMoreQuestion(e) {\n    let target = $('select[name=target]');\n    let $this = $(e.currentTarget).hide().parent().addClass('loading'),\n      $list = $('#subject-lesson-list').css('max-height', $('#subject-lesson-list').height()),\n      getpage = parseInt($this.data('current-page')) + 1,\n      lastpage = $this.data('last-page');\n\n    $.post($this.data('url') + getpage, {'target': target.val(), 'pageSize': this.$form.data('pageSize')}, function (response) {\n      $this.remove();\n      $list.append(response).animate({scrollTop: 40 * ($list.find('.item-lesson').length + 1)});\n      if (getpage == lastpage) {\n        $('.js-more-questions').parent().remove();\n      }\n    });\n  }\n\n  onCloseHelp(e) {\n    let $this = $(e.currentTarget);\n    $this.closest('.show-introhelp').removeClass('show-introhelp');\n    if ($('.show-introhelp').height() <= 0) {\n      $('.js-introhelp-overlay').addClass('hidden');\n      this.initDrag();\n    }\n  }\n\n  initDrag() {\n    let initMarkerArry = [];\n    let mediaLength = 30;\n\n    $.ajax({\n      type: 'get',\n      url: $('.js-pane-question-content').data('marker-metas-url'),\n      cache: false,\n      async: false,\n      success: function (data) {\n        initMarkerArry = data.markersMeta;\n        mediaLength = data.videoTime;\n      }\n    });\n    drag(initMarkerArry, mediaLength, messenger);\n  }\n}\n\nexport default Manage;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/marker/manage.js","import Manage from './manage';\n\nnew Manage({\n  formSelect: '.js-mark-form',\n  markerSelect: '.js-marker-manage-content'\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/marker/index.js","import EsMessenger from 'app/common/messenger';\n\nlet messenger = new EsMessenger({\n  name: 'parent',\n  project: 'PlayerProject',\n  children: [document.getElementById('viewerIframe')],\n  type: 'parent'\n});\n\nexport default messenger;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/marker/messenger.js","let videoHtml = $('#task-dashboard');\nlet playerUrl = videoHtml.data('media-player');\nlet html = '<iframe src=\\'' + playerUrl + '\\' name=\\'viewerIframe\\' id=\\'viewerIframe\\' width=\\'100%\\'allowfullscreen webkitallowfullscreen height=\\'100%\\' style=\\'border:0px\\'></iframe>';\n$('#task-video-content').html(html);\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/marker/video.js","import * as Tool from 'common/utils';\n\nclass Drag {\n  constructor({\n    element,\n    initMarkerArry = [],\n    _video_time = '18',\n    messenger = {},\n    editbox = '.editbox',\n    scalebox = '.js-scalebox',\n    timepartnum = '6',\n    markers_array = new Array(),\n    \n    addScale,\n    mergeScale,\n    updateScale,\n    deleteScale,\n    updateSeq\n  }) {\n    this.$element = $(element);\n    this.initMarkerArry = initMarkerArry;\n    this.markers_array = markers_array;\n    this._video_time = _video_time;\n    this.messenger = messenger;\n    this.editbox = editbox;\n    this.timepartnum = timepartnum;\n\n    this.courseId = this.$element.data('course-id');\n\n    this.addScale = addScale;\n    this.mergeScale = mergeScale;\n    this.updateScale = updateScale;\n    this.deleteScale = deleteScale;\n    this.updateSeq = updateSeq;\n\n    this.init();\n  }\n\n  init() {\n    this.initSortable();\n    this.initeditbox(false);\n    this.initMarker(this.initMarkerArry);\n    this.lisentresize();\n    this.initPlayer();\n\n    this.initEvent();\n  }\n\n  initEvent() {\n    this.$element.on('mousedown', '.gruop-lesson-list .drag', event => this.itemDraggable(event));\n    this.$element.on('click', '.lesson-list [data-role=\"question-remove\"]', event => this.itemRmove(event));\n    this.$element.on('click', '#subject-lesson-list .item-lesson', event => this.stopEvent(event));\n    this.$element.on('mousedown', '.scale-blue', event => this.slideScale(event));\n    this.$element.on('mouseenter', '.scale-blue', event => this.hoverScale(event));\n    // this.$element.on('mousedown', '.scale-blue .item-lesson', event => this.previewQuestion(event));\n    this.$element.on('mousedown', '.js-question-preview', event => this.previewMouseDown(event));\n  }\n\n  initPlayer() {\n    let messenger = this.messenger;\n    let _self = this;\n    let changeleft = true;\n    let $editbox_list = $('#editbox-lesson-list');\n    messenger.on('timechange', function (data) {\n      if (changeleft) {\n        $('.scale-white').css('left', _self.getleft(data.currentTime));\n      }\n    });\n    $('.scale-white').on('mousedown', function (event) {\n      changeleft = false;\n      $(document).on('mousemove.playertime', function (event) {\n        window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();\n        let left = event.pageX > ($editbox_list.width() + 20) ? ($editbox_list.width() + 20) : event.pageX && event.pageX <= 20 ? 20 : event.pageX;\n        $('.scale-white').css('left', left);\n        let times = _self.gettime(left);\n        messenger.sendToChild({id: 'viewerIframe'}, 'setCurrentTime', {time: times});\n      }).on('mouseup.playertime', function (event) {\n        $(document).off('mousemove.playertime');\n        $(document).off('mousedown.playertime');\n        changeleft = true;\n        // messenger.sendToChild({ id: 'viewerIframe' }, 'setPlayerPlay');\n      });\n    });\n  }\n\n  initSortable() {\n    let _obj = this;\n    $('#subject-lesson-list').sortable({\n      group: 'no-drop',\n      drop: false,\n      delay: 500,\n      handle: '.drag',\n      onDrop($item, container, _super) {\n        if ($item.hasClass('item-lesson')) {\n          _super($item, container);\n          let $_scale = $item.closest('.scale.blue');\n          if ($_scale.find('.lesson-list .item-lesson').length > 0) {\n            _obj.sortList($_scale.find('.lesson-list'));\n            _obj.addScale($_scale, $_scale.find('.time').html(), $_scale.css('left'), $_scale.find('.lesson-list').children().length);\n          }\n        }\n      }\n    });\n    \n    $('#editbox-lesson-list').sortable({\n      group: 'no-drop',\n      drag: false\n    });\n  }\n\n  sortList($list) {\n    let num = 1;\n    $list.find('.item-lesson').each(function () {\n      $(this).find('[data-role=\"sqe-number\"]').text(num);\n      num ++;\n    });\n  }\n\n  addScale($marker, time, seq, markers_array) {\n    let $marker_item = $marker.find('li' + ':last');\n    let markerJson = {\n      'id': $marker.attr('id'),\n      'second': time,\n      'questionMarkers': [{\n        'id': $marker_item.attr('id'),\n        'seq': seq,\n        'questionId': $marker_item.attr('question-id')\n      }]\n    };\n    $.extend(this.addScale(markerJson, $marker, markers_array));\n  }\n\n  initeditbox(isresize) {\n    let _self = this,\n      $_editbox = $(_self.editbox);\n    if (isresize) {\n      $_editbox.find('.scale.scale-default:visible').each(function () {\n        $(this).css('left', _self.getleft(Tool.time2Sec($(this).find('[data-role=\"scale-time\"]').text())));\n      });\n      $_editbox.find('.scale.scale-blue:visible').each(function () {\n        $(this).css('left', _self.getleft(Tool.time2Sec($(this).find('[data-role=\"scale-blue-time\"]').text())));\n      });\n    } else {\n      let _partnum = _self.timepartnum;\n      let _parttime = _self._video_time / _partnum;\n      for (let i = 0; i <= _partnum; i++) {\n        let $new_scale_default = $('[data-role=\"scale-default\"]').clone().css('left', _self.getleft(_parttime * i)).removeClass('hidden').removeAttr('data-role');\n\n        $new_scale_default.find('[data-role=\"scale-time\"]').text(Tool.sec2Time(Math.round(_parttime * i)));\n        $('[data-role=\"scale-default\"]').before($new_scale_default);\n      }\n    }\n  }\n\n  initMarker(initMarkerArry) {\n    if (initMarkerArry.length > 0) {\n      let $scale_blue = $('[data-role=\"scale-blue\"]');\n      for (let i = 0; i < initMarkerArry.length; i++) {\n        let $new_scale_blue = $scale_blue.clone().css('left', this.getleft(initMarkerArry[i].second)).removeAttr('data-role').removeClass('hidden').attr('id', initMarkerArry[i].id);\n        \n        let $scale_blue_time = $new_scale_blue.find('[data-role=\"scale-blue-time\"]').text(Tool.sec2Time(initMarkerArry[i].second));\n        let questionMarkers = initMarkerArry[i].questionMarkers;\n        let $scale_blue_item = $new_scale_blue.find('[data-role=\"scale-blue-item\"]');\n\n        for (let j = 0; j < questionMarkers.length; j++) {\n          let $new_scale_blue_item = $scale_blue_item.clone().removeAttr('data-role').attr({ 'question-id': questionMarkers[j].questionId, 'id': questionMarkers[j].id});\n\n          console.log('new_scale_blue_item',  $new_scale_blue_item);\n\n          $new_scale_blue_item\n            .data('url', `/course/${this.courseId}/question/${questionMarkers[j].questionId}/marker/preview`)\n            .find('[data-role=\"sqe-number\"]').text(j + 1).end()\n            .find('[data-role=\"question-type\"]').text(Translator.trans('course.question.type.single_choice')).end()\n            .find('[data-role=\"question-info\"]').text(questionMarkers[j].stem.replace(/<.*?>/ig, ''));\n          \n          $scale_blue_item.before($new_scale_blue_item);\n        }\n        \n        $scale_blue.after($new_scale_blue);\n        $scale_blue_item.remove();\n        this.markers_array.push({id: initMarkerArry[i].id, time: initMarkerArry[i].second});\n      }\n      this.newSortList($(this.scalebox).find('[data-role=\"scale-blue-list\"]'));\n    }\n  }\n\n  lisentresize() {\n    let _self = this;\n    $(window).resize(function () {\n      _self.initeditbox(true);\n    });\n  }\n\n  getleft(time) {\n    let _width = $('#editbox-lesson-list').width();\n    let _totaltime = parseInt(this._video_time);\n    let _left = time * _width / _totaltime;\n    return _left + 20;\n  }\n\n  newSortList($list) {\n    let _self = this;\n    $list.sortable({\n      delay: 500,\n      itemSelector: '.item-lesson',\n      onDrop: function ($item, container, _super) {\n        _super($item, container);\n        _self.maskShow(false);\n        let $scale_blue = $item.closest('.scale-blue');\n        let markerJson = {\n          'id': '',\n          'questionMarkers': []\n        };\n        markerJson.id = $scale_blue.attr('id');\n        _self.sortList($scale_blue.find('[data-role=\"scale-blue-list\"]'));\n        \n        $scale_blue.find('li').each(function () {\n          let questionMarkers = {\n            'id': $(this).attr('id'),\n            'seq': $(this).find('[data-role=\"sqe-number\"]').html()\n          };\n          markerJson.questionMarkers.push(questionMarkers);\n        });\n        _self._updateSeq($scale_blue, markerJson);\n        $scale_blue.removeClass('moveing');\n      },\n      serialize: function (parent, children, isContainer) {\n        return isContainer ? children : parent.attr('id');\n      },\n      isValidTarget: function ($item, container) {\n        _self.maskShow(true);\n        $item.closest('.scale-blue').addClass('moveing');\n        return true;\n      }\n    });\n  }\n\n  maskShow(show) {\n    (show) ? $('[data-role=\"player-mask\"]').removeClass('hidden') : $('[data-role=\"player-mask\"]').addClass('hidden');\n  }\n\n  gettime(left) {\n    return Math.round((left - 20) * this._video_time / $('#editbox-lesson-list').width());\n  }\n\n  itemDraggable(e) {\n    var _self = this,\n      marker_array = [],\n      $merge_marker = null,\n      _mover_left = null,\n      _move_time = null;\n\n    var $dragingitem = $(e.currentTarget),\n      $editbox_list = $('#editbox-lesson-list'),\n      $scale_red = $('[data-role=\"scale-red\"]'),\n      $scale_red_details = $scale_red.find('[data-role=\"scale-red-details\"]'),\n      $dragingitemcopy = $dragingitem.clone().removeClass('drag').addClass('disdragg');\n\n    $dragingitem.after($dragingitemcopy);\n    _self.maskShow(true);\n\n    //查询现有的时间刻度：数组保存现有的所有时间刻度 markers_array\n    $(document).on('mousemove.dragitem', function (event) {\n      if ($editbox_list.find('.placeholder').length <= 0) {\n        $scale_red.addClass('hidden');\n        $editbox_list.removeClass('highlight');\n        return;\n      }\n      //显示红线\n      $editbox_list.addClass('highlight');\n\n      _mover_left = event.pageX > ($editbox_list.width() + 20) ? ($editbox_list.width() + 20) : event.pageX && event.pageX <= 20 ? 20 : event.pageX;\n      _move_time = _self.gettime(_mover_left);\n      $scale_red_details.text(Tool.sec2Time(_move_time));\n      $scale_red.removeClass('hidden').css('left', _mover_left);\n\n      //markers_array靠近的元素提示合并,\n      if (_self.markers_array.length > 0) {\n        $('.scale-blue').removeClass('highlight');\n        marker_array = [];\n        $merge_marker = null;\n        for (let i in _self.markers_array) {\n          if (Math.abs(_self.markers_array[i].time - _move_time) <= 5) {\n            marker_array = [{\n              id: _self.markers_array[i].id,\n              time: _self.markers_array[i].time\n            }];\n            //靠近的元素刻度线高亮条件ID\n            $merge_marker = $('.scale-blue[id=' + _self.markers_array[i].id + ']').addClass('highlight');\n            return;\n          }\n        }\n      }\n    }).on('mouseup.dragitem', function (event) {\n      $(document).off('mousemove.dragitem');\n      $(document).off('mouseup.dragitem');\n      _self.maskShow(false);\n      $scale_red.addClass('hidden');\n      $editbox_list.removeClass('highlight');\n      //未拖动\n      var $moveeditem = $editbox_list.find('.item-lesson');\n      if ($moveeditem.length <= 0) {\n        $scale_red.addClass('hidden');\n        $editbox_list.removeClass('highlight');\n        $dragingitemcopy.remove();\n        return;\n      }\n      //标记已存在，新增题目\n      if (marker_array.length > 0) {\n        var $list = $merge_marker.find('[data-role=\"scale-blue-list\"]');\n        $moveeditem.appendTo($list).find('[data-role=\"sqe-number\"]').text($list.children().length);\n        _self._addScale($merge_marker, marker_array[0].time, $list.children().length, _self.markers_array);\n        $merge_marker.removeClass('highlight');\n        _self.newSortList($list);\n      } else { //新增标记和题目\n        var $scale_blue = $('[data-role=\"scale-blue\"]'),\n          $new_scale_blue = $scale_blue.clone().css('left', _mover_left).removeAttr('data-role'),\n          $scale_blue_list = $new_scale_blue.find('[data-role=\"scale-blue-list\"]'),\n          $scale_blue_time = $new_scale_blue.find('[data-role=\"scale-blue-time\"]').text(Tool.sec2Time(_move_time));\n        $scale_blue_list.children().remove();\n        $scale_blue_list.append($moveeditem);\n        $scale_blue.after($new_scale_blue);\n        _self._addScale($new_scale_blue, _move_time, 1, _self.markers_array);\n      }\n    });\n  }\n\n  itemRmove(e) {\n    e.stopPropagation();\n    let $this = $(e.currentTarget);\n    let $list = $this.closest('[data-role=\"scale-blue-list\"]'),\n      $marker_question = $this.closest('li'),\n      $marker = $this.closest('.scale-blue');\n    this._deleteScale($marker, $marker_question, $list.children().length, this.markers_array);\n  }\n\n  stopEvent(e) {\n    e.stopPropagation();\n  }\n\n  slideScale(e) {\n    let _self = this,\n      marker_array = [],\n      $merge_marker = null,\n      _mover_left = null,\n      _move_time = null;\n\n    let $moveitem = $(e.currentTarget),\n      $editbox_list = $('#editbox-lesson-list'),\n      _oldleft = $moveitem.css('left');\n    _self.maskShow(true);\n    $('.marker-manage').addClass('slideing');\n    $moveitem.addClass('moveing');\n    $(document).on('mousemove.slide', function (event) {\n      window.getSelection ? window.getSelection().removeAllRanges() : document.selection.empty();\n      _mover_left = event.pageX > ($editbox_list.width() + 20) ? ($editbox_list.width() + 20) : event.pageX && event.pageX <= 20 ? 20 : event.pageX;\n      _move_time = Math.round((_mover_left - 20) * _self._video_time / $editbox_list.width());\n      $moveitem.css('left', _mover_left);\n      $moveitem.find('[data-role=\"scale-blue-time\"]').text(Tool.sec2Time(_move_time));\n\n      if (_self.markers_array.length > 0) {\n        $('.scale-blue').removeClass('highlight');\n        marker_array = [];\n        $merge_marker = null;\n        for (let i in _self.markers_array) {\n          if (Math.abs(_self.markers_array[i].time - _move_time) <= 5 && $moveitem.attr('id') != _self.markers_array[i].id) {\n            marker_array = [{\n              id: _self.markers_array[i].id,\n              time: _self.markers_array[i].time\n            }];\n            //靠近的元素刻度线高亮条件ID\n            $merge_marker = $('.scale-blue[id=' + _self.markers_array[i].id + ']').addClass('highlight');\n            return;\n          }\n        }\n      }\n    }).on('mouseup.slide', function (event) {\n      $(document).off('mousemove.slide');\n      $(document).off('mouseup.slide');\n      _self.maskShow(false);\n      $moveitem.removeClass('moveing');\n      $('.marker-manage').removeClass('slideing');\n      if (marker_array.length > 0) {\n        var $list = $merge_marker.find('[data-role=\"scale-blue-list\"]');\n        $list.append($moveitem.find('[data-role=\"scale-blue-list\"]').children());\n        _self.sortList($list);\n        $merge_marker.removeClass('highlight');\n        _self._mergeScale($moveitem, $merge_marker, _self.markers_array);\n      } else {\n        //新增\n        _self._updateScale($moveitem, _move_time);\n      }\n    });\n  }\n\n  hoverScale(e) {\n    let $this = $(e.currentTarget);\n    if ($this.offset().left - 20 < 110) {\n      $this.find('.scale-details').css('margin-left', '-' + ($this.offset().left - 20) + 'px');\n    } else {\n      $this.find('.scale-details').css('margin-left', '-110px');\n    }\n  }\n\n  // previewQuestion(e) {\n  //   e.stopPropagation();\n  //   let $this = $(e.currentTarget), url = $this.data('url');\n  //   if (url) {\n  //     let imgUrl = app.config.loading_img_path;\n  //     let $target = $($this.data('target'));\n  //     let $loadingImg = \"<img src='\" + imgUrl + \"' class='modal-loading' style='z-index:1041;width:60px;height:60px;position:absolute;top:50%;left:50%;margin-left:-30px;margin-top:-30px;'/>\";\n  //     $target.html($loadingImg);\n  //     $target.load(url);\n  //   }\n  // }\n\n  previewMouseDown(e) {\n    //阻止默认事件，父层的拖动\n    e.stopPropagation();\n  }\n\n  _addScale($marker, time, seq, markers_array) {\n    let $marker_item = $marker.find('li' + ':last');\n    let markerJson = {\n      'id': $marker.attr('id'),\n      'second': time,\n      'questionMarkers': [{\n        'id': $marker_item.attr('id'),\n        'seq': seq,\n        'questionId': $marker_item.attr('question-id')\n      }]\n    };\n    $.extend(this.addScale(markerJson, $marker, markers_array));\n  }\n\n  _mergeScale($marker, $merg_marker, markers_array) {\n    // 合并时后台去处理顺序，被合并数按序号依次增加\n    let markerJson = {\n      'id': $marker.attr('id'),\n      'merg_id': $merg_marker.attr('id')\n    };\n    $.extend(this.mergeScale(markerJson, $marker, $merg_marker, markers_array));\n  }\n\n  _updateScale($marker, time) {\n    let markerJson = {\n      'id': $marker.attr('id'),\n      'second': time,\n    };\n    $.extend(this.updateScale(markerJson, $marker));\n  }\n\n  _deleteScale($marker, $marker_question, marker_questions_num, markers_array) {\n    console.log('id', $marker, $marker.attr('id'));\n    let markerJson = {\n      'id': $marker.attr('id'),\n      'questionMarkers': [{\n        'id': $marker_question.attr('id'),\n        'seq': $marker_question.find('[data-role=\"sqe-number\"]').html(),\n        'questionId': $marker_question.attr('question-id')\n      }]\n    };\n    $.extend(this.deleteScale(markerJson, $marker, $marker_question, marker_questions_num, markers_array));\n  }\n\n  _updateSeq($scale, markerJson) {\n    $.extend(this.updateSeq($scale, markerJson));\n  }\n  \n}\n\nexport default Drag;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/marker/drag.js"],"sourceRoot":""}