{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course/thread-question/index.js","webpack:///./app/Resources/static-src/app/common/duration-storage.js"],"names":["userId","$","data","fileId","videoAskTime","DurationStorage","set","duration","durations","store","get","Array","value","length","slice","indexOf","splice","shift","push","durationTmpArray","i","index","key","parseFloat","split"],"mappings":";;;;;;;;AAAA;;;;;;AAEA,IAAIA,SAASC,EAAE,iBAAF,EAAqBC,IAArB,CAA0B,QAA1B,CAAb;AACA,IAAIC,SAASF,EAAE,iBAAF,EAAqBC,IAArB,CAA0B,QAA1B,CAAb;AACA,IAAIE,eAAeH,EAAE,iBAAF,EAAqBC,IAArB,CAA0B,cAA1B,CAAnB;AACAG,0BAAgBC,GAAhB,CAAoBN,MAApB,EAA4BG,MAA5B,EAAoCC,YAApC,E;;;;;;;;;;;;;;;;;;;;;;ACFA;;;;IAEMC,e;;;;;;;wBAEOL,M,EAAQG,M,EAAQI,Q,EAAU;AACnC,UAAIC,YAAYC,MAAMC,GAAN,CAAU,WAAV,EAAuB,EAAvB,CAAhB;AACA,UAAI,CAACF,SAAD,IAAc,EAAEA,qBAAqBG,KAAvB,CAAlB,EAAiD;AAC/CH,oBAAY,IAAIG,KAAJ,EAAZ;AACD;;AAED,UAAIC,QAAQZ,SAAS,GAAT,GAAeG,MAAf,GAAwB,GAAxB,GAA8BI,QAA1C;AACA,UAAIC,UAAUK,MAAV,GAAmB,CAAnB,IAAwBL,UAAUM,KAAV,CAAgBN,UAAUK,MAAV,GAAmB,CAAnC,EAAsCL,UAAUK,MAAhD,EAAwD,CAAxD,EAA2DE,OAA3D,CAAmEf,SAAS,GAAT,GAAeG,MAAlF,IAA4F,CAAC,CAAzH,EAA4H;AAC1HK,kBAAUQ,MAAV,CAAiBR,UAAUK,MAAV,GAAmB,CAApC,EAAuCL,UAAUK,MAAjD;AACD;AACD,UAAIL,UAAUK,MAAV,IAAoB,EAAxB,EAA4B;AAC1BL,kBAAUS,KAAV;AACD;AACDT,gBAAUU,IAAV,CAAeN,KAAf;AACAH,YAAMH,GAAN,CAAU,WAAV,EAAuBE,SAAvB;AACD;;;wBAEUR,M,EAAQG,M,EAAQ;AACzB,UAAIgB,mBAAmBV,MAAMC,GAAN,CAAU,WAAV,EAAuB,EAAvB,CAAvB;AACA,UAAIS,gBAAJ,EAAsB;AACpB,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,iBAAiBN,MAArC,EAA6CO,GAA7C,EAAkD;AAChD,cAAIC,QAAQF,iBAAiBC,CAAjB,EAAoBL,OAApB,CAA4Bf,SAAS,GAAT,GAAeG,MAA3C,CAAZ;AACA,cAAIkB,QAAQ,CAAC,CAAb,EAAgB;AACd,gBAAIC,MAAMH,iBAAiBC,CAAjB,CAAV;AACA,mBAAOG,WAAWD,IAAIE,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAX,CAAP;AACD;AACF;AACF;AACD,aAAO,CAAP;AACD;;;wBAEUxB,M,EAAQG,M,EAAQ;AACzB,UAAImB,MAAMtB,SAAS,GAAT,GAAeG,MAAzB;AACA,UAAIgB,mBAAmBV,MAAMC,GAAN,CAAU,WAAV,CAAvB;AACA,UAAI,CAACS,gBAAL,EAAuB;AACrB;AACD;AACD,WAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,iBAAiBN,MAArC,EAA6CO,GAA7C,EAAkD;AAChD,YAAIC,QAAQF,iBAAiBC,CAAjB,EAAoBL,OAApB,CAA4Bf,SAAS,GAAT,GAAeG,MAA3C,CAAZ;AACA,YAAIkB,QAAQ,CAAC,CAAb,EAAgB;AACdF,2BAAiBH,MAAjB,CAAwBI,CAAxB,EAA2B,CAA3B;AACD;AACF;AACDX,YAAMH,GAAN,CAAU,WAAV,EAAuBa,gBAAvB;AACD;;;KAnDH;;;;;kBAsDed,e","file":"app/js/course/thread-question/index.js","sourcesContent":["import DurationStorage from '../../../common/duration-storage';\n\nlet userId = $('#js-task-iframe').data('userId');\nlet fileId = $('#js-task-iframe').data('fileId');\nlet videoAskTime = $('#js-task-iframe').data('videoAskTime');\nDurationStorage.set(userId, fileId, videoAskTime);\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course/thread-question/index.js","/**\n         * Created by Simon on 2016/11/18.\n         */\nimport 'store';\n\nclass DurationStorage {\n\n  static set(userId, fileId, duration) {\n    var durations = store.get('durations', {});\n    if (!durations || !(durations instanceof Array)) {\n      durations = new Array();\n    }\n\n    var value = userId + '-' + fileId + ':' + duration;\n    if (durations.length > 0 && durations.slice(durations.length - 1, durations.length)[0].indexOf(userId + '-' + fileId) > -1) {\n      durations.splice(durations.length - 1, durations.length);\n    }\n    if (durations.length >= 20) {\n      durations.shift();\n    }\n    durations.push(value);\n    store.set('durations', durations);\n  }\n\n  static get(userId, fileId) {\n    var durationTmpArray = store.get('durations', {});\n    if (durationTmpArray) {\n      for (var i = 0; i < durationTmpArray.length; i++) {\n        var index = durationTmpArray[i].indexOf(userId + '-' + fileId);\n        if (index > -1) {\n          var key = durationTmpArray[i];\n          return parseFloat(key.split(':')[1]);\n        }\n      }\n    }\n    return 0;\n  }\n\n  static del(userId, fileId) {\n    var key = userId + '-' + fileId;\n    var durationTmpArray = store.get('durations');\n    if (!durationTmpArray) {\n      return;\n    }\n    for (var i = 0; i < durationTmpArray.length; i++) {\n      var index = durationTmpArray[i].indexOf(userId + '-' + fileId);\n      if (index > -1) {\n        durationTmpArray.splice(i, 1);\n      }\n    }\n    store.set('durations', durationTmpArray);\n  }\n}\n\nexport default DurationStorage;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/duration-storage.js"],"sourceRoot":""}