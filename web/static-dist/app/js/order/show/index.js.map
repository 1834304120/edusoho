{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/order/show/order.js","webpack:///./app/Resources/static-src/app/js/order/show/index.js"],"names":["Order","props","$element","$","element","$realpayPrice","find","$priceList","init","initEvent","on","calculatePrice","event","id","title","price","addPriceItem","removePriceItem","trigger","validate","formData","serializeArray","get","data","text","priceFormat","$priceItem","length","hasPriceItem","remove","html","append","submit","button"],"mappings":";;;;;;;;;;;;;;;;;;;;;;IAAMA,K;AACJ,iBAAYC,KAAZ,EAAmB;AAAA;;AACjB,SAAKC,QAAL,GAAgBC,EAAEF,MAAMG,OAAR,CAAhB;AACA,SAAKC,aAAL,GAAqB,KAAKH,QAAL,CAAcI,IAAd,CAAmB,gBAAnB,CAArB;AACA,SAAKC,UAAL,GAAkB,KAAKL,QAAL,CAAcI,IAAd,CAAmB,0BAAnB,CAAlB;;AAEA,SAAKE,IAAL;AACD;;;;2BAEM;AACL,WAAKC,SAAL;AACD;;;gCAEW;AAAA;;AACV,WAAKP,QAAL,CAAcQ,EAAd,CAAiB,gBAAjB,EAAmC;AAAA,eAAS,MAAKC,cAAL,CAAoBC,KAApB,CAAT;AAAA,OAAnC;AACA,WAAKV,QAAL,CAAcQ,EAAd,CAAiB,cAAjB,EAAiC,UAACE,KAAD,EAAQC,EAAR,EAAYC,KAAZ,EAAmBC,KAAnB;AAAA,eAA6B,MAAKC,YAAL,CAAkBJ,KAAlB,EAAyBC,EAAzB,EAA6BC,KAA7B,EAAoCC,KAApC,CAA7B;AAAA,OAAjC;AACA,WAAKb,QAAL,CAAcQ,EAAd,CAAiB,iBAAjB,EAAoC,UAACE,KAAD,EAAQC,EAAR;AAAA,eAAe,MAAKI,eAAL,CAAqBL,KAArB,EAA4BC,EAA5B,CAAf;AAAA,OAApC;;AAEA,WAAKX,QAAL,CAAcgB,OAAd,CAAsB,gBAAtB;AACA,WAAKC,QAAL;AACD;;;qCAEgB;AAAA;;AACf,UAAIC,WAAW,KAAKlB,QAAL,CAAcmB,cAAd,EAAf;AACAlB,QAAEmB,GAAF,CAAM,KAAKpB,QAAL,CAAcqB,IAAd,CAAmB,gBAAnB,CAAN,EAA4CH,QAA5C,EAAsD,UAACG,IAAD,EAAU;AAC9D,eAAKlB,aAAL,CAAmBmB,IAAnB,CAAwBD,KAAKE,WAA7B;AACA,eAAKvB,QAAL,CAAcgB,OAAd,CAAsB,qBAAtB,EAA6CK,IAA7C;AACD,OAHD;AAID;;;iCAEYX,K,EAAOC,E,EAAI;AACtB,UAAIa,aAAavB,QAAMU,EAAN,CAAjB;AACA,UAAIa,WAAWC,MAAf,EAAuB;AACrB,eAAO,IAAP;AACD;;AAED,aAAO,KAAP;AACD;;;iCAEYf,K,EAAOC,E,EAAIC,K,EAAOC,K,EAAO;AACpC,UAAIW,aAAavB,QAAMU,EAAN,CAAjB;;AAEA,UAAI,KAAKe,YAAL,CAAkBhB,KAAlB,EAAyBC,EAAzB,CAAJ,EAAkC;AAChCa,mBAAWG,MAAX;AACD;;AAED,UAAIC,wDACoCjB,EADpC,2DAEyCC,KAFzC,kEAG4CC,KAH5C,+BAAJ;;AAOA,WAAKR,UAAL,CAAgBwB,MAAhB,CAAuBD,IAAvB;AACD;;;oCAEelB,K,EAAOC,E,EAAI;AACzB,UAAIa,aAAavB,QAAMU,EAAN,CAAjB;;AAEA,UAAI,KAAKe,YAAL,CAAkBhB,KAAlB,EAAyBC,EAAzB,CAAJ,EAAkC;AAChCa,mBAAWG,MAAX;AACD;AACF;;;+BAEU;AACT,WAAK3B,QAAL,CAAc8B,MAAd,CAAsB,iBAAS;AAC7B7B,UAAE,mBAAF,EAAuB8B,MAAvB,CAA8B,SAA9B;AACA,eAAO,IAAP;AACD,OAHD;AAID;;;;;kBAGYjC,K;;;;;;;;;;ACxEf;;;;;;AAEA,IAAIA,eAAJ,CAAU;AACRI,WAAS;AADD,CAAV,E","file":"app/js/order/show/index.js","sourcesContent":["class Order {\n  constructor(props) {\n    this.$element = $(props.element);\n    this.$realpayPrice = this.$element.find('#realpay-price');\n    this.$priceList = this.$element.find('#order-center-price-list');\n\n    this.init();\n  }\n\n  init() {\n    this.initEvent();\n  }\n\n  initEvent() {\n    this.$element.on('calculatePrice', event => this.calculatePrice(event));\n    this.$element.on('addPriceItem', (event, id, title, price) => this.addPriceItem(event, id, title, price));\n    this.$element.on('removePriceItem', (event, id) => this.removePriceItem(event, id));\n\n    this.$element.trigger('calculatePrice');\n    this.validate();\n  }\n\n  calculatePrice() {\n    let formData = this.$element.serializeArray();\n    $.get(this.$element.data('priceCalculate'), formData, (data) => {\n      this.$realpayPrice.text(data.priceFormat);\n      this.$element.trigger('afterCalculatePrice', data);\n    });\n  }\n\n  hasPriceItem(event, id) {\n    let $priceItem = $(`#${id}`);\n    if ($priceItem.length) {\n      return true;\n    }\n\n    return false;\n  }\n\n  addPriceItem(event, id, title, price) {\n    let $priceItem = $(`#${id}`);\n\n    if (this.hasPriceItem(event, id)) {\n      $priceItem.remove();\n    }\n\n    let html = `\n      <div class=\"order-center-price\" id=\"${id}\">\n        <div class=\"order-center-price__title\">${title}</div>\n        <div class=\"order-center-price__content\">-${price}</div>\n      </div>\n    `;\n\n    this.$priceList.append(html);\n  }\n\n  removePriceItem(event, id) {\n    let $priceItem = $(`#${id}`);\n    \n    if (this.hasPriceItem(event, id)) {\n      $priceItem.remove();\n    }\n  }\n\n  validate() {\n    this.$element.submit( event => {\n      $('#order-create-btn').button('loading');\n      return true;\n    });\n  }\n}\n\nexport default Order;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/order/show/order.js","import Order from './order';\n\nnew Order({\n  element: '#order-create-form'\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/order/show/index.js"],"sourceRoot":""}