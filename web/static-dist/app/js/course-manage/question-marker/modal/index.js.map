{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course-manage/question-marker/modal/index.js"],"names":["QuestionMarkerStats","init","myChart","echarts","document","getElementById","type","$","data","indexOf","setOption","getPeiOptions","getBarOptions","on","addClass","removeClass","siblings","stats","getStats","legendData","each","index","stat","key","String","fromCharCode","push","tooltip","trigger","formatter","color","legend","orient","right","top","itemWidth","itemHeight","series","name","radius","center","labelLine","normal","show","label","position","questionType","xData","seriesData","seriesName","Translator","trans","xAxis","yAxis","max"],"mappings":"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","file":"app/js/course-manage/question-marker/modal/index.js","sourcesContent":["class QuestionMarkerStats {\n  constructor() {\n    this.init();\n  }\n\n  init() {\n    let myChart = echarts.init(document.getElementById('main'));\n    let type = $('.popup-topic').data('type');\n    if (type.indexOf('single_choice') >= 0) {\n      myChart.setOption(this.getPeiOptions());\n    } else {\n      myChart.setOption(this.getBarOptions(type));\n    }\n\n    $('[data-toggle=\"tab\"]').on('click', function () {\n      $(this).addClass('btn-primary').removeClass('btn-default')\n        .siblings().removeClass('btn-primary').addClass('btn-default');\n    });\n  }\n\n  getPeiOptions() {\n    let stats = this.getStats();\n    let legendData = [], data = [];\n\n    $.each(stats, function(index, stat) {\n      let key = String.fromCharCode(index+65);\n      legendData.push(key);\n\n      data.push({\n        'name': key,\n        'value': stat['pct']\n      });\n    });\n\n    return {\n      tooltip: {\n        trigger: 'item',\n        formatter: '{a} <br/>{b} : {c} ({d}%)'\n      },\n      color: ['#4653BE', '#72CC59', '#4DA8E6', '#F8AB60'],\n      legend: {\n        orient: 'vertical',\n        right: 'right',\n        top: 'center',\n        itemWidth: 8,\n        itemHeight: 8,\n        data: legendData\n      },\n      series: [{\n        name: '',\n        type: 'pie',\n        radius: '55%',\n        center: ['50%', '60%'],\n        labelLine: {\n          normal: {\n            show: false\n          }\n        },\n        label: {\n          normal: {\n            show: false,\n            position: 'center'\n          }\n\n        },\n        data: data\n      }]\n    };\n  }\n\n  getBarOptions(questionType) {\n    let stats = this.getStats();\n\n    let xData = [],\n      seriesData = [],\n      seriesName = Translator.trans('course.question_marker.selection_rate');\n\n    $.each(stats, function(index, stat) {\n\n      if (questionType === 'fill') {\n        xData.push(Translator.trans('course.question_marker.gap_filling')+(index+1));\n        seriesName = Translator.trans('course.question_marker.correct_rate');\n      } else {\n        let key = String.fromCharCode(index+65);\n        xData.push(key);\n      }\n\n      seriesData.push(stat['pct']);\n    });\n\n    return {\n      color: ['#5586db'],\n      tooltip: {\n        formatter: '{a}<br />{b}ï¼š{c}%'\n      },\n      xAxis: {\n        data: xData\n      },\n      yAxis: {\n        max: 100\n      },\n      series: [{\n        name: seriesName,\n        type: 'bar',\n        data: seriesData\n      }]\n    };\n\n  }\n\n  getStats() {\n    return $('#figure').data('stats');\n  }\n}\n\nnew QuestionMarkerStats();\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/question-marker/modal/index.js"],"sourceRoot":""}