{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/wechat-inform/index.js"],"names":["WECHAT_QRCODE_SHOW","wechatInform","$section","$","$pendant","$qrcode","$mask","todayDate","Date","getDate","key","data","init","store","get","removeClass","bindEvent","initImg","on","event","closeWechatInform","showQrcode","set","$target","currentTarget","stopPropagation","parent","hide","messageClass","cd","message","type","Translator","trans","delay","action","title","url","addClass","show","attr","res","img"],"mappings":"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","file":"app/js/wechat-inform/index.js","sourcesContent":["import { isMobileDevice } from 'common/utils';\nimport 'store';\nconst WECHAT_QRCODE_SHOW = 'WECHAT_QRCODE_SHOW_';\n\nexport default class wechatInform {\n  constructor() {\n    this.$section = $('.js-wechat-inform');\n    this.$pendant = $('.js-wechat-pendant');\n    this.$qrcode = $('.js-wechat-qrcode');\n    this.$mask = $('.js-wechat-mask');\n    this.todayDate = new Date().getDate();\n    this.key = WECHAT_QRCODE_SHOW + this.$section.data('userId');\n    this.init();\n  }\n\n  init() {\n    if (!store.get(this.key) || store.get(this.key) != this.todayDate) {\n      this.$section.removeClass('hidden');\n    }\n    this.bindEvent();\n    this.initImg();\n  }\n\n  bindEvent() {\n    this.$section.on('click', '.js-wechat-close-btn', (event) => this.closeWechatInform(event));\n    this.$section.on('click', '.js-wechat-pendant', (event) => this.showQrcode(event));\n  }\n  \n  closeWechatInform(event) {\n    if (!store.get(this.key) || store.get(this.key) != this.todayDate) {\n      store.set(this.key, this.todayDate);\n    }\n    const $target = $(event.currentTarget);\n    event.stopPropagation();\n    $target.parent().hide();\n    let messageClass;\n    if (isMobileDevice()) {\n      this.$mask.hide();\n      messageClass = 'cd-text-sm';\n      $('body').removeClass('wechat-inform-body');\n    } else {\n      messageClass = 'cd-text-md';\n    }\n    cd.message({\n      type: 'info',\n      message: Translator.trans('wechat.notification.homepage.open_tip', {messageClass: messageClass}),\n      delay: '3000',\n      action: {\n        title: Translator.trans('wechat.notification.homepage.open_tip_title', {messageClass: messageClass}),\n        url: this.$section.data('url')\n      },\n    })\n  }\n\n  showQrcode(event) {\n    const $target = $(event.currentTarget);\n    if (isMobileDevice()) {\n      $('body').addClass('wechat-inform-body');\n      this.$mask.show();\n    }\n    $target.addClass('hidden');\n    this.$qrcode.removeClass('hidden');\n  }\n\n  initImg() {\n    var $target = $('.js-wechat-pendant');\n    if (typeof($target.data('url')) != 'undefined') {\n      $.get($target.data('url'), res => {\n        $('.wechat-inform-qrcode__img').attr('src', res.img);\n      });\n    }\n  }\n\n}\n\nnew wechatInform();\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/wechat-inform/index.js"],"sourceRoot":""}