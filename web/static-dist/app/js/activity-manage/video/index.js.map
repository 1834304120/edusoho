{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/activity-manage/video/video.js","webpack:///./app/Resources/static-src/app/js/activity-manage/video/subtitle/dialog.js","webpack:///./app/Resources/static-src/app/js/activity-manage/video/index.js"],"names":["Video","showChooseContent","initStep2form","isInitStep3from","autoValidatorLength","initfileChooser","hideSubtitleWidget","subtitleWidget","$","click","show","hide","on","event","FileChooser","openUI","val","source","console","log","removeAttr","text","Translator","trans","attr","removeClass","initStep3from","$step2_form","validator","data","validate","groups","date","rules","title","required","maxlength","trim","course_title","minute","second","messages","second_range","$step3_forom","positive_integer","max","min","blur","form","parseInt","children","target","value","addClass","fileChooser","subtitleDialog","SubtitleDialog","onSelectFile","displayFinishCondition","file","closeUI","placeMediaAttr","length","undefined","$minute","$second","$length","valid","id","uri","render","element","upload_id","inited","init","$container","closest","find","self","$elem","post","parent","remove","media","html","get","mediaId","initUploader","globalId","uploader","_destroyUploader","UploaderSDK","sdkBaseUri","app","cloudSdkBaseUri","disableDataUpload","cloudDisableLogReport","disableSentry","initUrl","finishUrl","ui","multi","accept","extensions","mimeTypes","type","process","common","videoNo","locale","document","documentElement","lang","err","error","name","success","convertStatus","waiting","doing","none","append","responseJSON","message","__events","destroy","e"],"mappings":"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","file":"app/js/activity-manage/video/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import FileChooser from 'app/js/file-chooser/file-choose';\nimport SubtitleDialog from 'app/js/activity-manage/video/subtitle/dialog';\n\nexport default class Video {\n  constructor() {\n    this.showChooseContent();\n    this.initStep2form();\n    this.isInitStep3from();\n    this.autoValidatorLength();\n    this.initfileChooser();\n    this.hideSubtitleWidget();\n  }\n\n  hideSubtitleWidget() {\n    var subtitleWidget = $('#video-subtitle-form-group');\n    $('[role=\"presentation\"] a[href!=\"#import-video-panel\"]').click(function () {\n      subtitleWidget.show();\n    });\n    $('a[href=\"#import-video-panel\"]').click(function () {\n      subtitleWidget.hide();\n    });\n  }\n\n  showChooseContent() {\n    $('#iframe-content').on('click', '.js-choose-trigger', (event) => {\n      FileChooser.openUI();\n      $('[name=\"ext[mediaSource]\"]').val(null);\n    });\n  }\n\n  displayFinishCondition(source) {\n    console.log(source);\n    if (source === 'self') {\n      $('#finish-condition option[value=end]').removeAttr('disabled');\n      $('#finish-condition option[value=end]').text(Translator.trans('activity.video_manage.finish_detail'));\n    } else {\n      $('#finish-condition option[value=end]').text(Translator.trans('activity.video_manage.other_finish_detail'));\n      $('#finish-condition option[value=end]').attr('disabled', 'disabled');\n      $('#finish-condition option[value=time]').attr('selected', false);\n      $('#finish-condition option[value=time]').attr('selected', true);\n      $('.viewLength').removeClass('hidden');\n      this.initStep3from();\n    }\n  }\n\n  initStep2form() {\n    var $step2_form = $('#step2-form');\n    var validator = $step2_form.data('validator');\n    $step2_form.validate({\n      groups: {\n        date: 'minute second'\n      },\n      rules: {\n        title: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n          course_title: true,\n        },\n        minute: 'required unsigned_integer',\n        second: 'required second_range',\n        'ext[mediaSource]': 'required',\n        'ext[finishDetail]': 'unsigned_integer'\n      },\n      messages: {\n        minute: {\n          required: Translator.trans('activity.video_manage.length_required_error_hint'),\n        },\n        second: {\n          required: Translator.trans('activity.video_manage.length_unsigned_integer_error_hint'),\n          second_range: Translator.trans('activity.video_manage.second_range_error_hint'),\n        },\n        'ext[mediaSource]': Translator.trans('activity.video_manage.media_error_hint'),\n      }\n    });\n    $step2_form.data('validator', validator);\n  }\n\n  initStep3from() {\n    var $step3_forom = $('#step3-form');\n    var validator = $step3_forom.data('validator');\n    $step3_forom.validate({\n      rules: {\n        'ext[finishDetail]': {\n          required: true,\n          positive_integer: true,\n          max: 300,\n          min: 1,\n        }\n      },\n      messages: {\n        'ext[finishDetail]': {\n          required: Translator.trans('activity.video_manage.length_required_error_hint'),\n        }\n      }\n    });\n    $step3_forom.data('validator', validator);\n  }\n\n  autoValidatorLength() {\n    $('.js-length').blur(function () {\n      let validator = $('#step2-form').data('validator');\n      if (validator && validator.form()) {\n        const minute = parseInt($('#minute').val()) | 0;\n        const second = parseInt($('#second').val()) | 0;\n        $('#length').val(minute * 60 + second);\n      }\n    });\n  }\n\n  isInitStep3from() {\n    // 完成条件是观看时长的情况\n    if ($('#finish-condition').children('option:selected').val() === 'time') {\n      $('.viewLength').removeClass('hidden');\n      this.initStep3from();\n    }\n\n    $('#finish-condition').on('change', (event) => {\n      if (event.target.value == 'time') {\n        $('.viewLength').removeClass('hidden');\n        this.initStep3from();\n      } else {\n        $('.viewLength').addClass('hidden');\n        $('input[name=\"ext[finishDetail]\"]').rules('remove');\n      }\n    });\n  }\n\n  initfileChooser() {\n    const fileChooser = new FileChooser();\n    //字幕组件\n    const subtitleDialog = new SubtitleDialog('.js-subtitle-list');\n    const onSelectFile = file => {\n      this.displayFinishCondition(file.source);\n      FileChooser.closeUI();\n\n      let placeMediaAttr = (file) => {\n        if (file.length !== 0 && file.length !== undefined) {\n          let $minute = $('#minute');\n          let $second = $('#second');\n          let $length = $('#length');\n          \n          let length = parseInt(file.length);\n          let minute = parseInt(length / 60);\n          let second = length % 60;\n          $minute.val(minute);\n          $second.val(second);\n          $length.val(length);\n          file.minute = minute;\n          file.second = second;\n        }\n        $('[name=\"media\"]').val(JSON.stringify(file));\n\n      };\n      placeMediaAttr(file);\n\n      $('[name=\"ext[mediaSource]\"]').val(file.source);\n      $('#step2-form').valid();\n      if (file.source == 'self') {\n        $('#ext_mediaId').val(file.id);\n        $('#ext_mediaUri').val('');\n      } else {\n        $('#ext_mediaUri').val(file.uri);\n        $('#ext_mediaId').val(0);\n      }\n      //渲染字幕\n      subtitleDialog.render(file);\n    };\n\n    fileChooser.on('select', onSelectFile);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/video/video.js","import notify from 'common/notify';\n\nclass SubtitleDialog {\n  constructor(element) {\n    this.element = $(element);\n    this.upload_id = 'subtitle-uploader';\n    this.inited = false;\n    if (this.element.length > 0) {\n      this.init();\n      this.inited = true;\n    }\n\n    let $container = this.element.closest('#video-subtitle-form-group');\n    if ($container.find('#ext_mediaId_for_subtitle').val() > 0) {\n      this.render({id: $container.find('#ext_mediaId_for_subtitle').val()});\n    }\n  }\n\n  init() {\n\n    let self = this;\n    //删除字幕\n    this.element.on('click', '.js-subtitle-delete', function () {\n      let $elem = $(this);\n      $.post($elem.data('subtitleDeleteUrl'), function (data) {\n        if (data) {\n          notify('success', Translator.trans('activity.video_manage.delete_success_hint'));\n          $elem.parent().remove();\n          $('#' + self.upload_id).show();\n        }\n      });\n    });\n  }\n\n\n  render(media) {\n    if (!this.inited) {\n      return;\n    }\n\n    if (media && 'id' in media && media.id > 0) {\n      this.media = media;\n      this.element.html(Translator.trans('activity.video_manage.subtitle_load_hint'));\n      let self = this;\n      $.get(this.element.data('dialogUrl'), {mediaId: this.media.id}, function (html) {\n        self.element.html(html);\n        self.initUploader();\n      });\n    }\n  }\n\n  initUploader() {\n    let self = this;\n    let $elem = $('#' + this.upload_id);\n    let mediaId = $('.js-subtitle-dialog').data('mediaId');\n    let globalId = $elem.data('mediaGlobalId');\n\n    if (this.uploader) {\n      this._destroyUploader();\n    }\n    let uploader = new UploaderSDK({\n      sdkBaseUri: app.cloudSdkBaseUri,\n      disableDataUpload: app.cloudDisableLogReport,\n      disableSentry: app.cloudDisableLogReport,\n      initUrl: $elem.data('initUrl'),\n      finishUrl: $elem.data('finishUrl'),\n      id: this.upload_id,\n      ui: 'simple',\n      multi: true,\n      accept: {\n        extensions: ['srt'],\n        mimeTypes: ['text/srt']\n      },\n      type: 'sub',\n      process: {\n        common: {\n          videoNo: globalId,\n        }\n      },\n      locale: document.documentElement.lang\n    });\n\n    uploader.on('error', function (err) {\n      if (err.error === 'Q_TYPE_DENIED') {\n        notify('danger', Translator.trans('activity.video_manage.subtitle_upload_error_hint'));\n      }\n    });\n\n    uploader.on('file.finish', function (file) {\n      $.post($elem.data('subtitleCreateUrl'), {\n        'name': file.name,\n        'subtitleId': file.id,\n        'mediaId': mediaId\n      }).success(function (data) {\n        let convertStatus = {\n          waiting: Translator.trans('activity.video_manage.convert_status_waiting'),\n          doing: Translator.trans('activity.video_manage.convert_status_doing'),\n          success: Translator.trans('activity.video_manage.convert_status_success'),\n          error: Translator.trans('activity.video_manage.convert_status_error'),\n          none: Translator.trans('activity.video_manage.convert_status_none')\n        };\n        $('.js-media-subtitle-list').append('<li class=\"pvs mtm\">' +\n          '<span class=\"subtitle-name prl pull-left\">' + data.name + '</span>' +\n          '<span class=\"subtitle-transcode-status ' + data.convertStatus + '\">' + convertStatus[data.convertStatus] + '</span>' +\n          '<a href=\"javascript:;\" class=\"btn-link pll color-primary js-subtitle-delete\" data-subtitle-delete-url=\"/media/' + mediaId + '/subtitle/' + data.id + '/delete\">'+Translator.trans('activity.video_manage.subtitle_delete_hint')+'</a>' +\n          '</li>');\n        if ($('.js-media-subtitle-list li').length > 3) {\n          $('#' + self.upload_id).hide();\n        }\n        notify('success', Translator.trans('activity.video_manage.subtitle_upload_success_hint'));\n      }).error(function (data) {\n        notify('danger', data.responseJSON.error.message);\n      });\n    });\n\n    this.uploader = uploader;\n  }\n\n  show() {\n    let parent = this.element.parent('.form-group');\n    if (parent.length > 0) {\n      parent.removeClass('hide');\n    }\n  }\n\n  hide() {\n    let parent = this.element.parent('.form-group');\n    if (parent.length > 0) {\n      parent.addClass('hide');\n    }\n  }\n\n  _destroyUploader() {\n    if (!this.uploader) {\n      return;\n    }\n    this.uploader.__events = null;\n    try {\n      this.uploader.destroy();\n    } catch (e) {\n      //忽略destroy异常\n    }\n    this.uploader = null;\n  }\n\n  destroy() {\n    if (!this.inited) {\n      return;\n    }\n    this._destroyUploader();\n  }\n}\n\nexport default SubtitleDialog;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/video/subtitle/dialog.js","import Video from './video';\n\nnew Video();\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/activity-manage/video/index.js"],"sourceRoot":""}