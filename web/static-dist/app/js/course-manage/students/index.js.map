{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course-manage/students/index.js"],"names":["BatchSelect","$","Students","initTooltips","initDeleteActions","initFollowActions","initBatchUpdateActions","popover","html","trigger","placement","content","on","evt","confirm","Translator","trans","post","target","data","success","cd","message","type","location","reload","$this","hide","hasClass","parent","find","show","ids","each","push","value","console","log","length","get","modal"],"mappings":"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","file":"app/js/course-manage/students/index.js","sourcesContent":["import BatchSelect from 'app/common/widget/batch-select';\nnew BatchSelect($('#student-table-container'));\nclass Students {\n  constructor() {\n    this.initTooltips();\n    this.initDeleteActions();\n    this.initFollowActions();\n    this.initBatchUpdateActions();\n  }\n\n  initTooltips() {\n    $('#refund-coin-tips').popover({\n      html: true,\n      trigger: 'hover',//'hover','click'\n      placement: 'left',//'bottom',\n      content: $('#refund-coin-tips-html').html()\n    });\n  }\n\n  initDeleteActions() {\n    $('body').on('click', '.js-remove-student', function(evt) {\n      if (!confirm(Translator.trans('course.manage.student_delete_hint'))) {\n        return;\n      }\n      $.post($(evt.target).data('url'), function (data) {\n        if (data.success) {\n          cd.message({ type: 'success', message: Translator.trans('site.delete_success_hint') });\n          location.reload();\n        } else {\n          cd.message({ type: 'danger', message: Translator.trans('site.delete_fail_hint') + ':' + data.message });\n        }\n      });\n    });\n  }\n\n  initFollowActions() {\n    $('#course-student-list').on('click', '.follow-student-btn, .unfollow-student-btn', function () {\n      let $this = $(this);\n      $.post($this.data('url'), function () {\n        $this.hide();\n        if ($this.hasClass('follow-student-btn')) {\n          $this.parent().find('.unfollow-student-btn').show();\n          cd.message({ type: 'success', message: Translator.trans('user.follow_success_hint') });\n        } else {\n          $this.parent().find('.follow-student-btn').show();\n          cd.message({ type: 'success', message: Translator.trans('user.unfollow_success_hint') });\n        }\n      });\n\n    });\n  }\n\n  initBatchUpdateActions() {\n    $('#student-table-container').on('click', '#batch-update-expiry-day', function () {\n      let ids = [];\n      $('#course-student-list').find('[data-role=\"batch-item\"]:checked').each(function(){\n        ids.push(this.value);\n      });\n      console.log(ids);\n      if (ids.length == 0) {\n        cd.message({ type: 'danger', message: Translator.trans('course.manage.student.add_expiry_day.select_tips') });\n        return ;\n      }\n      $.get($(this).data('url'), {ids:ids}, function(html) {\n        $('#modal').html(html).modal('show');\n      });\n    });\n  }\n}\n\nnew Students();\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/students/index.js"],"sourceRoot":""}