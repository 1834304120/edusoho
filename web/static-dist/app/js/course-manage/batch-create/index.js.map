{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/course-manage/batch-create/chooser.js","webpack:///./app/Resources/static-src/app/js/course-manage/batch-create/coursefile-choose.js","webpack:///./app/Resources/static-src/app/js/course-manage/batch-create/index.js","webpack:///./app/Resources/static-src/app/js/course-manage/batch-create/batch-create.js","webpack:///./app/Resources/static-src/app/js/course-manage/batch-create/file-chooser.js","webpack:///./app/Resources/static-src/app/js/course-manage/batch-create/materiallib-choose.js"],"names":["Chooser","$","addClass","removeClass","url","param","sPageParams","split","length","sPageURL","decodeURIComponent","sURLVariables","i","sParameterName","undefined","Emitter","CourseFileChoose","$container","container","_init","_initEvent","_loadList","on","_paginationList","bind","_filterByFileName","$containter","data","get","_getParams","html","params","find","each","attr","val","event","stopImmediatePropagation","preventDefault","page","_getUrlParameter","currentTarget","BatchCreate","element","options","uploader","files","$sortable","init","initUploader","initEvent","fileChooser","FileChooser","$uploader","UploaderSDK","id","sdkBaseUri","app","cloudSdkBaseUri","disableDataUpload","cloudDisableLogReport","disableSentry","initUrl","finishUrl","accept","process","getUploadProcess","ui","fileNumLimit","locale","document","documentElement","lang","file","push","error","status","Translator","trans","message","self","setProcess","$selectLength","$btn","button","validLessonNum","console","log","submitSelectFile","submitUploaderFile","popover","is","parents","prop","map","index","array","isLast","fileId","createLesson","video","reduce","prams","dom","uploadProcess","type","common","supportMobile","valid","ajax","async","number","success","response","trigger","complete","modal","initTab","initFileChooser","click","e","$this","closest","siblings","tab","MaterialLibChoose","fillTitle","emit","$title","title","name","substring","lastIndexOf","loadShareingContacts","_switchFileSource","input","that","_loadSharingContacts","call","teachers","teacher","nickname"],"mappings":"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","file":"app/js/course-manage/batch-create/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import Emitter from 'component-emitter';\nclass Chooser extends Emitter {\n  constructor() {\n    super();\n  }\n  _open() {\n    $('.file-chooser-bar').addClass('hidden');\n    $('.file-chooser-main').removeClass('hidden');\n  }\n  _close() {\n    $('.file-chooser-main').addClass('hidden');\n    $('.file-chooser-bar').removeClass('hidden');\n  }\n  _getUrlParameter(url, param) {\n    var sPageParams = url.split('?');\n    if (sPageParams && sPageParams.length == 2) {\n      var sPageURL = decodeURIComponent(sPageParams[1]);\n      var sURLVariables = sPageURL.split('&');\n      for (let i = 0; i < sURLVariables.length; i++) {\n        var sParameterName = sURLVariables[i].split('=');\n\n        if (sParameterName[0] === param) {\n          return sParameterName[1] === undefined ? null : sParameterName[1];\n        }\n      }\n    }\n    return null;\n\n  }\n}\nexport default Chooser;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/batch-create/chooser.js","import Chooser from './chooser';\n\nclass CourseFileChoose extends Chooser {\n\n  constructor($container) {\n    super();\n    this.container = $container;\n    this._init();\n    this._initEvent();\n  }\n\n  _init() {\n    this._loadList();\n  }\n\n  _initEvent() {\n    $(this.container).on('click', '.pagination a', this._paginationList.bind(this));\n    $(this.container).on('click', '.js-course-browser-search', this._filterByFileName.bind(this));\n  }\n\n  _loadList() {\n    let $containter = $('.course-file-browser');\n    let url = $containter.data('url');\n    $.get(url, this._getParams(), html => {\n      $containter.html(html);\n    });\n  }\n\n  _getParams() {\n    let params = {};\n    $('.js-course-file-search-form').find('input[type=hidden]').each(function() {\n      params[$(this).attr('name')] = $(this).val();\n    });\n    return params;\n  }\n\n  _paginationList(event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n\n    let page = this._getUrlParameter($(event.currentTarget).attr('href'), 'page');\n    $('.js-course-file-search-form').find('input[name=page]').val(page);\n    this._loadList();\n  }\n\n  _filterByFileName() {\n    $('.js-course-file-search-form').find('input[name=keyword]').val($('.js-course-file-name').val());\n    $('.js-course-file-search-form').find('input[name=page]').val(1);\n    this._loadList();\n  }\n\n}\n\nexport default CourseFileChoose;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/batch-create/coursefile-choose.js","import BatchCreate from './batch-create';\n\nnew BatchCreate({\n  element: '#uploader-container',\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/batch-create/index.js","import notify from 'common/notify';\nimport FileChooser from './file-chooser';\n\nclass BatchCreate {\n  constructor(options) {\n    this.element = $(options.element);\n    this.uploader = null;\n    this.files = [];\n    this.$sortable = $('#sortable-list');\n    this.init();\n  }\n\n  init() {\n    this.initUploader();\n    this.initEvent();\n    const fileChooser = new FileChooser();\n  }\n\n  initUploader() {\n    let $uploader = this.element;\n    this.uploader = new UploaderSDK({\n      id: $uploader.attr('id'),\n      sdkBaseUri: app.cloudSdkBaseUri,\n      disableDataUpload: app.cloudDisableLogReport,\n      disableSentry: app.cloudDisableLogReport,\n      initUrl: $uploader.data('initUrl'),\n      finishUrl: $uploader.data('finishUrl'),\n      accept: $uploader.data('accept'),\n      process: this.getUploadProcess(),\n      ui: 'batch',\n      fileNumLimit: $uploader.data('numLimit') !== undefined ? $uploader.data('numLimit') : null,\n      locale: document.documentElement.lang\n    });\n\n    this.uploader.on('file.finish', (file) => {\n      this.files.push(file);\n    });\n\n    this.uploader.on('error', (error) => {\n      let status = {'F_DUPLICATE': Translator.trans('uploader.file.exist')};\n      if (!error.message) {\n        error.message = status[error.error];\n      }\n      notify('danger', error.message);\n    });\n  }\n\n  initEvent() {\n    let self = this;\n    $('.js-upload-params').on('change', (event) => {\n      this.uploader.setProcess(this.getUploadProcess());\n    });\n\n    $('.js-batch-create-lesson-btn').on('click', (event) => {\n      let $selectLength = $('.js-batch-create-content').find('input[data-role=\"batch-item\"]:checked').length;\n      if (!this.files.length && $selectLength < 1) {\n        notify('danger', Translator.trans('uploader.select_one_file'));\n        return;\n      }\n      let $btn = $(event.currentTarget);\n      $btn.button('loading');\n\n      if (!this.validLessonNum($btn)) {\n        console.log(this.validLessonNum($btn));\n        return;\n      }\n\n      if ($selectLength > 0) {\n        console.log('files', $selectLength);\n        self.submitSelectFile($btn, $selectLength);\n      } else {\n        self.submitUploaderFile($btn);\n      }\n\n    });\n\n    $('[data-toggle=\"popover\"]').popover({\n      html: true,\n    });\n\n    $('.js-batch-create-content').on('click', '[data-role=batch-select]', function () {\n      if ($(this).is(\":checked\") == true) {\n        $(this).parents('.js-table-list').find('[data-role=batch-item]').prop('checked', true);\n      } else {\n        $(this).parents('.js-table-list').find('[data-role=batch-item]').prop('checked', false);\n      }\n    });\n\n    $('.js-batch-create-content').on('click', '[data-role=batch-item]', function () {\n      if ($(this).is(\":checked\") != true) {\n        $('.js-batch-create-content').find('[data-role=batch-select]').prop('checked', false);\n      }\n    });\n  }\n\n  submitSelectFile($btn, $selectLength) {\n    $('.js-batch-create-content').find('input[data-role=\"batch-item\"]:checked').map((index, event, array) => {\n      let isLast = false;\n      if (index + 1 == $selectLength) {\n        isLast = true;\n        console.log('isLast', isLast);\n      }\n      let fileId = $(event).parents('.file-browser-item').data('id');\n      console.log('fileId', fileId);\n      this.createLesson($btn, fileId, isLast);\n    });\n  }\n\n  submitUploaderFile($btn) {\n    console.log('files', this.files);\n    this.files.map((file, index) => {\n      let isLast = false;\n      if (index + 1 == this.files.length) {\n        isLast = true;\n      }\n      console.log('file', file);\n\n      this.createLesson($btn, file.id, isLast);\n    });\n  }\n\n  getUploadProcess() {\n    let video = $('.js-upload-params').get().reduce((prams, dom) => {\n      prams[$(dom).attr('name')] = $(dom).find('option:selected').val();\n      return prams;\n    }, {});\n\n\n    let uploadProcess = {\n      video,\n      document: {\n        type: 'html',\n      },\n    };\n\n    if ($('[name=support_mobile]').length > 0) {\n      uploadProcess.common = {\n        supportMobile: $('[name=support_mobile]').val(),\n      };\n    }\n\n    return uploadProcess;\n  }\n\n  validLessonNum($btn) {\n    let valid = true;\n    $.ajax({\n      type: 'post',\n      url: $btn.data('validUrl'),\n      async: false,\n      data: {\n        number: this.files.length\n      },\n      success: function (response) {\n        if (response && response.error) {\n          notify('danger', response.error);\n          $btn.button('reset');\n          valid = false;\n        }\n        valid = true;\n      }\n    });\n    return valid;\n  }\n\n  createLesson($btn, fileId, isLast) {\n    let self = this;\n    $.ajax({\n      type: 'post',\n      url: $btn.data('url'),\n      async: false,\n      data: {\n        fileId: fileId\n      },\n      success: function (response) {\n        if (response && response.error) {\n          notify('danger', response.error);\n        } else {\n          self.$sortable.trigger('addItem', response);\n        }\n      },\n      error: function (response) {\n        console.log('error', response);\n        notify('danger', Translator.trans('uploader.status.error'));\n      },\n      complete: function (response) {\n        console.log('complete', response);\n        if (isLast) {\n          $('#modal').modal('hide');\n        }\n      }\n    });\n  }\n\n}\n\nexport default BatchCreate;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/batch-create/batch-create.js","import MaterialLibChoose from './materiallib-choose';\nimport CourseFileChoose from './coursefile-choose';\nimport Emitter from 'component-emitter';\n\nclass FileChooser extends Emitter {\n  constructor(options) {\n    super();\n    this.init();\n  }\n\n  init() {\n    this.initTab();\n    this.initFileChooser();\n  }\n\n  initTab() {\n    $('#material a').click(function (e) {\n      e.preventDefault();\n      let $this = $(this);\n      $this.find('[type=\"radio\"]').prop('checked', 'checked');\n      $('.js-batch-create-content').find('[data-role=batch-item],[data-role=batch-select]').prop('checked', false);\n      $this.closest('li').siblings('li').find('[type=\"radio\"]').prop('checked', false);\n      $this.tab('show');\n    });\n  }\n\n  initFileChooser() {\n    new MaterialLibChoose($('#chooser-material-panel'));\n    new CourseFileChoose($('#chooser-course-panel'));\n  }\n\n  fileSelect(file) {\n    this.fillTitle(file);\n    this.emit('select', file);\n  }\n\n  fillTitle(file) {\n    let $title = $('#title');\n    if ($title.length > 0 && $title.val() == '') {\n      let title = file.name.substring(0, file.name.lastIndexOf('.'));\n      $title.val(title);\n    }\n  }\n\n  static openUI() {\n    $('.file-chooser-bar').addClass('hidden');\n    $('.file-chooser-main').removeClass('hidden');\n  }\n\n  static closeUI() {\n    $('.file-chooser-main').addClass('hidden');\n    $('.file-chooser-bar').removeClass('hidden');\n  }\n}\n\nexport default FileChooser;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/batch-create/file-chooser.js","import Chooser from './chooser';\n\nclass MaterialLibChoose extends Chooser {\n\n  constructor($container) {\n    super();\n    this.container = $container;\n    this.loadShareingContacts = false;\n    this._init();\n    this._initEvent();\n  }\n\n  _init() {\n    this._loadList();\n  }\n\n  _initEvent() {\n    $(this.container).on('click', '.js-material-type', this._switchFileSource.bind(this));\n    $(this.container).on('click', '.js-browser-search', this._filterByFileName.bind(this));\n    $(this.container).on('click', '.pagination a', this._paginationList.bind(this));\n  }\n\n  _loadList() {\n    let url = $('.js-browser-search').data('url');\n    $.get(url, this._getParams(), html => {\n      this.container.find('.js-material-list').html(html);\n    });\n  }\n\n  _getParams() {\n    let params = {};\n    $('.js-material-lib-search-form input[type=hidden]').each(function(input) {\n      params[$(this).attr('name')] = $(this).val();\n    });\n    return params;\n  }\n\n  _paginationList(event) {\n    event.stopImmediatePropagation();\n    event.preventDefault();\n\n    let page = this._getUrlParameter($(event.currentTarget).attr('href'), 'page');\n    $('input[name=page]').val(page);\n    this._loadList();\n  }\n\n  _switchFileSource(event) {\n    let that = event.currentTarget;\n    var type = $(that).data('type');\n    $(that).addClass('active').siblings().removeClass('active');\n    $('input[name=sourceFrom]').val(type);\n    $('input[name=page]').val(1);\n    switch (type) {\n    case 'my':\n      $('.js-file-name-group').removeClass('hidden');\n      $('.js-file-owner-group').addClass('hidden');\n      break;\n    case 'sharing':\n      this._loadSharingContacts.call(this, $(that).data('sharingContactsUrl'));\n      $('.js-file-name-group').removeClass('hidden');\n      $('.js-file-owner-group').addClass('hidden');\n      break;\n    default:\n      $('.js-file-name-group').removeClass('hidden');\n      $('.js-file-owner-group').addClass('hidden');\n      break;\n    }\n    this._loadList();\n  }\n\n  _loadSharingContacts(url) {\n    if (this.loadShareingContacts == true) {\n      console.error('teacher list has been loaded');\n      return;\n    }\n    $.get(url, function(teachers) {\n      if (Object.keys(teachers).length > 0) {\n        var html = `<option value=''>${Translator.trans('activity.manage.choose_teacher_hint')}</option>`;\n        $.each(teachers, function(i, teacher) {\n          html += `<option value='${teacher.id}'>${teacher.nickname} </option>`;\n        });\n\n        $('.js-file-owner', self.element).html(html);\n      }\n    }, 'json');\n    this.loadShareingContacts = true;\n  }\n\n  _filterByFileName() {\n    $('input[name=keyword]').val($('.js-file-name').val());\n    this._loadList();\n  }\n}\n\nexport default MaterialLibChoose;\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/batch-create/materiallib-choose.js"],"sourceRoot":""}