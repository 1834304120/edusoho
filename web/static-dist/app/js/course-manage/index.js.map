{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course-manage/index.js","webpack:///./app/Resources/static-src/app/js/course-manage/help.js","webpack:///./app/Resources/static-src/app/js/course-manage/course-manage.js"],"names":["CourseManage","closeCourse","$","on","evt","$target","currentTarget","cd","confirm","title","Translator","trans","content","okText","cancelText","post","data","warn","message","closeCourseAction","success","type","location","reload","deleteCourse","redirect","window","href","publishCourse","info","hint","fail","showSettings","event","console","log","$this","$li","closest","hasClass","removeClass","find","stop","slideUp","addClass","slideDown","siblings","hide","TabChange","click","TaskListHeaderFixed","$header","length","headerTop","offset","top","scroll","scrollTop","$sortBtn","createBtn","sortList","_getSort","init","bindEvent","sortPlanEvent","sortEvent","cancelSort","saveSort","select","el","value","text","not","show","copyPlan","self","planNumber","prop","get","response","modal","html","_toggleSortStatus","$planList","adjustment","element","ajax","group","placeholder","onDragStart","item","container","_super","pointer","rootGroup","left","hiddenOperations","onDrag","position","height","css","onDrop","$item","toggleClass","_restore","sort","error","e","responseText","$list","targets","len","j","each","push"],"mappings":"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","file":"app/js/course-manage/index.js","sourcesContent":["import {\n  closeCourse,\n  publishCourse,\n  deleteCourse,\n} from './help';\ncloseCourse();\ndeleteCourse();\npublishCourse();\n\nimport CourseManage from './course-manage';\nnew CourseManage();\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/index.js","import { publish } from 'app/common/widget/publish';\n\nexport const closeCourse = () => {\n  $('body').on('click', '.js-close-course', (evt) => {\n    let $target = $(evt.currentTarget);\n    cd.confirm({\n      title: Translator.trans('site.close'),\n      content: Translator.trans('course.manage.close_hint'),\n      okText: Translator.trans('site.confirm'),\n      cancelText: Translator.trans('site.cancel')\n    }).on('ok', () => {\n      $.post($target.data('checkUrl'), (data) => {\n        if (data.warn) {\n          cd.confirm({\n            title: Translator.trans('site.close'),\n            content: Translator.trans(data.message),\n            okText: Translator.trans('site.confirm'),\n            cancelText: Translator.trans('site.cancel')\n          }).on('ok', () => {\n            closeCourseAction($target);\n          });\n          return;\n        }\n        closeCourseAction($target);\n      });\n    });\n  });\n};\n\nconst closeCourseAction = ($target) => {\n  $.post($target.data('url'), (data) => {\n    if (data.success) {\n      cd.message({ type: 'success', message: Translator.trans('course.manage.close_success_hint') });\n      location.reload();\n    } else {\n      cd.message({ type: 'danger', message: Translator.trans('course.manage.close_fail_hint') + ':' + data.message });\n    }\n  });\n};\n\nexport const deleteCourse = () => {\n  $('body').on('click', '.js-delete-course', (evt) =>  {\n    cd.confirm({\n      title: Translator.trans('site.delete'),\n      content: Translator.trans('course.manage.delete_hint'),\n      okText: Translator.trans('site.confirm'),\n      cancelText: Translator.trans('site.cancel')\n    }).on('ok', () => {\n      $.post($(evt.currentTarget).data('url'), (data) => {\n        if (data.success) {\n          cd.message({ type: 'success', message: Translator.trans('site.delete_success_hint') });\n          if (data.redirect) {\n            window.location.href = data.redirect;\n          } else {\n            location.reload();\n          }\n        } else {\n          cd.message({ type: 'danger', message: Translator.trans('site.delete_fail_hint') + ':' + data.message });\n        }\n      });\n    });\n  });\n};\n\nexport const publishCourse = () => {\n  const info = {\n    title: 'course.manage.publish_title',\n    hint: 'course.manage.publish_hint',\n    success: 'course.manage.publish_success_hint',\n    fail: 'course.manage.publish_fail_hint'\n  };\n\n  publish('.js-publish-course', info);\n};\n\nexport const showSettings = () => {\n  $('#sortable-list').on('click', '.js-item-content', (event) => {\n    console.log('click');\n    let $this = $(event.currentTarget);\n    let $li = $this.closest('.js-task-manage-item');\n    if ($li.hasClass('active')) {\n      $li.removeClass('active').find('.js-settings-list').stop().slideUp(500);\n    }\n    else {\n      $li.addClass('active').find('.js-settings-list').stop().slideDown(500);\n      $li.siblings('.js-task-manage-item.active').removeClass('active').find('.js-settings-list').hide();\n    }\n  });\n};\n\nexport const TabChange = () => {\n  $('[data-role=\"tab\"]').click(function (event) {\n    let $this = $(this);\n    $($this.data('tab-content')).removeClass('hidden').siblings('[data-role=\"tab-content\"]').addClass('hidden');\n  });\n};\n\n\nexport const TaskListHeaderFixed = () => {\n  let $header = $('.js-task-list-header');\n  if(!$header.length){\n    return;\n  }\n  let headerTop = $header.offset().top;\n  $(window).scroll(function(event) {\n    if ($(window).scrollTop() >= headerTop) {\n      $header.addClass('fixed');\n    } else {\n      $header.removeClass('fixed');\n    }\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/help.js","import sortList from 'common/sortable';\n\nexport default class CourseManage {\n  constructor() {\n    this.$sortBtn = $('.js-sort-btn');\n    this.createBtn = $('.js-create-plan');\n    this.sortList = this._getSort();\n    this.init();\n  }\n\n  init() {\n    this.bindEvent();\n    this.sortPlanEvent();\n  }\n\n  bindEvent() {\n    this.$sortBtn.on('click', () => this.sortEvent());\n    $('.js-cancel-sort-btn').on('click', () => this.cancelSort());\n    $('.js-save-sort-btn').on('click', () => this.saveSort());\n\n    cd.select({\n      el: '#select-single',\n      type: 'single'\n    }).on('change', (value, text) => {\n      if (value) {\n        $('.js-plan-item').not('.js-status-' + value).hide();\n        $('.js-status-' + value).show();\n      } else {\n        $('.js-plan-item').show();\n      }\n    });\n\n    this.copyPlan();\n  }\n\n  copyPlan() {\n    const self = this;\n    const planNumber = $('.js-plan-item').length;\n    $('.js-plan-operation').on('click', '.js-copy-plan', (event) => {\n      const $target = $(event.currentTarget);\n      if (planNumber > 9) {\n        cd.confirm({\n          title: Translator.trans('course.manage.copy_title'),\n          content: Translator.trans('course.manage.max_course_number_tip'),\n          okText: Translator.trans('site.confirm'),\n          cancelText: Translator.trans('site.cancel')\n        }).on('ok', () => {\n          self.createBtn.prop('disabled', true);\n        }).on('cancle', () => {\n          self.createBtn.prop('disabled', true);\n        });\n      } else {\n        $.get($target.data('url'), (response) => {\n          $('#modal').modal('show').html(response);\n        });\n      }\n    });\n  }\n\n  sortEvent() {\n    this._toggleSortStatus();\n  }\n\n  sortPlanEvent() {\n    const self = this;\n    const $planList = $('.js-plan-list');\n    let adjustment;\n    sortList({\n      element: $planList,\n      ajax: false,\n      group: 'nested',\n      placeholder: '<li class=\"placeholder task-dragged-placeholder cd-mb24\"></li>',\n      onDragStart: function(item, container, _super) {\n        let offset = item.offset(),\n          pointer = container.rootGroup.pointer;\n        adjustment = {\n          left: pointer.left - offset.left,\n          top: pointer.top - offset.top\n        };\n        _super(item, container);\n        self.hiddenOperations(item);\n      },\n      onDrag: function(item, position) {\n        const height = item.height();\n        $('.task-dragged-placeholder').css({\n          'height': height,\n          'background-color': '#eee'\n        });\n        item.css({\n          left: position.left - adjustment.left,\n          top: position.top - adjustment.top\n        });\n      },\n      onDrop: function(item, container, _super) {\n        _super(item, container);\n        self.hiddenOperations(item);\n      },\n    });\n  }\n\n  hiddenOperations($item) {\n    $item.find('.js-plan-icon, .js-plan-dragged-icon').toggleClass('hidden');\n  }\n\n  cancelSort() {\n    this._restore();\n    this._toggleSortStatus();\n    cd.message({ type: 'success', message: Translator.trans('course.manage.sort_cancel') });\n  }\n\n  saveSort() {\n    let sort = this._getSort();\n\n    $.post($('.js-plan-list').data('sortUrl'), { 'ids': sort }, (response) => {\n      cd.message({ type: 'success', message: Translator.trans('site.save_success_hint') });\n      this.sortList = sort;\n      this._toggleSortStatus();\n      window.location.reload();\n    }).error(function(e) {\n      cd.message({ type: 'danger', message: e.responseText });\n    });\n  }\n\n  _restore() {\n    let $list = $('.js-plan-list'),\n      targets = '',\n      len = this.sortList.length;\n    for (let j = 0; j < len; j++) {\n      targets += $list.find('#course-plan-' + this.sortList[j]).prop('outerHTML');\n    }\n    $list.html(targets);\n  }\n\n  _toggleSortStatus() {\n    $('.js-sort-group, #select-single').toggleClass('hide');\n    $('.js-plan-item').toggleClass('drag');\n  }\n\n  _getSort() {\n    let sort = [];\n    $('.js-plan-item').each(function() {\n      sort.push($(this).data('courseId'));\n    });\n\n    return sort;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/course-manage.js"],"sourceRoot":""}