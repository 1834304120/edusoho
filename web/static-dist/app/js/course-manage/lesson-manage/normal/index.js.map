{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/course-manage/lesson-manage/normal/index.js","webpack:///./app/Resources/static-src/app/js/course-manage/lesson-manage/BaseManage.js","webpack:///./app/Resources/static-src/app/js/course-manage/help.js","webpack:///./app/Resources/static-src/app/js/course-manage/lesson-manage/header-util.js","webpack:///./app/Resources/static-src/app/js/course-manage/lesson-manage/normal/lesson-intro.js"],"names":["NormalManage","$container","LessonIntro","$taskNumber","$","num","length","text","lessonNum","publishedLessonNum","content","Translator","trans","attr","container","lessonBox","find","isMulTasks","removeClass","addClass","_triggerLessonIconAsTaskNumUpdated","sortableElements","j","_sortNumberByClassName","_sortUnitNumber","_sortTaskNumber","$element","each","$task","BaseManage","Manage","element","_sort","_event","self","on","e","elm","addItem","sortList","$this","position","data","type","_deleteChapter","_collapse","_publish","_createTask","_optional","_initLessonTaskAction","collapseTexts","event","currentTarget","toggleClass","$chapter","closest","until","hasClass","$hideElements","nextUntil","not","stop","animate","height","opacity","html","$elm","$exsit","replaceWith","afterAddItem","$position","$last","last","after","append","parents","_triggerAsTaskNumUpdated","$unit","$lesson","tooltip","handleEmptyShow","_flushTaskNumber","_flushPublishLessonNum","clearPosition","evt","$parent","_getDeleteText","cd","confirm","title","okText","cancelText","siblings","remove","post","taskName","name","adjustment","ajax","group","placeholder","isValidTarget","$item","_sortRules","onDragStart","item","_super","offset","pointer","rootGroup","left","top","onDrag","css","target","ids","push","response","sortablelist","$parentLi","filter","info","class","oppositeClas","isHideUnPublish","flag","$target","success","danger","toggleOptional","url","get","code","modal","message","fail","responseJSON","error","btnRelations","displayedEleClass","actualClickedEleClass","taskIdStr","taskId","split","jsActionBtn","updatedUrl","replace","click","window","open","$dom","$oppositeDom","setProperty","checkShouldSetProperty","$displayTextDom","setShowNum","$publish","$setOptional","hiddenPublish","hiddenOptional","console","log","lessonIconBtn","classList","esIcon","index","className","startsWith","closeCourse","warn","closeCourseAction","location","reload","deleteCourse","redirect","href","publishCourse","hint","showSettings","$li","slideUp","slideDown","hide","TabChange","TaskListHeaderFixed","$header","headerTop","scroll","scrollTop","hiddenUnpublishTask","onoff","el","value","$ele","status","parent","statusStr","$modal","checked","addLesson","_defaultEvent","store","undefined","showAdImage","set","closeModal","$intro","img","Image","local","src","$img"],"mappings":"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","file":"app/js/course-manage/lesson-manage/normal/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import {hiddenUnpublishTask, addLesson} from './../header-util';\nimport LessonIntro from './lesson-intro';\nimport BaseManage from './../BaseManage';\nimport {TaskListHeaderFixed} from 'app/js/course-manage/help';\n\nclass NormalManage extends BaseManage {\n  constructor($container) {\n    super($container);\n    new LessonIntro();\n  }\n\n  _flushTaskNumber() {\n    if (!this.$taskNumber) {\n      this.$taskNumber = $('#task-num');\n    }\n\n    let num = $('.js-task-manage-item:not(.drag)').length;\n    this.$taskNumber.text(num);\n  }\n\n  _flushPublishLessonNum() {\n    let lessonNum = $('.js-task-manage-item:not(.drag)').length;\n    let publishedLessonNum = $('.js-lesson-unpublish-status.hidden').length;\n    let content = Translator.trans('course.plan_task.lessons_publish_status', {'publishedNum':publishedLessonNum, 'unpublishedNum': lessonNum - publishedLessonNum});\n    $('.js-lessons-publish-status').attr('data-content', content);\n  }\n\n  _triggerAsTaskNumUpdated(container) {\n    let lessonBox = container.find('.js-lesson-box');\n    let isMulTasks = lessonBox.find('.js-task-manage-item').length > 1;\n\n    if (isMulTasks) {\n      lessonBox.removeClass('hidden');\n    } else {\n      lessonBox.addClass('hidden');\n    }\n\n    this._triggerLessonIconAsTaskNumUpdated(container, isMulTasks);\n  }\n\n  _triggerLessonIconAsTaskNumUpdated(container, isMulTasks) {\n  }\n\n  sortablelist() {\n    // 前台排序 章，课时，任务 的序号\n    let sortableElements = ['.js-task-manage-lesson[show-num=1]', '.js-task-manage-chapter'];\n    for (let j = 0; j < sortableElements.length; j++) {\n      this._sortNumberByClassName(sortableElements[j]);\n    }\n    this._sortUnitNumber();\n    this._sortTaskNumber();\n  }\n\n  _sortTaskNumber() {\n    let num;\n    this.$element.find('.js-lesson-box').each(function () {\n      let $task = $(this).find('.js-task-manage-item');\n      num = 0;\n      $task.each(function () {\n        $(this).find('.number').text(num++);\n      });\n    });\n  }\n}\n\n\nnew NormalManage('#sortable-list');\n\nhiddenUnpublishTask();\naddLesson();\nTaskListHeaderFixed();\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/lesson-manage/normal/index.js","import sortList from 'common/sortable';\nimport notify from 'common/notify';\n\n\nexport default class Manage {\n  constructor(element) {\n    this.$element = $(element);\n    this._sort();\n    this._event();\n  }\n\n  _event() {\n    let self = this;\n\n    this.$element.on('addItem', function(e, elm) {\n      self.addItem(elm);\n      self.sortList();\n    });\n\n    $('body').on('click', '[data-position]', function(e) {\n      let $this = $(this);\n\n      self.position = $this.data('position');\n      self.type = $this.data('type');\n    });\n    this._deleteChapter();\n    this._collapse();\n    this._publish();\n    this._createTask();\n    this._optional();\n    this._initLessonTaskAction();\n  }\n\n  _collapse() {\n    let collapseTexts = [\n      '<i class=\"es-icon es-icon-chevronright cd-mr16\"></i>',\n      '<i class=\"es-icon es-icon-keyboardarrowdown cd-mr16\"></i>'\n    ];\n    this.$element.on('click', '.js-toggle-show', (event) => {\n      let $this = $(event.currentTarget);\n      $this.toggleClass('toogle-hide');\n      let $chapter = $this.closest('.task-manage-item');\n      let until = $chapter.hasClass('js-task-manage-chapter') ? '.js-task-manage-chapter' : '.js-task-manage-chapter,.js-task-manage-unit';\n      let $hideElements = $chapter.nextUntil(until);\n\n      if ($this.hasClass('js-toggle-unit')) {\n        $hideElements.toggleClass('unit-hide');\n      } else {\n        $hideElements = $hideElements.not('.unit-hide');\n      }\n\n      $hideElements.stop().animate({ height: 'toggle', opacity: 'toggle' }, 'fast');\n      $this.hasClass('toogle-hide') ? $this.html(collapseTexts[0]) : $this.html(collapseTexts[1]);\n    });\n  }\n\n  addItem(elm) {\n    let $elm = $(elm);\n    let $exsit = $('#' + $elm.attr('id'));\n\n    //编辑时，替换元素\n    if ($exsit.length > 0) {\n      $exsit.replaceWith($elm);\n      this.afterAddItem($elm);\n      return;\n    }\n    //添加章节课时\n    switch (this.type) {\n    case 'chapter':\n    {\n      let $position = this.$element.find('#chapter-' + this.position);\n      let $last = $position.nextUntil('.js-task-manage-chapter').last();\n      if (0 == $last.length) {\n        $position.after($elm);\n      } else {\n        $last.after($elm);\n      }\n      break;\n    }\n    case 'task':\n    {\n      this.$element.find('#chapter-' + this.position + ' .js-lesson-box').append($elm);\n      let container = $elm.parents('.js-lesson-container');\n      this._triggerAsTaskNumUpdated(container);\n      break;\n    }\n    case 'lesson':\n    {\n      let $unit = this.$element.find('#chapter-' + this.position);\n      let $lesson = $unit.nextUntil('.js-task-manage-unit,.js-task-manage-chapter').last();\n      if (0 == $lesson.length) {\n        $unit.after($elm);\n      } else {\n        $lesson.after($elm);\n      }\n      break;\n    }\n    default:\n      this.$element.append($elm);\n    }\n    $('[data-toggle=\"tooltip\"]').tooltip();\n\n    this.handleEmptyShow();\n    this._flushTaskNumber();\n    this._flushPublishLessonNum();\n    this.clearPosition();\n    this.afterAddItem($elm);\n  }\n\n  clearPosition() {\n    this.position = '';\n    this.type = '';\n  }\n\n  _deleteChapter() {\n    //删除章节课时\n    let self = this;\n    this.$element.on('click', '.js-delete', function(evt) {\n      let $this = $(this);\n      let $parent = $this.closest('.task-manage-item');\n      let text = self._getDeleteText($this);\n\n      cd.confirm({\n        title: Translator.trans('site.delete'),\n        content: text,\n        okText: Translator.trans('site.confirm'),\n        cancelText: Translator.trans('site.cancel')\n      }).on('ok', () => {\n        if ('task' == $this.data('type') && $parent.siblings().length == 0) {\n          $parent.closest('.js-task-manage-lesson').remove();\n        }\n        let container = $parent.parents('.js-lesson-container');\n        $parent.remove();\n        self._triggerAsTaskNumUpdated(container);\n        self.handleEmptyShow();\n        self._flushTaskNumber();\n        self._flushPublishLessonNum();\n        $.post($this.data('url'), function(data) {\n          notify('success', Translator.trans('site.delete_success_hint'));\n          self.sortList();\n        });\n      });\n    });\n  }\n\n  _getDeleteText($element) {\n    // 获得删除章节课时时，提示文案\n    if ('task' == $element.data('type')) {\n      return Translator.trans('course.manage.task_delete_hint', { taskName: $element.data('name') });\n    }\n    return Translator.trans('course.manage.chapter_delete_hint', { name: $element.data('name') });\n  }\n\n  _sort() {\n    // 拖动，及拖动规则\n    let self = this;\n    let adjustment;\n    sortList({\n      element: self.$element,\n      ajax: false,\n      group: 'nested',\n      placeholder: '<li class=\"placeholder task-dragged-placeholder\"></li>',\n      isValidTarget: function($item, container) {\n        return self._sortRules($item, container);\n      },\n      onDragStart: function(item, container, _super) {\n        let offset = item.offset(),\n          pointer = container.rootGroup.pointer;\n        adjustment = {\n          left: pointer.left - offset.left,\n          top: pointer.top - offset.top\n        };\n        _super(item, container);\n      },\n      onDrag: function(item, position) {\n        const height = item.height();\n        $('.task-dragged-placeholder').css({\n          'height': height,\n          'background-color': '#eee'\n        });\n        item.css({\n          left: position.left - adjustment.left,\n          top: position.top - adjustment.top\n        });\n      },\n    }, (data) => {\n      self.sortList();\n    });\n  }\n\n  _sortRules($item, container) {\n    // 任务课时内拖动\n    if ($item.hasClass('js-task-manage-item') &&\n      container.target.closest('.js-task-manage-lesson').attr('id') != $item.closest('.js-task-manage-lesson').attr('id')) {\n      return false;\n    }\n    // 章节只能挂在总节点下\n    if ($item.hasClass('js-task-manage-unit') || $item.hasClass('js-task-manage-chapter')) {\n      if (!container.target.hasClass('sortable-list')) {\n        return false;\n      }\n    }\n    // 课时不能不能在课时下\n    if ($item.hasClass('js-task-manage-lesson') && container.target.hasClass('js-lesson-box')) {\n      return false;\n    }\n\n    return true;\n  }\n\n  handleEmptyShow() {\n    if (0 === $('#sortable-list').find('li').length) {\n      $('.js-task-empty').removeClass('hidden');\n    } else {\n      $('.js-task-empty').addClass('hidden');\n    }\n  }\n\n  sortList() {\n    // 后台排序seq值\n    let ids = [];\n    this.$element.find('.task-manage-item').each(function() {\n      ids.push($(this).attr('id'));\n    });\n    $.post(this.$element.data('sortUrl'), { ids: ids }, (response) => {});\n    this.sortablelist();\n  }\n\n  setShowNum($parentLi) {\n    if ($parentLi.attr('show-num') == 0) {\n      $parentLi.attr('show-num', 1);\n    } else {\n      $parentLi.attr('show-num', 0);\n    }\n  }\n\n\n  sortablelist() {\n    // 前台排序 章，课时，任务 的序号\n    let sortableElements = ['.js-task-manage-lesson[show-num=1]', '.js-task-manage-chapter', '.js-task-manage-item[show-num=1]', '.js-task-manage-unit'];\n    for (let j = 0; j < sortableElements.length; j++) {\n      this._sortNumberByClassName(sortableElements[j]);\n    }\n    this._sortUnitNumber();\n  }\n\n  _sortNumberByClassName(name) {\n    //前台排序 num 通用方法\n    let num = 1;\n    this.$element.find(name).each(function() {\n      let $item = $(this);\n      $item.find('.number').text(num++);\n    });\n  }\n\n  _sortUnitNumber() {\n    let num;\n    this.$element.find('.js-task-manage-chapter').each(function() {\n      let $unit = $(this).nextUntil('.js-task-manage-chapter').filter('.js-task-manage-unit');\n      num = 1;\n      $unit.each(function() {\n        $(this).find('.number').text(num++);\n      });\n    });\n  }\n\n  _publish() {\n    let self = this;\n    const info = {\n      class: '.js-publish-item, .js-delete, .js-lesson-unpublish-status',\n      oppositeClas: '.js-unpublish-item',\n      isHideUnPublish: $('#isHideUnPublish').hasClass('checked'),\n      flag: false\n    };\n    this.$element.on('click', '.js-unpublish-item', (event) => {\n      const $target = $(event.target);\n      info.success = Translator.trans('course.manage.task_unpublish_success_hint');\n      info.danger = Translator.trans('course.manage.task_unpublish_fail_hint') + ':';\n      this.toggleOptional($target, self, info);\n    });\n\n    this.$element.on('click', '.js-publish-item', (event) => {\n      const $target = $(event.target);\n      info.success = Translator.trans('course.manage.task_publish_success_hint');\n      info.danger = Translator.trans('course.manage.task_publish_fail_hint') + ':';\n      this.toggleOptional($target, self, info);\n    });\n  }\n\n  _flushTaskNumber() {\n    if (!this.$taskNumber) {\n      this.$taskNumber = $('#task-num');\n    }\n\n    let num = $('.js-settings-item.active').length;\n    this.$taskNumber.text(num);\n  }\n\n  _flushPublishLessonNum() {\n    let lessonNum = $('.js-settings-item.active').length;\n    let publishedLessonNum = $('.js-lesson-unpublish-status.hidden').length;\n    let content = Translator.trans('course.plan_task.lessons_publish_status', {'publishedNum':publishedLessonNum, 'unpublishedNum': lessonNum - publishedLessonNum});\n    $('.js-lessons-publish-status').attr('data-content', content);\n  }\n\n  _createTask() {\n    this.$element.on('click', '.js-create-task-btn', function(event) {\n      let url = $(this).data('url');\n\n      $.get(url, function(response) {\n        if (response.code) {\n          $('#modal').html('');\n          $('#modal').append(response.html);\n          $('#modal').modal({ 'backdrop': 'static', 'show': true });\n        } else {\n          cd.message({ type: 'danger', message: Translator.trans(response.message) });\n        }\n      }).fail(function(response) {\n        cd.message({ type: 'danger', message: response.responseJSON.error.message });\n      });\n    });\n  }\n\n  _optional() {\n    let self = this;\n    const info = {\n      class: '.js-set-optional',\n      oppositeClas: '.js-unset-optional,.js-lesson-option-tag',\n      success: Translator.trans('site.save_success_hint'),\n      danger: Translator.trans('site.save_error_hint') + ':',\n      flag: true\n    };\n    this.$element.on('click', '.js-set-optional', (event) => {\n      const $target = $(event.target);\n      self.toggleOptional($target, self, info);\n    });\n\n    this.$element.on('click', '.js-unset-optional', (event) => {\n      const $target = $(event.target);\n      self.toggleOptional($target, self, info);\n    });\n  }\n\n  /*\n   * 单任务课时才有预览课时的功能，实际上预览的是任务，同样编辑课时的功能实际上是编辑任务\n   * 多任务课时才有重命名课时的功能\n   */\n  _initLessonTaskAction() {\n    let btnRelations = { //key为显示的按钮，点击后，实际上点击的value中的按钮\n      'js-lesson-preview-btn': 'js-hidden-lesson-preview-btn',\n      'js-lesson-edit-btn': 'js-hidden-lesson-edit-btn',\n      'js-lesson-rename-btn': 'js-hidden-lesson-rename-btn',\n    };\n\n    for (const displayedEleClass in btnRelations) {\n      let actualClickedEleClass = btnRelations[displayedEleClass];\n      $('#sortable-list').on('click', '.' + displayedEleClass, function() {\n        let container = $(this).parents('.js-lesson-container');\n\n        let taskIdStr = container.find('.js-task-manage-item').attr('id');\n        //格式为 task-{taskId}\n\n        let taskId = taskIdStr.split('-')[1]; // 第二部分即为taskId\n        let jsActionBtn = container.find('.' + actualClickedEleClass);\n        let updatedUrl = jsActionBtn.data('url').replace('%7BtaskId%7D', taskId);\n        jsActionBtn.data('url', updatedUrl);\n        if (jsActionBtn.data('toggle')) {\n          jsActionBtn.click();\n        } else {\n          window.open(jsActionBtn.data('url'), '_blank');\n        }\n      });\n    }\n  }\n\n  toggleOptional($target, self, info) {\n    const $parentLi = $target.closest('.task-manage-item');\n    const $dom = $parentLi.find(info.class);\n    const $oppositeDom = $parentLi.find(info.oppositeClas);\n    let isHideUnPublish = $('#isHideUnPublish').hasClass('checked');\n    $.post($target.data('url'), (data) => {\n      let setProperty = true;\n\n      if (isHideUnPublish) {\n        setProperty = self.checkShouldSetProperty($target, $parentLi);\n      }\n\n      $dom.toggleClass('hidden');\n      $oppositeDom.toggleClass('hidden');\n\n      if (isHideUnPublish && setProperty || !isHideUnPublish && info.flag) {\n        const $displayTextDom = $parentLi.find('.display-text');\n        $displayTextDom.toggleClass('hidden');\n        self.setShowNum($parentLi);\n        self.sortList();\n      }\n      this._flushPublishLessonNum();\n\n      cd.message({ type: 'success', message: info.success });\n    }).fail(function(data) {\n      cd.message({ type: 'danger', message: info.danger + data.responseJSON.error.message });\n    });\n  }\n\n  checkShouldSetProperty($target, $parentLi) {\n    const $publish = $parentLi.find('.js-publish-item');\n    const $setOptional = $parentLi.find('.js-set-optional');\n\n    let hiddenPublish = $publish.hasClass('hidden');\n    let hiddenOptional = $setOptional.hasClass('hidden');\n\n    let setProperty = true;\n\n    if ($target.hasClass('js-unpublish-item')) {\n      if (hiddenOptional) {\n        setProperty = false;\n      }\n    } else if ($target.hasClass('js-publish-item')) {\n      if (hiddenOptional) {\n        setProperty = false;\n      }\n    } else if ($target.hasClass('js-set-optional')) {\n      if (!hiddenPublish) {\n        setProperty = false;\n      }\n    } else if ($target.hasClass('js-unset-optional')) {\n      if (!hiddenPublish) {\n        setProperty = false;\n      }\n    }\n\n    return setProperty;\n\n  }\n\n  afterAddItem($elm) {\n    console.log('afterAddItem');\n  }\n\n  /*\n   * 如果课时下有多任务，显示任务，如果单任务，不显示任务\n   * @param container 新增或删除的任务节点所在的js-lesson-container节点\n   */\n  _triggerAsTaskNumUpdated(container) {\n    let lessonBox = container.find('.js-lesson-box');\n    let isMulTasks = lessonBox.find('.js-task-manage-item').length > 1;\n\n    if (isMulTasks) { // 多任务课时显示任务, 同时课时上会少一些按钮\n      lessonBox.removeClass('hidden');\n      container.find('.js-display-when-mul-tasks').removeClass('hidden');\n      container.find('.js-display-when-single-task').addClass('hidden');\n    } else { // 单任务课时不显示任务, 同时课时上会多一些按钮\n      lessonBox.addClass('hidden');\n      container.find('.js-display-when-mul-tasks').addClass('hidden');\n      container.find('.js-display-when-single-task').removeClass('hidden');\n      container.find('.js-task-title').html(container.find('.js-lesson-title').html());\n    }\n\n    this._triggerLessonIconAsTaskNumUpdated(container, isMulTasks);\n  }\n\n  _triggerLessonIconAsTaskNumUpdated(container, isMulTasks) {\n    let lessonIconBtn = container.find('.js-lesson-icon');\n    let classList = '';\n    if (isMulTasks) {\n      //多任务时，删除课时节点上的任务图标，如图文的图标\n      classList = lessonIconBtn[0].classList;\n    } else {\n      //单任务时，课时节点上显示任务的图标\n      let esIcon = container.find('.js-lesson-box').find('.es-icon');\n      if (esIcon.length == 0) {\n        classList = [];\n      } else {\n        classList = container.find('.js-lesson-box').find('.es-icon')[0].classList;\n      }\n    }\n\n    for (let index = 0; index < classList.length; index++) {\n      const className = classList[index];\n      if (className.startsWith('es-icon-')) {\n        if (isMulTasks) {\n          lessonIconBtn.removeClass(className);\n        } else {\n          lessonIconBtn.addClass(className);\n        }\n      }\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/lesson-manage/BaseManage.js","import { publish } from 'app/common/widget/publish';\n\nexport const closeCourse = () => {\n  $('body').on('click', '.js-close-course', (evt) => {\n    let $target = $(evt.currentTarget);\n    cd.confirm({\n      title: Translator.trans('site.close'),\n      content: Translator.trans('course.manage.close_hint'),\n      okText: Translator.trans('site.confirm'),\n      cancelText: Translator.trans('site.cancel')\n    }).on('ok', () => {\n      $.post($target.data('checkUrl'), (data) => {\n        if (data.warn) {\n          cd.confirm({\n            title: Translator.trans('site.close'),\n            content: Translator.trans(data.message),\n            okText: Translator.trans('site.confirm'),\n            cancelText: Translator.trans('site.cancel')\n          }).on('ok', () => {\n            closeCourseAction($target);\n          });\n          return;\n        }\n        closeCourseAction($target);\n      });\n    });\n  });\n};\n\nconst closeCourseAction = ($target) => {\n  $.post($target.data('url'), (data) => {\n    if (data.success) {\n      cd.message({ type: 'success', message: Translator.trans('course.manage.close_success_hint') });\n      location.reload();\n    } else {\n      cd.message({ type: 'danger', message: Translator.trans('course.manage.close_fail_hint') + ':' + data.message });\n    }\n  });\n};\n\nexport const deleteCourse = () => {\n  $('body').on('click', '.js-delete-course', (evt) =>  {\n    cd.confirm({\n      title: Translator.trans('site.delete'),\n      content: Translator.trans('course.manage.delete_hint'),\n      okText: Translator.trans('site.confirm'),\n      cancelText: Translator.trans('site.cancel')\n    }).on('ok', () => {\n      $.post($(evt.currentTarget).data('url'), (data) => {\n        if (data.success) {\n          cd.message({ type: 'success', message: Translator.trans('site.delete_success_hint') });\n          if (data.redirect) {\n            window.location.href = data.redirect;\n          } else {\n            location.reload();\n          }\n        } else {\n          cd.message({ type: 'danger', message: Translator.trans('site.delete_fail_hint') + ':' + data.message });\n        }\n      });\n    });\n  });\n};\n\nexport const publishCourse = () => {\n  const info = {\n    title: 'course.manage.publish_title',\n    hint: 'course.manage.publish_hint',\n    success: 'course.manage.publish_success_hint',\n    fail: 'course.manage.publish_fail_hint'\n  };\n\n  publish('.js-publish-course', info);\n};\n\nexport const showSettings = () => {\n  $('#sortable-list').on('click', '.js-item-content', (event) => {\n    console.log('click');\n    let $this = $(event.currentTarget);\n    let $li = $this.closest('.js-task-manage-item');\n    if ($li.hasClass('active')) {\n      $li.removeClass('active').find('.js-settings-list').stop().slideUp(500);\n    }\n    else {\n      $li.addClass('active').find('.js-settings-list').stop().slideDown(500);\n      $li.siblings('.js-task-manage-item.active').removeClass('active').find('.js-settings-list').hide();\n    }\n  });\n};\n\nexport const TabChange = () => {\n  $('[data-role=\"tab\"]').click(function (event) {\n    let $this = $(this);\n    $($this.data('tab-content')).removeClass('hidden').siblings('[data-role=\"tab-content\"]').addClass('hidden');\n  });\n};\n\n\nexport const TaskListHeaderFixed = () => {\n  let $header = $('.js-task-list-header');\n  if(!$header.length){\n    return;\n  }\n  let headerTop = $header.offset().top;\n  $(window).scroll(function(event) {\n    if ($(window).scrollTop() >= headerTop) {\n      $header.addClass('fixed');\n    } else {\n      $header.removeClass('fixed');\n    }\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/help.js","export const hiddenUnpublishTask = () => {\n  cd.onoff({\n    el: '.js-switch'\n  }).on('change', (value) => {\n    let $ele = $('.js-switch');\n    let url = $ele.data('url');\n    let status = $ele.parent().hasClass('checked') ? 1 : 0;\n    let statusStr = $ele.parent().hasClass('checked') ? 'on' : 'off';\n\n    cd.confirm({\n      title: Translator.trans('confirm.oper.tip'),\n      content: Translator.trans('confirm.lesson.hidden.tip.' + statusStr),\n      okText: Translator.trans('site.yes'),\n      cancelText: Translator.trans('site.no'),\n    }).on('ok', () => {\n      $.post(url, { 'status': status })\n        .success((response) => {\n          cd.message({ type: 'success', message: Translator.trans('site.save_success_hint') });\n          location.reload();\n        })\n        .error((response) => {\n          cd.message({ type: 'danger', message: response.responseJSON.error.message });\n        });\n    }).on('cancel', ($modal, modal) => {\n      $ele[0].checked = !$ele[0].checked;\n      $ele.parent().toggleClass('checked');\n    });\n  });\n};\n\nexport const addLesson = () => {\n  $('body').on('click', '.js-lesson-create-btn', (event) => {\n    const url = $(event.currentTarget).data('url');\n    $.get(url, {})\n      .success((response) => {\n        $('#modal').html('');\n        $('#modal').append(response.html);\n        $('#modal').modal({ 'backdrop': 'static', 'show': true });\n      })\n      .error((response) => {\n        cd.message({ type: 'danger', message: Translator.trans(response.responseJSON.error.message) });\n      });\n  });\n};\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/lesson-manage/header-util.js","import 'store';\n\nexport default class LessonIntro {\n  constructor() {\n    this._defaultEvent();\n  }\n\n  _defaultEvent() {\n    if (store.get('NormalLessonIntro') === undefined) {\n      this.showAdImage();\n      store.set('NormalLessonIntro', '1');\n    }\n    this.closeModal();\n  }\n\n  closeModal() {\n    $('#js-intro').on('click', function(e) {\n      $('#js-intro').modal('hide');\n    });\n  }\n\n  showAdImage() {\n    let $intro = $('#js-intro');\n    let img = new Image();\n    let local = $('.js-data-local').data('local');\n    if (local === 'en') {\n      img.src = '/assets/img/lessonintro/lessonintro-en.jpg';\n    } else {\n      img.src = '/assets/img/lessonintro/lessonintro.jpg';\n    }\n    var $img = $(img);\n    $intro.find('.modal-body').append($img);\n    $intro.modal('show');\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/lesson-manage/normal/lesson-intro.js"],"sourceRoot":""}