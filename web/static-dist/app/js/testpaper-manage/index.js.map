{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/testpaper-manage/index.js","webpack:///./app/Resources/static-src/app/common/widget/delete-action.js"],"names":["TESTPAPER_IMPORT_INTRO","TestpaperManage","$container","_initEvent","_init","store","get","set","importIntro","on","testpaperAction","event","$target","$","currentTarget","$tr","closest","confirm","attr","post","data","html","Translator","trans","replaceWith","error","doneLabel","customClass","introJs","setOptions","steps","element","intro","skipLabel","showBullets","tooltipPosition","showStepNumbers","exitOnEsc","exitOnOverlayClick","tooltipClass","start","BatchSelect","DeleteAction","$element","onSuccess","initEvent","_itemDelete","_batchDelete","$btn","name","message","self","cd","title","content","okText","cancelText","isFunction","call","remove","type","window","location","reload","ids","find","each","push","value","length"],"mappings":";;;;;AAAA,wB;;;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA,IAAMA,yBAAyB,wBAA/B;;IAEMC,e;AAEJ,2BAAYC,UAAZ,EAAwB;AAAA;;;AAEtB,SAAKA,UAAL,GAAkBA,UAAlB;AACA,SAAKC,UAAL;AACA,SAAKC,KAAL;AACA,QAAI,CAACC,MAAMC,GAAN,CAAUN,sBAAV,CAAL,EAAwC;AACtCK,YAAME,GAAN,CAAUP,sBAAV,EAAkC,IAAlC;AACA,WAAKQ,WAAL;AACD;AAEF;;;;iCAEY;AAAA;;AACX,WAAKN,UAAL,CAAgBO,EAAhB,CAAmB,OAAnB,EAA2B,kCAA3B,EAA8D;AAAA,eAAO,MAAKC,eAAL,CAAqBC,KAArB,CAAP;AAAA,OAA9D;AAED;;;4BAEO,CAEP;;;oCAEeA,K,EAAO;AACrB,UAAIC,UAAUC,EAAEF,MAAMG,aAAR,CAAd;AACA,UAAIC,MAAMH,QAAQI,OAAR,CAAgB,IAAhB,CAAV;;AAEA,UAAI,CAACC,QAAQL,QAAQM,IAAR,CAAa,OAAb,CAAR,CAAL,EAAqC;AACnC;AACD;;AAEDL,QAAEM,IAAF,CAAOP,QAAQQ,IAAR,CAAa,KAAb,CAAP,EAA4B,UAASC,IAAT,EAAc;AACxC,8BAAO,SAAP,EAAkBC,WAAWC,KAAX,CAAiB,oCAAjB,CAAlB;AACAR,YAAIS,WAAJ,CAAgBH,IAAhB;AACD,OAHD,EAGGI,KAHH,CAGS,YAAU;AACjB,8BAAO,QAAP,EAAiBH,WAAWC,KAAX,CAAiB,kCAAjB,CAAjB;AACD,OALD;AAMD;;;kCAEa;AACZ,UAAMG,YAAYJ,WAAWC,KAAX,CAAiB,0BAAjB,CAAlB;AACA,UAAMI,cAAc,cAApB;AACAd,QAAE,gBAAF,EAAoBK,IAApB,CAAyB,aAAzB,EAAuC,QAAvC,EAHY,CAGsC;AAClDU,gBAAUC,UAAV,CAAqB;AACnBC,eAAO,CAAC;AACNC,mBAAS,gBADH;AAENC,iBAAOV,WAAWC,KAAX,CAAiB,6BAAjB;AAFD,SAAD,CADY;AAKnBU,mBAAWP,SALQ;AAMnBA,mBAAWA,SANQ;AAOnBQ,qBAAa,KAPM;AAQnBC,yBAAiB,MARE;AASnBC,yBAAiB,KATE;AAUnBC,mBAAW,KAVQ;AAWnBC,4BAAoB,KAXD;AAYnBC,sBAAcZ;AAZK,OAArB,EAaGa,KAbH;AAcA3B,QAAE,oCAAF,EAAwCJ,EAAxC,CAA2C,OAA3C,EAAoD,YAAY;AAC9DI,UAAE,gBAAF,EAAoBK,IAApB,CAAyB,aAAzB,EAAuC,OAAvC,EAD8D,CACb;AAClD,OAFD;AAGD;;;;;AAIH,IAAIhB,aAAaW,EAAE,uBAAF,CAAjB;AACA,IAAIZ,eAAJ,CAAoBC,UAApB;AACA,IAAIuC,qBAAJ,CAAgBvC,UAAhB;AACA,IAAIwC,sBAAJ,CAAiBxC,UAAjB,E;;;;;;;;;;;;;;;;;;;;;;;;ICzEMwC,Y;AACJ,wBAAYC,QAAZ,EAAqBC,SAArB,EAAgC;AAAA;;AAC9B,SAAKD,QAAL,GAAgBA,QAAhB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,SAAL;AACD;;;;gCAEW;AAAA;;AACV,WAAKF,QAAL,CAAclC,EAAd,CAAiB,OAAjB,EAAyB,2BAAzB,EAAsD;AAAA,eAAO,MAAKqC,WAAL,CAAiBnC,KAAjB,CAAP;AAAA,OAAtD;AACA,WAAKgC,QAAL,CAAclC,EAAd,CAAiB,OAAjB,EAAyB,4BAAzB,EAAuD;AAAA,eAAO,MAAKsC,YAAL,CAAkBpC,KAAlB,CAAP;AAAA,OAAvD;AACD;;;gCAEWA,K,EAAO;AACjB,UAAIqC,OAAOnC,EAAEF,MAAMG,aAAR,CAAX;;AAEA,UAAImC,OAAOD,KAAK5B,IAAL,CAAU,MAAV,CAAX;AACA,UAAI8B,UAAUF,KAAK5B,IAAL,CAAU,SAAV,CAAd;AACA,UAAI+B,OAAO,IAAX;;AAEAC,SAAGnC,OAAH,CAAW;AACToC,eAAO/B,WAAWC,KAAX,CAAiB,6BAAjB,EAAgD,EAAC,QAAO0B,IAAR,EAAhD,CADE;AAETK,iBAAShC,WAAWC,KAAX,CAAiB,4BAAjB,EAA+C,EAAC,QAAO0B,IAAR,EAA/C,CAFA;AAGTM,gBAAQjC,WAAWC,KAAX,CAAiB,cAAjB,CAHC;AAITiC,oBAAYlC,WAAWC,KAAX,CAAiB,YAAjB;AAJH,OAAX,EAKGd,EALH,CAKM,IALN,EAKY,YAAM;AAChBI,UAAEM,IAAF,CAAO6B,KAAK5B,IAAL,CAAU,KAAV,CAAP,EAAyB,YAAW;AAClC,cAAIP,EAAE4C,UAAF,CAAaN,KAAKP,SAAlB,CAAJ,EAAkC;AAChCO,iBAAKP,SAAL,CAAec,IAAf,CAAoBP,KAAKR,QAAzB;AACD,WAFD,MAEO;AACLK,iBAAKhC,OAAL,CAAa,kBAAb,EAAiC2C,MAAjC;AACAP,eAAGF,OAAH,CAAW,EAAEU,MAAM,SAAR,EAAmBV,SAAS5B,WAAWC,KAAX,CAAiB,0BAAjB,CAA5B,EAAX;AACAsC,mBAAOC,QAAP,CAAgBC,MAAhB;AACD;AACF,SARD;AASD,OAfD;AAgBD;;;iCAEYpD,K,EAAO;AAClB,UAAIqC,OAAOnC,EAAEF,MAAMG,aAAR,CAAX;AACA,UAAImC,OAAOD,KAAK5B,IAAL,CAAU,MAAV,CAAX;;AAEA,UAAI4C,MAAM,EAAV;AACA,WAAKrB,QAAL,CAAcsB,IAAd,CAAmB,kCAAnB,EAAuDC,IAAvD,CAA4D,YAAU;AACpEF,YAAIG,IAAJ,CAAS,KAAKC,KAAd;AACD,OAFD;;AAIA,UAAIJ,IAAIK,MAAJ,IAAc,CAAlB,EAAqB;AACnBjB,WAAGF,OAAH,CAAW,EAAEU,MAAM,QAAR,EAAkBV,SAAS5B,WAAWC,KAAX,CAAiB,6BAAjB,EAAgD,EAAC,QAAO0B,IAAR,EAAhD,CAA3B,EAAX;AACA;AACD;;AAEDG,SAAGnC,OAAH,CAAW;AACToC,eAAO/B,WAAWC,KAAX,CAAiB,6BAAjB,EAAgD,EAAC,QAAO0B,IAAR,EAAhD,CADE;AAETK,iBAAShC,WAAWC,KAAX,CAAiB,kCAAjB,EAAqD,EAAC,QAAO0B,IAAR,EAArD,CAFA;AAGTM,gBAAQjC,WAAWC,KAAX,CAAiB,cAAjB,CAHC;AAITiC,oBAAYlC,WAAWC,KAAX,CAAiB,YAAjB;AAJH,OAAX,EAKGd,EALH,CAKM,IALN,EAKY,YAAM;AAChBI,UAAEM,IAAF,CAAO6B,KAAK5B,IAAL,CAAU,KAAV,CAAP,EAAyB,EAAC4C,KAAIA,GAAL,EAAzB,EAAoC,YAAW;AAC7CH,iBAAOC,QAAP,CAAgBC,MAAhB;AACD,SAFD;AAGD,OATD;AAUD;;;;;kBAGYrB,Y","file":"app/js/testpaper-manage/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import notify from 'common/notify';\nimport BatchSelect from '../../common/widget/batch-select';\nimport DeleteAction from '../../common/widget/delete-action';\nimport 'store';\nconst TESTPAPER_IMPORT_INTRO = 'TESTPAPER_IMPORT_INTRO';\n\nclass TestpaperManage\n{\n  constructor($container) {\n\n    this.$container = $container;\n    this._initEvent();\n    this._init();\n    if (!store.get(TESTPAPER_IMPORT_INTRO)) {\n      store.set(TESTPAPER_IMPORT_INTRO, true);\n      this.importIntro();\n    }\n\n  }\n\n  _initEvent() {\n    this.$container.on('click','.open-testpaper,.close-testpaper',event=>this.testpaperAction(event));\n\n  }\n\n  _init() {\n\n  }\n\n  testpaperAction(event) {\n    let $target = $(event.currentTarget);\n    let $tr = $target.closest('tr');\n\n    if (!confirm($target.attr('title'))) {\n      return ;\n    }\n\n    $.post($target.data('url'), function(html){\n      notify('success', Translator.trans('testpaper_manage.save_success_hint'));\n      $tr.replaceWith(html);\n    }).error(function(){\n      notify('danger', Translator.trans('testpaper_manage.save_error_hint'));\n    });\n  }\n\n  importIntro() {\n    const doneLabel = Translator.trans('document.import.skip_btn');\n    const customClass = 'import-intro';\n    $('.js-import-btn').attr('data-toggle','toggle'); // 禁止按钮点击效果\n    introJs().setOptions({\n      steps: [{\n        element: '.js-import-btn',\n        intro: Translator.trans('document.import.intro_hover'),\n      }],\n      skipLabel: doneLabel,\n      doneLabel: doneLabel,\n      showBullets: false,\n      tooltipPosition: 'down',\n      showStepNumbers: false,\n      exitOnEsc: false,\n      exitOnOverlayClick: false,\n      tooltipClass: customClass\n    }).start();\n    $(\".introjs-button.introjs-skipbutton\").on('click', function () {\n      $('.js-import-btn').attr('data-toggle','modal'); // 解禁按钮点击行为\n    });\n  }\n\n}\n\nlet $container = $('#quiz-table-container');\nnew TestpaperManage($container);\nnew BatchSelect($container);\nnew DeleteAction($container);\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/testpaper-manage/index.js","class DeleteAction {\n  constructor($element,onSuccess) {\n    this.$element = $element;\n    this.onSuccess = onSuccess;\n    this.initEvent();\n  }\n\n  initEvent() {\n    this.$element.on('click','[data-role=\"item-delete\"]', event=>this._itemDelete(event));\n    this.$element.on('click','[data-role=\"batch-delete\"]', event=>this._batchDelete(event));\n  }\n\n  _itemDelete(event) {\n    let $btn = $(event.currentTarget);\n\n    let name = $btn.data('name');\n    let message = $btn.data('message');\n    let self = this;\n\n    cd.confirm({\n      title: Translator.trans('site.data.delete_title_hint', {'name':name}),\n      content: Translator.trans('site.data.delete_name_hint', {'name':name}),\n      okText: Translator.trans('site.confirm'),\n      cancelText: Translator.trans('site.close'),\n    }).on('ok', () => {\n      $.post($btn.data('url'), function() {\n        if ($.isFunction(self.onSuccess)) {\n          self.onSuccess.call(self.$element);\n        } else {\n          $btn.closest('[data-role=item]').remove();\n          cd.message({ type: 'success', message: Translator.trans('site.delete_success_hint') });\n          window.location.reload();\n        }\n      });\n    });\n  }\n\n  _batchDelete(event) {\n    let $btn = $(event.currentTarget);\n    let name = $btn.data('name');\n\n    let ids = [];\n    this.$element.find('[data-role=\"batch-item\"]:checked').each(function(){\n      ids.push(this.value);\n    });\n\n    if (ids.length == 0) {\n      cd.message({ type: 'danger', message: Translator.trans('site.data.uncheck_name_hint', {'name':name}) });\n      return ;\n    }\n\n    cd.confirm({\n      title: Translator.trans('site.data.delete_title_hint', {'name':name}),\n      content: Translator.trans('site.data.delete_check_name_hint', {'name':name}),\n      okText: Translator.trans('site.confirm'),\n      cancelText: Translator.trans('site.close'),\n    }).on('ok', () => {\n      $.post($btn.data('url'), {ids:ids}, function() {\n        window.location.reload();\n      });\n    });\n  }\n}\n\nexport default DeleteAction;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/widget/delete-action.js"],"sourceRoot":""}