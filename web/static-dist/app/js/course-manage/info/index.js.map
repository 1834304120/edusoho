{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course-manage/info/intro.js","webpack:///./app/Resources/static-src/app/js/course-manage/expiry/expiry.js","webpack:///./app/Resources/static-src/app/js/course-manage/info/index.js","webpack:///./app/Resources/static-src/app/js/courseset-manage/base/tag.js"],"names":["COURSE_BASE_INTRO","Intro","intro","customClass","$intro","$","init","length","store","get","set","introStart","initAllSteps","addClass","initEvent","self","on","event","exit","removeClass","scrollTop","initSingleStep","window","addEventListener","scrollPosition","steps","doneLabel","introJs","setOptions","skipLabel","nextLabel","Translator","trans","prevLabel","showBullets","tooltipPosition","showStepNumbers","exitOnEsc","exitOnOverlayClick","tooltipClass","start","onexit","onchange","_currentStep","console","log","_introItems","before","remove","parent","css","document","arry","element","array","Expiry","checkBoxChange","$date","$days","checkValue","val","removeErrorTip","commonExpiryMode","$expiryDays","$expiryDate","$tip","flag","$deadline","$expiryStartDate","$expiryEndDate","$deadlineType","expiryMode","elementRemoveRules","elementAddRules","getDeadlineEndDateRules","getExpiryDaysRules","getExpiryStartDateRules","getExpiryEndDateRules","$targetItem","target","closest","find","$element","rules","options","required","positive_integer","max_year","messages","date","before_date","after_date","CourseInfo","data","done","liveCapacity","capacity","initValidator","changeAudioMode","initDatetimepicker","setService","taskPriceSetting","setIntroPosition","initCkeditor","expiry","space","introRight","offset","left","onload","click","$item","currentTarget","$values","values","JSON","parse","hasClass","splice","indexOf","push","datetimepicker","format","language","documentElement","lang","minView","autoclose","validator","form","Date","now","initDatePicker","mode","cd","message","type","checked","$form","perfectScrollbar","validate","currentDom","ajax","groups","maxStudentNum","live_capacity","expiryDays","digits","originPrice","positive_price","min","expiryStartDate","expiryEndDate","watchLimit","unsigned_integer","max","summary","ckeditor_maxlength","after","submitSuccess","location","reload","maxlength","trim","course_title","addMethod","value","params","optional","maxCapacity","parseInt","siblings","html","changeStudentNumTip","saveForm","$maxField","$summaryField","summaryLength","uploadUrl","editor","CKEDITOR","replace","allowedContent","toolbar","fileSingleSizeLimit","app","filebrowserImageUploadUrl","getData","submit","$id","$picker","endDate","$priceItem","$li","toggleClass","$input","prop","is","stopPropagation","initenableBuyExpiry","$buyExpiryTime","$enableBuyExpiryTime","$buyable","getBuyExpiryTimeRules","setTimeout","initTags","$tags","select2","url","dataType","quietMillis","term","page","q","page_limit","results","map","item","id","name","initSelection","callback","split","each","formatSelection","formatResult","formatNoMatches","formatSearching","multiple","maximumSelectionSize","placeholder","width","createSearchChoice"],"mappings":"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","file":"app/js/course-manage/info/index.js","sourcesContent":["import 'store';\nimport Cookies from 'js-cookie';\nimport { debounce } from 'app/common/widget/debounce';\nconst COURSE_BASE_INTRO = 'COURSE_BASE_INTRO';\n\nexport default class Intro {\n  constructor() {\n    this.intro = null;\n    this.customClass = 'es-intro-help multistep';\n    this.$intro = $('.js-plan-intro');\n    this.init();\n  }\n\n  init() {\n    if (!this.$intro.length) {\n      return;\n    }\n    if (!store.get(COURSE_BASE_INTRO)) {\n      store.set(COURSE_BASE_INTRO, true);\n      this.introStart(this.initAllSteps());\n      this.$intro.addClass('hidden');\n    }\n    this.initEvent();\n  }\n\n  initEvent() {\n    const self = this;\n    $('body').on('click','.js-skip', (event) => {\n      this.intro.exit();\n      this.$intro.removeClass('hidden');\n    });\n    $('body').on('click', '.js-plan-intro-btn', (event) => {\n      $('html').scrollTop(0);\n      this.introStart(this.initSingleStep());\n    });\n    window.addEventListener('scroll', debounce(self.scrollPosition, 100, true));\n  }\n  \n  introStart(steps) {\n    let doneLabel = '<i class=\"es-icon es-icon-close01\"></i>';\n    this.intro = introJs();\n    this.customClass = steps.length < 2 ? 'es-intro-help js-intro-help es-intro-single' : 'es-intro-help js-intro-help multistep';\n    this.intro.setOptions({\n      steps: steps,\n      skipLabel: doneLabel,\n      nextLabel: Translator.trans('course_set.manage.next_label'),\n      prevLabel: Translator.trans('course_set.manage.prev_label'),\n      doneLabel: doneLabel,\n      showBullets: false,\n      tooltipPosition: 'auto',\n      showStepNumbers: false,\n      exitOnEsc: false,\n      exitOnOverlayClick: false,\n      tooltipClass: this.customClass,\n    });\n    const self = this;\n    this.intro.start().onexit(function() {\n      self.$intro.removeClass('hidden');\n    }).onchange(() => {\n      if (this.intro._currentStep !== 0) {\n        this.intro.setOptions({\n          tooltipClass: 'es-intro-help multistep es-intro-normal-tip',\n        });\n      } else {\n        this.intro.setOptions({\n          tooltipClass: 'es-intro-help multistep',\n        });\n      }\n      console.log(this.intro);\n      if (this.intro._currentStep == (this.intro._introItems.length - 1 ) ) {\n        $('.introjs-nextbutton').before('<a class=\"introjs-button done-button js-skip\">'+Translator.trans('intro.confirm_hint')+'<a/>');\n      } else {\n        $('.js-skip').remove();\n      }\n    });\n    $('.js-intro-help').parent().css('top', '0');\n  }\n\n  scrollPosition() {\n    const $intro = $('.js-plan-intro');\n    const scrollTop = $(document).scrollTop();\n    if (scrollTop > 440) {\n      $intro.addClass('course-manage-intro-float');\n    } else {\n      $intro.removeClass('course-manage-intro-float');\n    }\n  }\n  \n  initAllSteps() {\n    let arry = [\n      {\n        intro: Translator.trans('course_set.manage.img'),\n      },\n      {\n        element: '#step-1',\n        intro: Translator.trans('course_set.manage.couseset_tab'),\n      },\n      {\n        element: '#step-2',\n        intro: Translator.trans('course_set.manage.single_plan'),\n      },\n      {\n        element: '#step-3',\n        intro: Translator.trans('course_set.manage.all_plan'),\n      },\n      {\n        element: '#step-4',\n        intro: Translator.trans('course_set.manage.publish_courseset'),\n      }\n    ];\n  \n    return arry;\n  }\n\n  initSingleStep() {\n    let array = [\n      {\n        intro: Translator.trans('course_set.manage.img'),\n      },\n    ];\n    return array;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/info/intro.js","export default class Expiry {\n  constructor() {\n    this.init();\n  }\n  \n  init() {\n    this.checkBoxChange();\n  }\n  \n  checkBoxChange() {\n    // 截止日期，有效天数\n    $('input[name=\"deadlineType\"]').on('change', (event) => {\n      const $date = $('#deadlineType-date');\n      const $days = $('#deadlineType-days');\n      const checkValue = $('input[name=\"deadlineType\"]:checked').val();\n      this.removeErrorTip(event);\n      if (checkValue === 'end_date') {\n        $date.removeClass('hidden');\n        $days.addClass('hidden');\n      } else {\n        $date.addClass('hidden');\n        $days.removeClass('hidden');\n      }\n      this.commonExpiryMode(true);\n    });\n  \n    // 有效期的选项\n    $('input[name=\"expiryMode\"]').on('change', (event) => {\n      const $expiryDays = $('#expiry-days');\n      const $expiryDate = $('#expiry-date');\n      const checkValue = $('input[name=\"expiryMode\"]:checked').val();\n      this.removeErrorTip(event);\n      const $tip = $('.js-expiry-tip');\n      if (checkValue === 'date') {\n        $expiryDays.addClass('hidden');\n        $expiryDate.removeClass('hidden');\n        $tip.removeClass('ml0');\n      } else if (checkValue === 'days') {\n        $expiryDate.addClass('hidden');\n        $expiryDays.removeClass('hidden');\n        $tip.removeClass('ml0');\n      } else {\n        $expiryDate.addClass('hidden');\n        $expiryDays.addClass('hidden');\n        $tip.addClass('ml0');\n      }\n      this.commonExpiryMode(true);\n    });\n  }\n  \n  commonExpiryMode(flag) {\n    let $deadline = $('[name=\"deadline\"]');\n    let $expiryDays = $('[name=\"expiryDays\"]');\n    let $expiryStartDate = $('[name=\"expiryStartDate\"]');\n    let $expiryEndDate = $('[name=\"expiryEndDate\"]');\n    let $deadlineType = $('[name=\"deadlineType\"]:checked');\n    let expiryMode = $('[name=\"expiryMode\"]:checked').val();\n    this.elementRemoveRules($deadline);\n    this.elementRemoveRules($expiryDays);\n    this.elementRemoveRules($expiryStartDate);\n    this.elementRemoveRules($expiryEndDate);\n  \n    switch (expiryMode) {\n    case 'days':\n      if ($deadlineType.val() === 'end_date') {\n        if (flag) {\n          $deadline.on('focus', () => {\n            this.elementAddRules($deadline, this.getDeadlineEndDateRules());\n          });\n        } else {\n          this.elementAddRules($deadline, this.getDeadlineEndDateRules());\n        }\n        return;\n      }\n      if (flag) {\n        $expiryDays.on('focus', () => {\n          this.elementAddRules($expiryDays, this.getExpiryDaysRules());\n        });\n      } else {\n        this.elementAddRules($expiryDays, this.getExpiryDaysRules());\n      }\n      break;\n    case 'date':\n      if (flag) {\n        $expiryStartDate.on('focus', () => {\n          this.elementAddRules($expiryStartDate, this.getExpiryStartDateRules());\n        });\n        $expiryEndDate.on('focus', () => {\n          this.elementAddRules($expiryEndDate, this.getExpiryEndDateRules());\n        });\n      } else {\n        this.elementAddRules($expiryStartDate, this.getExpiryStartDateRules());\n        this.elementAddRules($expiryEndDate, this.getExpiryEndDateRules());\n      }\n      break;\n    default:\n      break;\n    }\n  }\n  \n  removeErrorTip(event) {\n    const $targetItem = $(event.target).closest('.form-group');\n    $targetItem.removeClass('has-error');\n    $targetItem.find('.js-expiry-input').removeClass('form-control-error');\n    $('.jq-validate-error').remove();\n  }\n  \n  // 添加验证规则\n  elementRemoveRules($element) {\n    $element.rules('remove');\n  }\n  \n  // 移除验证规则\n  elementAddRules($element, options) {\n    $element.rules('add', options);\n  }\n  \n  \n  // 有效期天数\n  getExpiryDaysRules() {\n    return {\n      required: true,\n      positive_integer: true,\n      max_year: true,\n      messages: {\n        required: Translator.trans(Translator.trans('course.manage.expiry_days_error_hint'))\n      }\n    };\n  }\n  \n  // 开始日期\n  getExpiryStartDateRules() {\n    return {\n      required: true,\n      date: true,\n      before_date: '#expiryEndDate',\n      messages: {\n        required: Translator.trans('course.manage.expiry_start_date_error_hint')\n      }\n    };\n  }\n  \n  // 结束日期 \n  getExpiryEndDateRules() {\n    return {\n      required: true,\n      date: true,\n      after_date: '#expiryStartDate',\n      messages: {\n        required: Translator.trans('course.manage.expiry_end_date_error_hint')\n      }\n    };\n  }\n  \n  // 截止日期\n  getDeadlineEndDateRules() {\n    return {\n      required: true,\n      date: true,\n      messages: {\n        required: Translator.trans('course.manage.deadline_end_date_error_hint')\n      }\n    };\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/expiry/expiry.js","import Intro from './intro';\nimport Expiry from 'app/js/course-manage/expiry/expiry';\nimport { initTags } from 'app/js/courseset-manage/base/tag';\n\nclass CourseInfo {\n  constructor() {\n    if ($('#maxStudentNum-field').length > 0) {\n      $.get($('#maxStudentNum-field').data('liveCapacityUrl')).done((liveCapacity) => {\n        $('#maxStudentNum-field').data('liveCapacity', liveCapacity.capacity);\n      });\n    }\n    this.initValidator();\n    this.checkBoxChange();\n    this.changeAudioMode();\n    this.initDatetimepicker();\n    this.setService();\n    this.taskPriceSetting();\n    this.setIntroPosition();\n    this.initCkeditor();\n    this.expiry = new Expiry();\n  }\n\n  setIntroPosition() {\n    const space = 44;\n    const introRight = $('.js-course-manage-info').offset().left + space;\n    window.onload = () => {\n      $('.js-plan-intro').css('right', `${introRight}px`).removeClass('hidden');\n    };\n  }\n\n  setService() {\n    $('.js-service-item').click(function (event) {\n      let $item = $(event.currentTarget);\n      let $values = $('#course_services').val();\n      let values;\n      if (!$values) {\n        values = [];\n      } else {\n        values = JSON.parse($values);\n      }\n\n      if ($item.hasClass('service-primary-item')) {\n        $item.removeClass('service-primary-item');\n        values.splice(values.indexOf($item.data('code')), 1);\n      } else {\n        $item.addClass('service-primary-item');\n        values.push($item.data('code'));\n      }\n      \n      $('#course_services').val(JSON.stringify(values));\n    });\n  }\n\n  initDatetimepicker() {\n    $('input[name=\"buyExpiryTime\"]').datetimepicker({\n      format: 'yyyy-mm-dd',\n      language: document.documentElement.lang,\n      minView: 2, //month\n      autoclose: true,\n    }).on('hide', () => {\n      this.validator && this.validator.form();\n    });\n    $('input[name=\"buyExpiryTime\"]').datetimepicker('setStartDate', new Date(Date.now()));\n    $('input[name=\"buyExpiryTime\"]').datetimepicker('setEndDate', new Date(Date.now() + 86400 * 365 * 10 * 1000));\n\n    this.initDatePicker('#expiryStartDate');\n    this.initDatePicker('#expiryEndDate');\n    this.initDatePicker('#deadline');\n  }\n\n  changeAudioMode() {\n    $('#audio-modal-id').on('change', 'input[name=\\'enableAudio\\']', function(){\n      let mode = $('#course-audio-mode').data('value');\n      if (mode == 'notAllowed') {\n        cd.message({ type: 'info', message: Translator.trans('course.audio.enable.biz.user') });\n        $('[name=\\'enableAudio\\']')[1].checked = true;\n        $('[name=\\'enableAudio\\']')[0].checked = false;\n      }\n    });\n  }\n\n  initValidator() {\n    let $form = $('#course-info-form');\n    $('.js-task-price-setting').perfectScrollbar();\n    this.validator = $form.validate({\n      currentDom: '#course-submit',\n      ajax: true,\n      groups: {\n        date: 'expiryStartDate expiryEndDate'\n      },\n      rules: {\n\n        maxStudentNum: {\n          required: true,\n          live_capacity: true,\n          positive_integer: true\n        },\n        expiryDays: {\n          required: () => {\n            return $('input[name=\"expiryMode\"]:checked').val() != 'date';\n          },\n          digits: true,\n          max_year: true\n        },\n        originPrice: {\n          required: true,\n          positive_price: true,\n          min: 0\n        },\n        expiryStartDate: {\n          required: () => {\n            return $('input[name=\"expiryMode\"]:checked').val() == 'date';\n          },\n          date: true,\n          before_date: '#expiryEndDate'\n        },\n        expiryEndDate: {\n          required: () => {\n            return $('input[name=\"expiryMode\"]:checked').val() == 'date';\n          },\n          date: true,\n          after_date: '#expiryStartDate'\n        },\n        watchLimit:{\n          unsigned_integer:true,\n          max:10000,\n        },\n        summary: {\n          ckeditor_maxlength: 10000,\n        },\n      },\n      messages: {\n        originPrice: Translator.trans('validate_old.positive_currency.message'),\n        maxStudentNum: {\n          required: Translator.trans('course.manage.max_student_num_error_hint')\n        },\n        expiryDays: {\n          required: Translator.trans('course.manage.deadline_end_date_error_hint'),\n        },\n        expiryStartDate: {\n          required: Translator.trans('course.manage.expiry_start_date_error_hint'),\n          before: Translator.trans('course.manage.expiry_days_error_hint')\n        },\n        expiryEndDate: {\n          required: Translator.trans('course.manage.expiry_end_date_error_hint'),\n          after: Translator.trans('course.manage.expiry_start_date_error_hint')\n        }\n      },\n      submitSuccess: (data) => {\n        cd.message({ type: 'success', message: Translator.trans('site.save_success_hint') });\n        window.location.reload();\n      }\n    });\n\n    if ($('.js-course-title').length) {\n      $('.js-course-title').rules('add', {\n        required: true,\n        maxlength: 10,\n        trim: true,\n        course_title: true,\n      });\n      $('.js-course-subtitle').rules('add', {\n        maxlength: 30\n      });\n    }\n    if ($('.js-courseset-title').length) {\n      $('.js-courseset-title').rules('add', {\n        required: true,\n        maxlength: 60,\n        trim: true,\n        course_title: true,\n      });\n      $('.js-courseset-subtitle').rules('add', {\n        maxlength: 50\n      });\n    }\n\n\n    $.validator.addMethod(\n      'before',\n      function (value, element, params) {\n        if ($('input[name=\"expiryMode\"]:checked').val() !== 'date') {\n          return true;\n        }\n        return !value || $(params).val() > value;\n      },\n      Translator.trans('course.manage.expiry_end_date_error_hint')\n    );\n\n    $.validator.addMethod(\n      'after',\n      function (value, element, params) {\n        if ($('input[name=\"expiryMode\"]:checked').val() !== 'date') {\n          return true;\n        }\n        return !value || $(params).val() < value;\n      },\n      Translator.trans('course.manage.expiry_start_date_error_hint')\n    );\n\n    $.validator.addMethod('max_year', function (value, element) {\n      return this.optional(element) || value < 100000;\n    }, Translator.trans('course.manage.max_year_error_hint'));\n\n    $.validator.addMethod('live_capacity', function (value, element) {\n      const maxCapacity = parseInt($(element).data('liveCapacity'));\n      if (value > maxCapacity) {\n        const message = Translator.trans('course.manage.max_capacity_hint', { capacity: maxCapacity });\n        $(element).parent().siblings('.js-course-rule').find('p').html(message);\n      } else {\n        $(element).parent().siblings('.js-course-rule').find('p').html('');\n      }\n\n      return true;\n    });\n\n    if ($('#tags').length) {\n      initTags();\n    }\n\n    this.changeStudentNumTip();\n\n    this.saveForm();\n  }\n\n  changeStudentNumTip() {\n    const $maxField = $('#maxStudentNum-field');\n    if ($maxField.length > 0) {\n      $maxField.on('blur', () => {\n        if (!this.validator.element($maxField)) {\n          $maxField.parent().siblings('.js-course-rule').find('p').html('');\n        }\n      });\n    }\n  }\n\n  initCkeditor() {\n    const $summaryField = $('#courseset-summary-field');\n    const summaryLength = $summaryField.length;\n    const uploadUrl = $summaryField.data('imageUploadUrl');\n    if (!summaryLength) {\n      return;\n    }\n    let self = this;\n    self.editor = CKEDITOR.replace('summary', {\n      allowedContent: true,\n      toolbar: 'Detail',\n      fileSingleSizeLimit: app.fileSingleSizeLimit,\n      filebrowserImageUploadUrl: uploadUrl\n    });\n\n    self.editor.on('blur', () => {\n      $summaryField.val(self.editor.getData());\n    });\n  }\n\n\n  saveForm() {\n    $('#course-submit').on('click', (event) => {\n      this.expiry.commonExpiryMode();\n      const $summaryField = $('#courseset-summary-field');\n      if ($summaryField.length) {\n        $summaryField.val(this.editor.getData());\n      }\n      if (this.validator.form()) {\n        $('#course-info-form').submit();\n      }\n    });\n  }\n\n  initDatePicker($id) {\n    let $picker = $($id);\n    $picker.datetimepicker({\n      format: 'yyyy-mm-dd',\n      language: document.documentElement.lang,\n      minView: 2, //month\n      autoclose: true,\n      endDate: new Date(Date.now() + 86400 * 365 * 10 * 1000)\n    }).on('hide', () => {\n      this.validator && this.validator.element($picker);\n    });\n    $picker.datetimepicker('setStartDate', new Date());\n  }\n\n  taskPriceSetting() {\n    const $priceItem = $('.js-task-price-setting');\n    $priceItem.on('click', 'li', (event) => {\n      const $li = $(event.currentTarget);\n      $li.toggleClass('open');\n      const $input = $li.find('input');\n      $input.prop('checked', !$input.is(':checked'));\n    });\n\n    $priceItem.on('click', 'input', (event) => {\n      event.stopPropagation();\n      const $input = $(event.target);\n      $input.closest('li').toggleClass('open');\n    });\n  }\n\n\n  checkBoxChange() {\n    $('input[name=\"buyable\"]').on('change',  (event)=> {\n      if ($('input[name=\"buyable\"]:checked').val() == 0) {\n        $('.js-course-add-close-show').removeClass('hidden');\n        $('.js-course-add-open-show').addClass('hidden');\n      } else {\n        $('.js-course-add-close-show').addClass('hidden');\n        $('.js-course-add-open-show').removeClass('hidden');\n      }\n      this.initenableBuyExpiry();\n    });\n\n    $('input[name=\"enableBuyExpiryTime\"]').on('change', (event) => {\n      const $buyExpiryTime = $('#buyExpiryTime');\n      if ($('input[name=\"enableBuyExpiryTime\"]:checked').val() == 0) {\n        $buyExpiryTime.addClass('hidden');\n      } else {\n        $buyExpiryTime.removeClass('hidden');\n      }\n      this.initenableBuyExpiry();\n    });\n\n    $('input[name=\"expiryDays\"]').on('blur', (event) => {\n      this.validator.element($(event.target));\n    });\n\n  }\n\n  elementRemoveRules($element) {\n    $element.rules('remove');\n  }\n\n  elementAddRules($element, options) {\n    $element.rules('add', options);\n  }\n\n  initenableBuyExpiry() {\n    let $enableBuyExpiryTime = $('[name=\"enableBuyExpiryTime\"]:checked');\n    let $buyable = $('[name=\"buyable\"]:checked');\n    let $buyExpiryTime = $('[name=\"buyExpiryTime\"]');\n    if ($buyable.val() == 1 && $enableBuyExpiryTime.val() == 1) {\n      this.elementAddRules($buyExpiryTime, this.getBuyExpiryTimeRules());\n    } else {\n      this.elementRemoveRules($buyExpiryTime);\n      $enableBuyExpiryTime.closest('.form-group').removeClass('has-error');\n      $buyExpiryTime.removeClass('form-control-error');\n      $('.jq-validate-error').remove();\n    }\n  }\n\n  getBuyExpiryTimeRules() {\n    return {\n      required: true,\n      messages: {\n        required: Translator.trans('course.manage.buy_expiry_time_required_error_hint')\n      }\n    };\n  }\n}\n\nnew CourseInfo();\n\nsetTimeout(function() {\n  new Intro();\n}, 500);\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course-manage/info/index.js","export const initTags = () => {\n  const $tags = $('#tags');\n  $tags.select2({\n    ajax: {\n      url: $tags.data('url'),\n      dataType: 'json',\n      quietMillis: 500,\n      data (term, page) {\n        return {\n          q: term,\n          page_limit: 10\n        };\n      },\n      results (data) {\n        console.log(data);\n        return {\n          results: data.map((item) => {\n            return { id: item.name, name: item.name };\n          })\n        };\n      }\n    },\n    initSelection (element, callback) {\n      const data = [];\n      $(element.val().split(',')).each(function () {\n        data.push({\n          id: this,\n          name: this\n        });\n      });\n      callback(data);\n    },\n    formatSelection (item) {\n      return item.name;\n    },\n    formatResult (item) {\n      return item.name;\n    },\n    formatNoMatches: function() {\n      return Translator.trans('validate.tag_required_not_found_hint');\n    },\n    formatSearching: function() {\n      return Translator.trans('site.searching_hint');\n    },\n    multiple: true,\n    maximumSelectionSize: 20,\n    placeholder: Translator.trans('course_set.manage.tag_required_hint'),\n    width: 'off',\n    createSearchChoice () {\n      return null;\n    }\n  });\n};\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/courseset-manage/base/tag.js"],"sourceRoot":""}