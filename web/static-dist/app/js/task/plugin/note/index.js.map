{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/task/plugin/save-redmine.js","webpack:///./app/Resources/static-src/app/js/task/plugin/note/index.js"],"names":["$savedMessage","$","saveRedmineLoading","html","Translator","trans","show","saveRedmineSuccess","date","Date","Format","setTimeout","hide","heigth","height","$content","lastNoteContent","editor","CKEDITOR","replace","toolbar","fileSingleSizeLimit","app","filebrowserImageUploadUrl","data","allowedContent","on","val","getData","click","event","$btn","preventDefault","saveNote","setInterval","trim","$form","serializeArray","value","attr","post","then","response","removeAttr"],"mappings":";;;;;AAAA,wB;;;;;;;;;;;;;;;ACAA;;AACA,IAAIA,gBAAgBC,EAAE,2BAAF,CAApB;AACA;AACA,IAAMC,qBAAqB,SAArBA,kBAAqB,GAAM;AAC/BF,gBAAcG,IAAd,CAAmBC,WAAWC,KAAX,CAAiB,+BAAjB,CAAnB,EAAsEC,IAAtE;AACD,CAFD;;AAIA,IAAMC,qBAAqB,SAArBA,kBAAqB,GAAM;AAC/B,MAAIC,OAAO,IAAIC,IAAJ,GAAWC,MAAX,CAAkB,qBAAlB,CAAX;AACAV,gBAAcG,IAAd,CAAmBC,WAAWC,KAAX,CAAiB,uCAAjB,EAA0D,EAACG,MAAMA,IAAP,EAA1D,CAAnB,EAA4FF,IAA5F;AACAK,aAAW,YAAM;AACfX,kBAAcY,IAAd;AACD,GAFD,EAEG,IAFH;AAGD,CAND;;QASEV,kB,GAAAA,kB;QACAK,kB,GAAAA,kB;;;;;;;;;;ACjBF;;;;AACA;;;;AACA,IAAIM,SAAUZ,EAAE,kBAAF,EAAsBa,MAAtB,KAAiC,GAA/C;AACA,IAAIC,WAAWd,EAAE,qBAAF,CAAf;AACA,IAAIe,wBAAJ;AACA,IAAIC,SAASC,SAASC,OAAT,CAAiB,oBAAjB,EAAuC;AAClDC,WAAS,SADyC;AAElDC,uBAAqBC,IAAID,mBAFyB;AAGlDE,6BAA2BR,SAASS,IAAT,CAAc,gBAAd,CAHuB;AAIlDC,kBAAgB,IAJkC;AAKlDX,UAAQD,SAAS,GAAT,GAAe,GAAf,GAAqBA;AALqB,CAAvC,CAAb;;AAQAI,OAAOS,EAAP,CAAU,QAAV,EAAoB,YAAM;AACxBX,WAASY,GAAT,CAAaV,OAAOW,OAAP,EAAb;AACD,CAFD;;AAIA3B,EAAE,gBAAF,EAAoB4B,KAApB,CAA0B,UAAUC,KAAV,EAAiB;AACzC,MAAIC,OAAO9B,EAAE,IAAF,CAAX;AACA6B,QAAME,cAAN;AACAC,WAASF,IAAT;AACD,CAJD;;AAMAG,YAAYD,QAAZ,EAAqB,KAArB;;AAEA,SAASA,QAAT,GAA+B;AAAA,MAAbF,IAAa,uEAAN,IAAM;;AAC7B,MAAG,CAAC9B,EAAEkC,IAAF,CAAOpB,SAASY,GAAT,EAAP,CAAJ,EAA4B;AAC1BI,WAAO,sBAAO,QAAP,EAAiB3B,WAAWC,KAAX,CAAiB,2CAAjB,CAAjB,CAAP,GAAyF,EAAzF;AACA;AACD;AACD,MAAI+B,QAAQnC,EAAE,wBAAF,CAAZ;AACA,MAAIuB,OAAOY,MAAMC,cAAN,EAAX;AACA,MAAGrB,oBAAoBQ,KAAK,CAAL,EAAQc,KAA/B,EAAsC;AACpC;AACD;AACD;AACAP,SAAOA,KAAKQ,IAAL,CAAU,UAAV,EAAsB,UAAtB,CAAP,GAA0C,EAA1C;AACAtC,IAAEuC,IAAF,CAAOJ,MAAMG,IAAN,CAAW,QAAX,CAAP,EAA6Bf,IAA7B,EACGiB,IADH,CACQ,UAACC,QAAD,EAAc;AAClB;AACA,QAAGX,IAAH,EAAS;AACPA,WAAKY,UAAL,CAAgB,UAAhB;AACD;AACD3B,sBAAkBQ,KAAK,CAAL,EAAQc,KAA1B;AACD,GAPH;AAQD,C","file":"app/js/task/plugin/note/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import { dateFormat } from 'app/common/unit';\nlet $savedMessage = $('[data-role=saved-message]');\ndateFormat();\nconst saveRedmineLoading = () => {\n  $savedMessage.html(Translator.trans('task.plugin_redmine_save_hint')).show();\n};\n\nconst saveRedmineSuccess = () => {\n  let date = new Date().Format('yyyy-MM-dd hh:mm:ss');\n  $savedMessage.html(Translator.trans('task.plugin_redmine_save_success_hint', {date: date})).show();\n  setTimeout(() => {\n    $savedMessage.hide();\n  }, 3000);\n};\n\nexport {\n  saveRedmineLoading,\n  saveRedmineSuccess,\n};\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/task/plugin/save-redmine.js","import notify from 'common/notify';\nimport { saveRedmineLoading, saveRedmineSuccess } from '../save-redmine';\nlet heigth = ($('.js-sidebar-pane').height() - 175);\nlet $content = $('#note-content-field');\nlet lastNoteContent;\nlet editor = CKEDITOR.replace('note-content-field', {\n  toolbar: 'Minimal',\n  fileSingleSizeLimit: app.fileSingleSizeLimit,\n  filebrowserImageUploadUrl: $content.data('imageUploadUrl'),\n  allowedContent: true,\n  height: heigth < 300 ? 200 : heigth,\n});\n\neditor.on('change', () => {\n  $content.val(editor.getData());\n});\n\n$('#note-save-btn').click(function (event) {\n  let $btn = $(this);\n  event.preventDefault();\n  saveNote($btn);\n});\n\nsetInterval(saveNote,30000);\n\nfunction saveNote($btn = null) {\n  if(!$.trim($content.val())) {\n    $btn ? notify('danger', Translator.trans('course.notebook.empty_note_content_notice')) : '';\n    return;\n  }\n  let $form = $('#task-note-plugin-form');\n  let data = $form.serializeArray();\n  if(lastNoteContent === data[0].value) {\n    return;\n  }\n  saveRedmineLoading();\n  $btn ? $btn.attr('disabled', 'disabled'): '';\n  $.post($form.attr('action'), data)\n    .then((response) => {\n      saveRedmineSuccess();\n      if($btn) {\n        $btn.removeAttr('disabled');\n      }\n      lastNoteContent = data[0].value;\n    });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/task/plugin/note/index.js"],"sourceRoot":""}