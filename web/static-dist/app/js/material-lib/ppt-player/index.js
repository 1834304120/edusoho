webpackJsonp(["app/js/material-lib/ppt-player/index"],{"270a65613fa7b9d98ab9":function(e,t,a){"use strict";var n=a("f3c7e4fbf91afda92bf3"),s=function(e){return e&&e.__esModule?e:{default:e}}(n),i=$("#ppt-player"),l=i.data("params");new s.default({element:"#ppt-player",slides:l.images})},f3c7e4fbf91afda92bf3:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a("cd078759ac479d74803f"),i=n(s),l=a("7ab4a89ebadbfdecc2bf"),o=n(l),r=a("4602c3f5fe7ad9e3e91d"),c=n(r),d=a("1ff717687cc04d94af8f"),f=n(d),u=a("3b1883fc74dc0f9509af"),p=n(u),h=a("63fff8fb24f3bd1f61cd"),g=n(h),v=a(!function(){var e=new Error('Cannot find module "es-screenfull"');throw e.code="MODULE_NOT_FOUND",e}()),A=n(v),_=function(e){function t(e){var a=e.element,n=e.slides,s=e.watermark;(0,o.default)(this,t);var l=(0,f.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return l.element=$(a),l.slides=n||[],l.watermark=s||"",l._KEY_ACTION_MAP={37:l._onPrev,39:l._onNext,38:l._onLast,40:l._onFirst},l.total=l.slides.length,l._page=0,l.placeholder="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC",l._init(),l}return(0,p.default)(t,e),(0,c.default)(t,[{key:"_render",value:function(){this.element.html('\n      <div class="slide-player">\n        <div class="slide-player-body loading-background"></div>\n        <div class="slide-notice">\n          <div class="header">{{ \'site.data_last_picture\'|trans }}\n            <button type="button" class="close">Ã—</button>\n          </div>\n        </div>\n      \n        <div class="slide-player-control clearfix">\n          <a href="javascript:" class="goto-first">\n            <span class="glyphicon glyphicon-step-backward"></span>\n          </a>\n          <a href="javascript:" class="goto-prev">\n            <span class="glyphicon glyphicon-chevron-left"></span>\n          </a>\n          <a href="javascript:" class="goto-next">\n            <span class="glyphicon glyphicon-chevron-right"></span>\n          </a>\n          <a href="javascript:" class="goto-last">\n            <span class="glyphicon glyphicon-step-forward"></span>\n          </a>\n          <a href="javascript:" class="fullscreen">\n            <span class="glyphicon glyphicon-fullscreen"></span>\n          </a>\n          <div class="goto-page-input">\n            <input type="text" class="goto-page form-control input-sm" value="1">&nbsp;/&nbsp;\n              <span class="total"></span>\n          </div>\n        </div>\n      </div>'),this.element.find(".total").text(this.total);var e=this.slides.reduce(function(e,t,a){return e+='<img data-src="'+t+'" class="slide" data-page="'+(a+1)+'">'},"");this.element.find(".slide-player-body").html(e),this.watermark&&this.element.append('<div class="slide-player-watermark">'+this.watermark+"</div>")}},{key:"_init",value:function(){this._render(),this._bindEvents(),this._onFirst()}},{key:"_lazyLoad",value:function(e){for(var t=e;t<e+4&&!(t>this.total);t++){var a=this._getSlide(t);a.attr("src")||a.attr("src",a.data("src"))}}},{key:"_getSlide",value:function(e){return this.element.find(".slide-player-body .slide").eq(e-1)}},{key:"_bindEvents",value:function(){var e=this;$(document).on("keydown",function(t){e._KEY_ACTION_MAP[t.keyCode]&&e._KEY_ACTION_MAP[t.keyCode].call(e)}),this.element.on("click",".goto-next",function(t){return e._onNext(t)}),this.element.on("click",".goto-prev",function(t){return e._onPrev(t)}),this.element.on("click",".goto-first",function(t){return e._onFirst(t)}),this.element.on("click",".goto-last",function(t){return e._onLast(t)}),this.element.on("click",".fullscreen",function(t){return e._onFullScreen(t)}),this.element.on("change",".goto-page",function(t){return e._onChangePage(t)});var t=this;this.on("change",function(a){var n=a.current;a.before;n==t.total&&t.emit("end",{page:e.total})})}},{key:"_onNext",value:function(){if(this.page===this.total)return void this.emit("end",{page:this.total});this.page++}},{key:"_onPrev",value:function(){1!=this.page&&this.page--}},{key:"_onFirst",value:function(){this.page=1}},{key:"_onLast",value:function(){this.page=this.total}},{key:"_onFullScreen",value:function(){var e=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(!A.default.enabled)return void(e&&$("#task-content-iframe",parent.document).toggleClass("ios-full-screen"));A.default.isFullscreen?A.default.toggle():A.default.request()}},{key:"_onChangePage",value:function(e){this.page=$(e.target).val()}},{key:"page",get:function(){return this._page},set:function(e){var t=this,a=this.page,n=e;n>this.total&&(this.element.find(".goto-page").val(n),this._page=n),n<1&&(this.element.find(".goto-page").val(a),this._page=a),a&&this.element.find(".slide-player-body .slide").eq(a-1).removeClass("active");var s=this._getSlide(n);s.attr("src")?s.addClass("active"):(s.load(function(){t._page==s.data("page")&&s.addClass("active")}),s.attr("src",s.data("src"))),this._lazyLoad(n),this.element.find(".goto-page").val(n),this._page=n,this.emit("change",{current:n,before:a})}}]),t}(g.default);t.default=_}},["270a65613fa7b9d98ab9"]);