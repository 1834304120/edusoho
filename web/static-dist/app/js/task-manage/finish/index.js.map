{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/task-manage/finish/index.js"],"names":["$selectFinish","$","length","on","children","hide","val","rules","required","positive_integer","messages","Translator","trans","show","$options","data","trigger","validate","groups","nameGroup","watchTime","css","window","ltc","msg","emit","valid","form","finishType","finishData"],"mappings":";;;;;;;;AAAA,IAAIA,gBAAgBC,EAAE,cAAF,CAApB;AACA,IAAID,cAAcE,MAAlB,EAA0B;AACxBF,gBAAcG,EAAd,CAAiB,QAAjB,EAA0B,YAAW;AACnCF,MAAE,aAAF,EAAiBG,QAAjB,GAA4BC,IAA5B;AACA,QAAIC,MAAML,EAAE,IAAF,EAAQK,GAAR,EAAV;AACA,QAAI,UAAUA,GAAd,EAAmB;AACjBL,QAAE,YAAF,EAAgBM,KAAhB,CAAsB,KAAtB,EAA6B;AAC3BC,kBAAU,IADiB;AAE3BC,0BAAkB,IAFS;AAG3BC,kBAAU;AACRF,oBAAUG,WAAWC,KAAX,CAAiB,kDAAjB;AADF;AAHiB,OAA7B;AAOD,KARD,MAQO;AACLX,QAAE,YAAF,EAAgBM,KAAhB,CAAsB,QAAtB;AACD;;AAED,YAAOD,GAAP;AAEA,WAAK,MAAL;AACEL,UAAE,kBAAF,EAAsBY,IAAtB;AACA,YAAI,CAACZ,EAAE,YAAF,EAAgBK,GAAhB,EAAL,EAA4B;AAC1B,cAAIQ,WAAWb,EAAE,8BAAF,CAAf;AACAA,YAAE,YAAF,EAAgBK,GAAhB,CAAoBQ,SAASC,IAAT,CAAc,OAAd,CAApB;AACAd,YAAE,cAAF,EAAkBK,GAAlB,CAAsBQ,SAASC,IAAT,CAAc,OAAd,CAAtB;AACD;AACD;AACF,WAAK,KAAL;AACE;AACF;AACEf,sBAAcgB,OAAd,CAAsB,cAAtB,EAAsCV,GAAtC;AAbF;AAeD,GA9BD;AA+BD;;AAGD,IAAIW,WAAWhB,EAAE,aAAF,EAAiBgB,QAAjB,CAA0B;AACvCC,UAAQ;AACNC,eAAW;AADL,GAD+B;AAIvCZ,SAAO;AACLa,eAAW;AACTX,wBAAkB;AADT;AADN;AAJgC,CAA1B,CAAf;;AAWA,IAAIR,EAAE,kBAAF,EAAsBoB,GAAtB,CAA0B,SAA1B,KAAwC,MAA5C,EAAoD;AAClDpB,IAAE,YAAF,EAAgBM,KAAhB,CAAsB,KAAtB,EAA6B;AAC3BC,cAAU,IADiB;AAE3BC,sBAAkB,IAFS;AAG3BC,cAAU;AACRF,gBAAUG,WAAWC,KAAX,CAAiB,kDAAjB;AADF;AAHiB,GAA7B;AAOD;;AAEDX,EAAE,YAAF,EAAgBE,EAAhB,CAAmB,QAAnB,EAA6B,YAAW;AACtCF,IAAE,cAAF,EAAkBK,GAAlB,CAAsBL,EAAE,IAAF,EAAQK,GAAR,EAAtB;AACD,CAFD;;AAIAgB,OAAOC,GAAP,CAAWpB,EAAX,CAAc,cAAd,EAA8B,UAASqB,GAAT,EAAa;AACzCF,SAAOC,GAAP,CAAWE,IAAX,CAAgB,iBAAhB,EAAmC,EAACC,OAAOT,SAASU,IAAT,EAAR,EAAyBZ,MAAM,EAACa,YAAY3B,EAAE,cAAF,EAAkBK,GAAlB,EAAb,EAAsCuB,YAAY5B,EAAE,cAAF,EAAkBK,GAAlB,EAAlD,EAA/B,EAAnC;AACD,CAFD,E","file":"app/js/task-manage/finish/index.js","sourcesContent":["let $selectFinish = $('#finish-type');\nif ($selectFinish.length) {\n  $selectFinish.on('change',function() {\n    $('#conditions').children().hide();\n    let val = $(this).val();\n    if ('time' == val) {\n      $('#watchTime').rules('add', {\n        required: true,\n        positive_integer: true,\n        messages: {\n          required: Translator.trans('activity.video_manage.length_required_error_hint')\n        }\n      });\n    } else {\n      $('#watchTime').rules('remove');\n    }\n    \n    switch(val)\n    {\n    case 'time':\n      $('#conditions-time').show();\n      if (!$('#watchTime').val()) {\n        let $options = $('#finish-type option:selected');\n        $('#watchTime').val($options.data('value'));\n        $('#finish-data').val($options.data('value'));\n      }\n      break;\n    case 'end':\n      break;\n    default:\n      $selectFinish.trigger('selectChange', val);\n    }\n  });\n}\n\n\nlet validate = $('#step3-form').validate({\n  groups: {\n    nameGroup: 'minute second'\n  },\n  rules: {\n    watchTime: {\n      positive_integer: true,\n    },\n  }\n});\n\nif ($('#conditions-time').css('display') != 'none') {\n  $('#watchTime').rules('add', {\n    required: true,\n    positive_integer: true,\n    messages: {\n      required: Translator.trans('activity.video_manage.length_required_error_hint')\n    }\n  });\n}\n\n$('#watchTime').on('change', function() {\n  $('#finish-data').val($(this).val());\n});\n\nwindow.ltc.on('getCondition', function(msg){\n  window.ltc.emit('returnCondition', {valid: validate.form() ,data: {finishType: $('#finish-type').val(), finishData: $('#finish-data').val()} });\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/task-manage/finish/index.js"],"sourceRoot":""}