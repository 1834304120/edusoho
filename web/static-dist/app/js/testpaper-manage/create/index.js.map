{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/testpaper-manage/create/index.js"],"names":["TestpaperForm","$form","$description","find","validator","difficultySlider","_initEvent","_initValidate","_initSortList","scoreSlider","on","_submit","event","changeMode","changeRange","changeCount","passScore","score","document","getElementById","option","start","connect","tooltips","step","range","updateOptions","noUiSlider","create","values","handle","$","text","toFixed","parseInt","attr","Translator","trans","tooltip","html","$this","currentTarget","val","removeClass","initDifficultySlider","addClass","sliders","margin","serialization","resolution","simplePercentage","normalPercentage","difficultyPercentage","editor","CKEDITOR","replace","toolbar","fileSingleSizeLimit","app","filebrowserImageUploadUrl","data","height","getData","form","num","each","index","item","validate","rules","name","required","maxlength","trim","description","limitedTime","min","max","digits","mode","questioncount","messages","length","self","es_score","_initEditor","element","itemSelector","ajax","$target","status","questionNum","Number","post","serialize","result","button","submit","SelectLinkage","change","url","checkQuestionNum","courseId","lessonId","i","n"],"mappings":"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","file":"app/js/testpaper-manage/create/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import sortList from 'common/sortable';\nimport { delHtmlTag } from 'common/utils';\nimport SelectLinkage from 'app/js/question-manage/widget/select-linkage.js';\nimport notify from 'common/notify';\n\nclass TestpaperForm {\n  constructor($form) {\n    this.$form = $form;\n    this.$description = this.$form.find('[name=\"description\"]');\n    this.validator = null;\n    this.difficultySlider = null;\n    this._initEvent();\n    this._initValidate();\n    this._initSortList();\n    this.scoreSlider = null;\n  }\n\n  _initEvent() {\n    this.$form.on('click', '[data-role=\"submit\"]', event => this._submit(event));\n    this.$form.on('click', '[name=\"mode\"]', event => this.changeMode(event));\n    this.$form.on('click', '[name=\"range\"]', event => this.changeRange(event));\n    this.$form.on('blur', '[data-role=\"count\"]', event => this.changeCount(event));\n  }\n\n  initScoreSlider(passScore, score) {\n    let scoreSlider = document.getElementById('score-slider');\n    let option = {\n      start: passScore,\n      connect: [true, false],\n      tooltips: [true],\n      step: 1,\n      range: {\n        'min': 0,\n        'max': score\n      }\n    };\n    if (this.scoreSlider) {\n      this.scoreSlider.updateOptions(option);\n    } else {\n      this.scoreSlider = noUiSlider.create(scoreSlider, option);\n      scoreSlider.noUiSlider.on('update', function (values, handle) {\n        $('.noUi-tooltip').text(`${(values[handle] / score * 100).toFixed(0)}%`);\n        $('.js-passScore').text(parseInt(values[handle]));\n      });\n    }\n    $('.noUi-handle').attr('data-placement', 'top').attr('data-original-title', Translator.trans('activity.testpaper_manage.pass_score_hint', {'passScore' : passScore})).attr('data-container', 'body');\n    $('.noUi-handle').tooltip({ html: true });\n    $('.noUi-tooltip').text(`${(passScore / score * 100).toFixed(0)}%`);\n  }\n\n  changeMode(event) {\n    let $this = $(event.currentTarget);\n    if ($this.val() == 'difficulty') {\n      this.$form.find('#difficulty-form-group').removeClass('hidden');\n      this.initDifficultySlider();\n    } else {\n      this.$form.find('#difficulty-form-group').addClass('hidden');\n    }\n  }\n\n  changeRange(event) {\n    let $this = $(event.currentTarget);\n    ($this.val() == 'course') ? this.$form.find('#testpaper-range-selects').addClass('hidden') : this.$form.find('#testpaper-range-selects').removeClass('hidden');\n  }\n\n  initDifficultySlider() {\n    if (!this.difficultySlider) {\n      let sliders = document.getElementById('difficulty-percentage-slider');\n      this.difficultySlider = noUiSlider.create(sliders, {\n        start: [30, 70],\n        margin: 30,\n        range: {\n          'min': 0,\n          'max': 100\n        },\n        step: 1,\n        connect: [true, true, true],\n        serialization: {\n          resolution: 1\n        },\n      });\n      sliders.noUiSlider.on('update', function (values) {\n        let simplePercentage = parseInt(values[0]),\n          normalPercentage = values[1] - values[0],\n          difficultyPercentage = 100 - values[1];\n        $('.js-simple-percentage-text').html(Translator.trans('activity.testpaper_manage.simple_percentage', {'simplePercentage':simplePercentage}));\n        $('.js-normal-percentage-text').html(Translator.trans('activity.testpaper_manage.normal_percentage', {'normalPercentage':normalPercentage}));\n        $('.js-difficulty-percentage-text').html(Translator.trans('activity.testpaper_manage.difficulty_percentage', {'difficultyPercentage':difficultyPercentage}));\n        $('input[name=\"percentages[simple]\"]').val(simplePercentage);\n        $('input[name=\"percentages[normal]\"]').val(normalPercentage);\n        $('input[name=\"percentages[difficulty]\"]').val(difficultyPercentage);\n      });\n    }\n  }\n\n  _initEditor(validator) {\n    let editor = CKEDITOR.replace(this.$description.attr('id'), {\n      toolbar: 'Simple',\n      fileSingleSizeLimit: app.fileSingleSizeLimit,\n      filebrowserImageUploadUrl: this.$description.data('imageUploadUrl'),\n      height: 100\n    });\n    editor.on('change', () => {\n      this.$description.val(delHtmlTag(editor.getData()));\n    });\n    editor.on('blur', () => {\n      this.$description.val(delHtmlTag(editor.getData()));//fix ie11\n      validator.form();\n    });\n  }\n\n  changeCount() {\n    let num = 0;\n    this.$form.find('[data-role=\"count\"]').each(function (index, item) {\n      num += parseInt($(item).val());\n    });\n    this.$form.find('[name=\"questioncount\"]').val(num > 0 ? num : null);\n  }\n\n  _initValidate() {\n    this.validator = this.$form.validate({\n      rules: {\n        name: {\n          required: true,\n          maxlength: 50,\n          trim: true,\n        },\n        description: {\n          //required: true,\n          maxlength: 500,\n          trim: true,\n        },\n        limitedTime: {\n          min: 0,\n          max: 10000,\n          digits: true\n        },\n        mode: {\n          required: true\n        },\n        range: {\n          required: true\n        },\n        questioncount: {\n          required: true\n        }\n      },\n      messages: {\n        questioncount: Translator.trans('activity.testpaper_manage.question_required_error_hint'),\n        name: {\n          required: Translator.trans('activity.testpaper_manage.input_title_hint'),\n          maxlength: Translator.trans('site.maxlength_hint',{length: 50})\n        },\n        description: {\n          required: Translator.trans('activity.testpaper_manage.input_description_hint'),\n          maxlength: Translator.trans('site.maxlength_hint',{length: 500})\n        },\n        mode: Translator.trans('activity.testpaper_manage.generate_mode_hint'),\n        range: Translator.trans('activity.testpaper_manage.question_scope')\n      }\n    });\n    this.$form.find('.testpaper-question-option-item').each(function () {\n      let self = $(this);\n      self.find('[data-role=\"count\"]').rules('add', {\n        min: 0,\n        max: function () {\n          return parseInt(self.find('[role=\"questionNum\"]').text());\n        },\n        digits: true\n      });\n\n      self.find('[data-role=\"score\"]').rules('add', {\n        min: 0,\n        max: 1000,\n        es_score: true\n      });\n\n      if (self.find('[data-role=\"missScore\"]').length > 0) {\n        self.find('[data-role=\"missScore\"]').rules('add', {\n          min: 0,\n          max: function () {\n            return parseInt(self.find('[data-role=\"score\"]').val());\n          },\n          es_score: true\n        });\n      }\n    });\n    this._initEditor(this.validator);\n  }\n\n  _initSortList() {\n    sortList({\n      element: '#testpaper-question-options',\n      itemSelector: '.testpaper-question-option-item',\n      handle: '.question-type-sort-handler',\n      ajax: false\n    });\n  }\n\n  _submit(event) {\n    let $target = $(event.currentTarget);\n    let status = this.validator.form();\n    let questionNum = 0;\n    this.$form.find('[data-role=\"count\"]').each(function () {\n        let self = $(this);\n        questionNum+=Number(self.val());\n    });\n\n    if (status) {\n        if(questionNum>2000){\n            notify('danger', Translator.trans('activity.testpaper_manage.questions_length_hint'));\n        }else{\n            $.post($target.data('checkUrl'),this.$form.serialize(),result => {\n                if (result.status == 'no') {\n                    $('.js-build-check').html(Translator.trans('activity.testpaper_manage.question_num_error'));\n                } else {\n                    $('.js-build-check').html('');\n\n                    $target.button('loading').addClass('disabled');\n                    this.$form.submit();\n                }\n            });\n        }\n    }\n  }\n}\n\nnew TestpaperForm($('#testpaper-form'));\nnew SelectLinkage($('[name=\"ranges[courseId]\"]'),$('[name=\"ranges[lessonId]\"]'));\n\n$('[name=\"ranges[courseId]\"]').change(function(){\n  let url = $(this).data('checkNumUrl');\n  checkQuestionNum(url);\n});\n\n$('[name=\"ranges[lessonId]\"]').change(function(){\n  let url = $(this).data('checkNumUrl');\n  checkQuestionNum(url);\n});\n\nfunction checkQuestionNum(url) {\n  let courseId = $('[name=\"ranges[courseId]\"]').val();\n  let lessonId = $('[name=\"ranges[lessonId]\"]').val();\n\n  $.post(url,{courseId:courseId, lessonId:lessonId},function(data){\n    $('[role=\"questionNum\"]').text(0);\n\n    $.each(data,function(i,n){\n      $('[type=\\''+i+'\\']').text(n.questionNum);\n    });\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/testpaper-manage/create/index.js"],"sourceRoot":""}