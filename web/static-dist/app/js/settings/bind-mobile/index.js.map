{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/settings/bind-mobile/index.js"],"names":["$form","$","smsSend","$smsCode","drag","length","Drag","limitType","validate","currentDom","ajax","rules","password","required","es_remote","type","mobile","phone","callback","bool","removeAttr","attr","sms_code","unsigned_integer","messages","Translator","trans","submitSuccess","data","message","modal","window","location","reload","submitError","responseJSON","on","token","removeClass","SmsSender","element","url","smsType","captcha","captchaValidated","captchaNum","preSmsSend","error","initDragCaptcha","additionalAction","ackResponse"],"mappings":";;;;;AAAA,wB;;;;;;;;;;ACAA;;;;AACA;;;;AACA;;;;;;AAEA,IAAIA,QAAQC,EAAE,mBAAF,CAAZ;AACA,IAAIC,UAAU,cAAd;AACA,IAAIC,WAAWF,EAAEC,OAAF,CAAf;AACA,IAAIE,OAAOH,EAAE,WAAF,EAAeI,MAAf,GAAwB,IAAIC,cAAJ,CAASL,EAAE,WAAF,CAAT,EAAyBA,EAAE,YAAF,CAAzB,EAA0C;AAC3EM,aAAW;AADgE,CAA1C,CAAxB,GAEN,IAFL;;AAIAP,MAAMQ,QAAN,CAAe;AACbC,cAAY,aADC;AAEbC,QAAM,IAFO;AAGbC,SAAO;AACLC,cAAU;AACRC,gBAAU,IADF;AAERC,iBAAW;AACTC,cAAM;AADG;AAFH,KADL;AAOLC,YAAQ;AACNH,gBAAU,IADJ;AAENI,aAAO,IAFD;AAGNH,iBAAW;AACTC,cAAM,KADG;AAETG,kBAAU,kBAACC,IAAD,EAAU;AAClB,cAAIA,IAAJ,EAAU;AACRhB,qBAASiB,UAAT,CAAoB,UAApB;AACD,WAFD,MAEO;AACLjB,qBAASkB,IAAT,CAAc,UAAd,EAA0B,IAA1B;AACD;AACF;AARQ;AAHL,KAPH;AAqBLC,cAAU;AACRT,gBAAU,IADF;AAERU,wBAAkB,IAFV;AAGRT,iBAAW;AACTC,cAAM;AADG;AAHH;AArBL,GAHM;AAgCbS,YAAU;AACRF,cAAU;AACRT,gBAAUY,WAAWC,KAAX,CAAiB,4BAAjB;AADF;AADF,GAhCG;AAqCbC,eArCa,yBAqCCC,IArCD,EAqCO;AAClB,0BAAO,SAAP,EAAkBH,WAAWC,KAAX,CAAiBE,KAAKC,OAAtB,CAAlB;AACA5B,MAAE,QAAF,EAAY6B,KAAZ,CAAkB,MAAlB;AACAC,WAAOC,QAAP,CAAgBC,MAAhB;AACD,GAzCY;AA0CbC,aA1Ca,uBA0CDN,IA1CC,EA0CK;AAChB,0BAAO,QAAP,EAAkBH,WAAWC,KAAX,CAAiBE,KAAKO,YAAL,CAAkBN,OAAnC,CAAlB;AACD;AA5CY,CAAf;;AA+CA,IAAIzB,IAAJ,EAAU;AACRA,OAAKgC,EAAL,CAAQ,SAAR,EAAmB,UAASC,KAAT,EAAe;AAChClC,aAASmC,WAAT,CAAqB,UAArB,EAAiCjB,IAAjC,CAAsC,UAAtC,EAAkD,KAAlD;AACD,GAFD;AAGD;;AAEDlB,SAASiC,EAAT,CAAY,OAAZ,EAAqB,YAAW;AAC9BjC,WAASkB,IAAT,CAAc,UAAd,EAA0B,IAA1B;AACA,MAAIkB,mBAAJ,CAAc;AACZC,aAAStC,OADG;AAEZuC,SAAKtC,SAASyB,IAAT,CAAc,KAAd,CAFO;AAGZc,aAAS,UAHG;AAIZC,aAAS,IAJG;AAKZC,sBAAkB,IALN;AAMZC,gBAAY,kBANA;AAOZC,gBAAY,sBAAW;AACrB,aAAO,IAAP;AACD,KATW;AAUZC,WAAO,eAASA,MAAT,EAAgB;AACrB3C,WAAK4C,eAAL;AACD,KAZW;AAaZC,sBAAkB,0BAASC,WAAT,EAAsB;AACtC,UAAIA,eAAe,iBAAnB,EAAsC;AACpC/C,iBAASkB,IAAT,CAAc,UAAd,EAA0B,IAA1B;AACApB,UAAE,iBAAF,EAAqBqC,WAArB,CAAiC,QAAjC;AACA,YAAGlC,IAAH,EAAS;AACPA,eAAK4C,eAAL;AACD;AACD,eAAO,IAAP;AACD;AACD,aAAO,KAAP;AACD;AAvBW,GAAd;AAyBD,CA3BD,E","file":"app/js/settings/bind-mobile/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import SmsSender from 'app/common/widget/sms-sender';\nimport notify from 'common/notify';\nimport Drag from 'app/common/drag';\n\nlet $form = $('#bind-mobile-form');\nlet smsSend = '.js-sms-send';\nlet $smsCode = $(smsSend);\nlet drag = $('#drag-btn').length ? new Drag($('#drag-btn'), $('.js-jigsaw'), {\n  limitType: 'web_register'\n}) : null;\n\n$form.validate({\n  currentDom: '#submit-btn',\n  ajax: true,\n  rules: {\n    password: {\n      required: true,\n      es_remote: {\n        type: 'post'\n      },\n    },\n    mobile: {\n      required: true,\n      phone: true,\n      es_remote: {\n        type: 'get',\n        callback: (bool) => {\n          if (bool) {\n            $smsCode.removeAttr('disabled');\n          } else {\n            $smsCode.attr('disabled', true);\n          }\n        }\n      },\n    },\n    sms_code: {\n      required: true,\n      unsigned_integer: true,\n      es_remote: {\n        type: 'get',\n      },\n    },\n  },\n  messages: {\n    sms_code: {\n      required: Translator.trans('site.captcha_code.required')\n    }\n  },\n  submitSuccess(data) {\n    notify('success', Translator.trans(data.message));\n    $('.modal').modal('hide');\n    window.location.reload();\n  },\n  submitError(data) {\n    notify('danger',  Translator.trans(data.responseJSON.message));\n  }\n});\n\nif (drag) {\n  drag.on('success', function(token){\n    $smsCode.removeClass('disabled').attr('disabled', false);\n  });\n}\n\n$smsCode.on('click', function() {\n  $smsCode.attr('disabled', true);\n  new SmsSender({\n    element: smsSend,\n    url: $smsCode.data('url'),\n    smsType: 'sms_bind',\n    captcha: true,\n    captchaValidated: true,\n    captchaNum: 'dragCaptchaToken',\n    preSmsSend: function() {\n      return true;\n    },\n    error: function(error) {\n      drag.initDragCaptcha();\n    },\n    additionalAction: function(ackResponse) {\n      if (ackResponse == 'captchaRequired') {\n        $smsCode.attr('disabled', true);\n        $('.js-drag-jigsaw').removeClass('hidden');\n        if(drag) {\n          drag.initDragCaptcha();\n        }\n        return true;\n      }\n      return false;\n    }\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/bind-mobile/index.js"],"sourceRoot":""}