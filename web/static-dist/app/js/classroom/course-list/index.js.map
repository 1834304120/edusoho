{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/classroom/course-list/list.js","webpack:///./app/Resources/static-src/common/es-infinite-cached-scroll.js","webpack:///./node_modules/waypoints/lib/jquery.waypoints.min.js","webpack:///./app/Resources/static-src/app/js/courseset/show/paged-course-lesson.js","webpack:///./app/Resources/static-src/app/common/widget/chapter-animate.js","webpack:///./app/Resources/static-src/app/js/classroom/course-list/index.js"],"names":["CourseList","$element","initEvent","on","event","onExpandCourse","onCollapseCourse","e","$target","$","currentTarget","$parent","parents","$lessonList","siblings","length","_lessonListShow","get","data","html","append","PagedCourseLesson","wrapTarget","$hideDom","find","$findAllLink","$otherAllLink","removeClass","hideLink","addClass","$dom","$list","animate","visibility","opacity","easing","height","ESInfiniteCachedScroll","options","_options","_initConfig","chapterAnimate","_displayAllImmediately","_displayCurrentPageDataAndSwitchToNext","_initUpLoading","target","$expandIconClass","$putIconClass","resolve","reject","$icon","$text","hasClass","delegateTarget","self","off","$this","toggleIcon","then","nextUntil","waypoint","Waypoint","element","handler","direction","_isLastPage","_canNotDisplayMore","disable","_scrollToBottom","refreshAll","enable","offset","_currentPage","_pageSize","_afterFirstLoad","_isFirstLoad","_displayItemDisplayed","_displayItem","_displayData","startIndex","_getStartIndex","index","key","value","_generateSingleCachedData","$targetDom","sidebarHight","scrollHight","scrollHeight","scrollTop","addEventListener","templateClass","clonedHtml","wrapDom","currentData","replacedHtml","replace","param","_replace","tempNode","_removeUnNeedNodes","$infiniteContainer","firstReplaceStr","secondReplaceStr","paramName","split","context","remove","each","parentNode","parent","nodeName","unwrap","Emitter","_init","finalOptions","extend","_getDefaultOptions","pageSize","_getPageSizeByMaxLessonsNumOfChapter","_destroyPaging","items","num","forEach","isChapter","item","$hiddenCachedData","_wrapTarget","$hiddenCourseInfo","$hiddenI18n","$hiddenActivityMetas","$hiddenCurrentTimestamp","_toJson","parseInt","itemType","Translator","trans","chapter_name","i18n","i18nChapterName","number","title","colon","part_name","i18nUnitName","i18nLessonName","getLessonNum","isItemDisplayedAsOptional","isItemDisplayedAsUnpublished","isLessonNode","isPublished","isSingleTaskLesson","taskName","i18nTaskName","taskNumber","taskTitle","watchLimitRemaining","taskId","course","currentTaskId","classNames","isTaskLocked","result","isMember","resultStatus","containerClass","isTask","isLesson","learnMode","lock","status","type","fileStorage","metas","replayStatus","isLive","currentTimeStamp","toInt","activityStartTime","activityEndTime","timestampStr","lessonNum","isHideUnpublish","published_number","className","removedClasses","i","str","json","parseJSON","text"],"mappings":"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","file":"app/js/classroom/course-list/index.js","sourcesContent":["import { chapterAnimate } from 'app/common/widget/chapter-animate';\nimport PagedCourseLesson from 'app/js/courseset/show/paged-course-lesson';\n\nexport default class CourseList {\n  constructor($element) {\n    this.$element = $element;\n    this.initEvent();\n  }\n\n  initEvent() {\n    this.$element.on('click', '.es-icon-keyboardarrowdown', (event) => this.onExpandCourse(event));\n    this.$element.on('click', '.es-icon-keyboardarrowup', (event) => this.onCollapseCourse(event));\n  }\n\n  onExpandCourse(e) {\n    const $target = $(e.currentTarget);\n    const $parent = $target.parents('.course-item');\n    const $lessonList = $target.parents('.media').siblings('.js-course-detail-content');\n    if ($lessonList.length > 0) {\n      this._lessonListShow($lessonList);\n    } else {\n      $.get($target.data('lessonUrl'), { 'visibility': 0 }, function(html) {\n        $parent.append(html);\n        new PagedCourseLesson({wrapTarget: $parent});\n      });\n    }\n    const $hideDom = $parent.siblings().find('.es-icon-keyboardarrowup');\n    this._lessonListShow($hideDom.parents('.media').siblings('.js-course-detail-content'));\n    const $findAllLink = $parent.find('.js-all-courses-link');\n    const $otherAllLink = $parent.siblings().find('.js-all-courses-link');\n    if ($findAllLink.length) {\n      $findAllLink.removeClass('hidden');\n    }\n\n    this.hideLink($otherAllLink);\n    $hideDom.removeClass('es-icon-keyboardarrowup').addClass('es-icon-keyboardarrowdown');\n    $target.addClass('es-icon-keyboardarrowup').removeClass('es-icon-keyboardarrowdown');\n  }\n\n  onCollapseCourse(e) {\n    const $target = $(e.currentTarget);\n    const $findAllLink = $target.parents('.course-item').find('.js-all-courses-link');\n    this.hideLink($findAllLink);\n    this._lessonListShow($target.parents('.media').siblings('.js-course-detail-content'));\n    $target.addClass('es-icon-keyboardarrowdown').removeClass('es-icon-keyboardarrowup');\n  }\n\n  hideLink($dom) {\n    if ($dom.length) {\n      $dom.addClass('hidden');\n    }\n  }\n\n  _lessonListShow($list) {\n    if ($list.length > 0) {\n      $list.animate({\n        visibility: 'toggle',\n        opacity: 'toggle',\n        easing: 'linear'\n      });\n      $list.height();\n    }\n\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/classroom/course-list/list.js","import { isEmpty } from 'common/utils';\nimport 'waypoints/lib/jquery.waypoints.min';\nimport Emitter from 'common/es-event-emitter';\nimport { debounce } from 'app/common/widget/debounce';\n/**\n *\n * 伪分页，从缓存中读取数据，数据结构格式见 构造方法\n *   例子见 app/Resources/static-src/app/js/courseset/show/index.js\n *     及 app/Resources/views/course/task-list/default-task-list.html.twig\n *\n     <!--\n      必须通过模板来生成节点, 模板由dataTemplateNode自定义（见构造函数）\n        1. 变量以 {chapterName} 的方式生成，chapterName是变量，会先从 context 中找chapterName方法(参数为当前行data和context),\n        如果没有此方法，则去data中找到相应属性\n        2. display-if 如果结果为0或false, 则删除该节点\n        3. hide-if 如果结果为1或true, 则删除该节点\n        4. tmp节点, 一般用于处理 display-if 和 hide-if，会移除, 通过子节点unwrap的方式移除，如果没有子节点，无法移除\n           如果tmp节点上有 js-ignore-remove, 则不会被删除\n     -->\n     <div class=\"js-infinite-item-template hidden\">\n      <li class=\"task-item bg-gray-lighter js-task-chapter infinite-item\"\n          display-if=\"{isChapter}\">\n        <i class=\"es-icon es-icon-menu left-menu\"></i>\n        <a href=\"javascript:\" class=\"title gray-dark\">{chapterName}</a>\n        <i class=\"right-menu es-icon es-icon-remove js-remove-icon\"></i>\n      </li>\n\n      <tmp hide-if=\"{isChapter}\">\n        <tmp display-if=\"{isUnit}\">\n          // 节信息\n        </tmp>\n      </tmp>\n    </div>\n\n     <!--\n       显示节点的容器, 必须要有class \"infinite-container\",\n       根据所给的值，会将模板内的节点生成并显示到容器内（不包含模板节点本身）\n     -->\n     <ul class=\"task-list task-list-md task-list-hover infinite-container\">\n     </ul>\n\n     <!-- 当页面上看到此节点时，会自动显示下一页 -->\n     <div class=\"js-down-loading-more\" style=\"min-height: 1px\"></div>\n */\nexport default class ESInfiniteCachedScroll extends Emitter {\n  /**\n   * @param options\n   *  {\n   *    'data': eval($('.infiniteScrollDataJson').val()),\n          //json数组\n            [\n              {\n                'itemType': 'chapter',\n              },\n              {\n                'itemType': 'unit',\n              }\n            ]\n   *    'context': jsonData,\n          //json, 用于将data中的值做转换, 或设置一些公共变量\n          // 支持普通json和方法\n          {\n            'course': {\n              'id': 1,\n              'isFree': 'true'\n            },\n            'isChapter': function(data, context) {\n              return 'chapter' == data.itemType;\n            },\n          }\n   *    'dataTemplateNode': '.js-infinite-item-template',\n   *        //会通过 $(dataTemplateNode)来找到模板, 只会生成 dataTemplateNode 指定节点内的内容（不包括该节点本身）,\n   *        // 模板如下\n            <div class=\"js-infinite-item-template hidden\">\n              <i class=\"es-icon es-icon-undone-check color-{color} left-menu\"></i> // 实际显示的节点\n            </div>\n        'displayAllImmediately': false,  //没有分页刷新功能，直接显示全部\n        'afterFirstLoad': function, //加载第一页后，会做的操作\n        'displayItem': {'key': 'taskId', 'value': '123'}, //显示指定数据项，第一页没有，则自动展开n页直到显示该项为止\n   *  }\n   */\n  constructor(options) {\n    super();\n\n    this._options = options;\n    this._initConfig();\n    this.chapterAnimate();\n    if (this._displayAllImmediately) {\n      this._displayCurrentPageDataAndSwitchToNext();\n    } else {\n      this._initUpLoading();\n    }\n  }\n\n  toggleIcon(target, $expandIconClass, $putIconClass) {\n    return new Promise((resolve, reject) => {\n      let $icon = target.find('.js-remove-icon');\n      let $text = target.find('.js-remove-text');\n      if ($icon.hasClass($expandIconClass)) {\n        $icon.removeClass($expandIconClass).addClass($putIconClass);\n        if ($('.js-only-display-one-page').length == 0) {\n          this._displayCurrentPageDataAndSwitchToNext();\n        }\n      } else {\n        $icon.removeClass($putIconClass).addClass($expandIconClass);\n      }\n      resolve();\n    });\n  }\n\n  chapterAnimate(\n    delegateTarget = 'body',\n    target = '.js-task-chapter',\n    $expandIconClass = 'es-icon-remove',\n    $putIconClass = 'es-icon-anonymous-iconfont') {\n    const self = this;\n    $(delegateTarget).off('click').on('click', target, (event) => {\n      let $this = $(event.currentTarget);\n      self.toggleIcon($this, $expandIconClass, $putIconClass).then(() => {\n        $this.nextUntil(target).animate({ height: 'toggle', opacity: 'toggle' }, 'normal');\n      });\n    })\n  }\n\n  _initUpLoading() {\n    if ($('.js-down-loading-more').length != 0) {\n      const self = this;\n      // 滚动到 class='js-down-loading-more' 的dom节点时，自动刷新下一页\n      let waypoint = new Waypoint({\n        element: $('.js-down-loading-more')[0],\n        handler: function(direction) {\n          if (direction == 'down') {\n            if (self._isLastPage || self._canNotDisplayMore()) {\n              waypoint.disable();\n            } else {\n              self._scrollToBottom();\n              waypoint.disable();\n              self._displayCurrentPageDataAndSwitchToNext();\n              Waypoint.refreshAll();\n              waypoint.enable();\n            }\n          }\n        },\n        offset: 'bottom-in-view'\n      });\n    }\n  }\n\n  _initConfig() {\n    this._currentPage = 1;\n    this._displayAllImmediately = this._options['displayAllImmediately'] ? true : false;\n\n    if (this._displayAllImmediately) {\n      this._pageSize = 10000;\n    } else {\n      this._pageSize = this._options['pageSize'] ? this._options['pageSize'] : 25;\n    }\n    //适配介绍页的查看全部要固定25个\n    if (this._pageSize > 25 && $('.js-only-display-one-page').length != 0) {\n      this._pageSize = 25\n    }\n\n    this._afterFirstLoad = this._options['afterFirstLoad'] ? this._options['afterFirstLoad'] : null;\n    this._isFirstLoad = true;\n\n    if (this._options['displayItem']) {\n      this._displayItemDisplayed = false;\n      this._displayItem = this._options['displayItem'];\n    } else {\n      this._displayItemDisplayed = true;\n      this._displayItem = null;\n    }\n    this._isLastPage = false;\n  }\n\n  _displayCurrentPageDataAndSwitchToNext() {\n    this._displayData();\n    if (!this._isLastPage) {\n      this._currentPage++;\n    }\n\n    if (this._isFirstLoad) {\n      if (!this._displayItemDisplayed) {\n        this._displayCurrentPageDataAndSwitchToNext();\n      } else {\n        this._isFirstLoad = false;\n        if (this._afterFirstLoad) {\n          this._afterFirstLoad();\n        }\n      }\n    }\n\n  }\n\n  _displayData() {\n    if (this._isLastPage) {\n      return;\n    }\n    let startIndex = this._getStartIndex();\n    for (let index = 0; index < this._pageSize; index++) {\n      let data = this._options['data'][index + startIndex];\n      if (!this._displayItemDisplayed) {\n        let key = this._displayItem['key'];\n        let value = this._displayItem['value'];\n        if (data[key] == value) {\n          this._displayItemDisplayed = true;\n        }\n      }\n      if (!isEmpty(data)) {\n        this._generateSingleCachedData(data);\n      } else {\n        this._isLastPage = true;\n      }\n    }\n  }\n\n  _scrollToBottom() {\n    const self = this;\n    const $target = $('.js-sidebar-pane');\n    if (!$target.length) {\n      return;\n    }\n    const $targetDom = $target[0];\n    const sidebarHight = $target.height();\n    const scrollHight = $targetDom.scrollHeight;\n    const scrollTop = $targetDom.scrollTop;\n    if (self._afterFirstLoad) {\n      $targetDom.addEventListener('scroll', debounce(() => {\n        if (scrollTop + sidebarHight >= scrollHight && !this._isLastPage) {\n          self._displayCurrentPageDataAndSwitchToNext();\n        }\n      }, 500, true));\n    }\n  }\n\n\n  _generateSingleCachedData(data) {\n    const templateClass = this._options['dataTemplateNode'];\n    let clonedHtml = this._options.wrapDom ? this._options.wrapDom.find(templateClass).html() : $(templateClass).html();\n\n    let currentData = data;\n    const self = this;\n    //所有花括号里面的内容都替换掉为相应变量值,\n    // 如{lock} 替换为 this._options.context.lock 或 data.lock, 如果找不到，则不替换\n    let replacedHtml = clonedHtml.replace(\n      /({\\w+})/g,\n      function(param) {\n        return self._replace(param, currentData, '{', '}');\n      }\n    );\n\n    //%7B %7D 是转义后的 { 和 }\n    replacedHtml = replacedHtml.replace(\n      /(%7B\\w+%7D)/g,\n      function(param) {\n        return self._replace(param, currentData, '%7B', '%7D');\n      }\n    );\n\n    let tempNode = $('<div>').append(replacedHtml);\n\n    this._removeUnNeedNodes(tempNode);\n    let $infiniteContainer = this._options.wrapDom ? this._options.wrapDom.find('.infinite-container'): $('.infinite-container');\n    $infiniteContainer.append(tempNode.html());\n  }\n\n  _getStartIndex() {\n    return (this._currentPage - 1) * this._pageSize;\n  }\n\n  _replace(param, currentData, firstReplaceStr, secondReplaceStr) {\n    let paramName = param.split(firstReplaceStr)[1].split(secondReplaceStr)[0];\n    let context = this._options.context;\n    if (typeof context[paramName] == 'function') {\n      return context[paramName](currentData, context);\n    } else if (typeof currentData[paramName] != 'undefined') {\n      return currentData[paramName];\n    }\n    return param;\n  }\n\n  _canNotDisplayMore() {\n    return this._currentPage != 1 && $('.js-only-display-one-page').length != 0;\n  }\n\n  _removeUnNeedNodes(tempNode) {\n    tempNode.find('[display-if=false]').remove();\n    tempNode.find('[display-if=0]').remove();\n    tempNode.find('[hide-if=1]').remove();\n    tempNode.find('[hide-if=true]').remove();\n\n    // 调试用， tmp node如果有 js-ignore-remove class, 不会自动删除\n    tempNode.find('tmp :first-child').each(\n      function() {\n        let parentNode = $(this).parent();\n        if (!parentNode.hasClass('js-ignore-remove') && parentNode[0].nodeName == 'TMP') {\n          $(this).unwrap();\n        }\n      }\n    );\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/common/es-infinite-cached-scroll.js","/*!\nWaypoints - 4.0.1\nCopyright © 2011-2016 Caleb Troughton\nLicensed under the MIT license.\nhttps://github.com/imakewebthings/waypoints/blob/master/licenses.txt\n*/\n!function(){\"use strict\";function t(o){if(!o)throw new Error(\"No options passed to Waypoint constructor\");if(!o.element)throw new Error(\"No element option passed to Waypoint constructor\");if(!o.handler)throw new Error(\"No handler option passed to Waypoint constructor\");this.key=\"waypoint-\"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?\"horizontal\":\"vertical\",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll(\"destroy\")},t.disableAll=function(){t.invokeAll(\"disable\")},t.enableAll=function(){t.Context.refreshAll();for(var e in i)i[e].enabled=!0;return this},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:\"default\",horizontal:!1,offset:0},t.offsetAliases={\"bottom-in-view\":function(){return this.context.innerHeight()-this.adapter.outerHeight()},\"right-in-view\":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){\"use strict\";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key=\"waypoint-context-\"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,n.windowContext||(n.windowContext=!0,n.windowContext=new e(window)),this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?\"horizontal\":\"vertical\";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical),i=this.element==this.element.window;t&&e&&!i&&(this.adapter.off(\".waypoints\"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on(\"resize.waypoints\",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on(\"scroll.waypoints\",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s];if(null!==a.triggerPoint){var l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=e?void 0:this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:\"right\",backward:\"left\",offsetProp:\"left\"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:\"down\",backward:\"up\",offsetProp:\"top\"}};for(var r in t){var s=t[r];for(var a in this.waypoints[r]){var l,h,p,u,c,d=this.waypoints[r][a],f=d.options.offset,w=d.triggerPoint,y=0,g=null==w;d.element!==d.element.window&&(y=d.adapter.offset()[s.offsetProp]),\"function\"==typeof f?f=f.apply(d):\"string\"==typeof f&&(f=parseFloat(f),d.options.offset.indexOf(\"%\")>-1&&(f=Math.ceil(s.contextDimension*f/100))),l=s.contextScroll-s.contextOffset,d.triggerPoint=Math.floor(y+l-f),h=w<s.oldScroll,p=d.triggerPoint>=s.oldScroll,u=h&&p,c=!h&&!p,!g&&u?(d.queueTrigger(s.backward),o[d.group.id]=d.group):!g&&c?(d.queueTrigger(s.forward),o[d.group.id]=d.group):g&&s.oldScroll>=d.triggerPoint&&(d.queueTrigger(s.forward),o[d.group.id]=d.group)}}return n.requestAnimationFrame(function(){for(var t in o)o[t].flushTriggers()}),this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){\"use strict\";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+\"-\"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n=\"up\"===i||\"left\"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){\"use strict\";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each([\"innerHeight\",\"innerWidth\",\"off\",\"offset\",\"on\",\"outerHeight\",\"outerWidth\",\"scrollLeft\",\"scrollTop\"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each([\"extend\",\"inArray\",\"isEmptyObject\"],function(i,o){t[o]=e[o]}),i.adapters.push({name:\"jquery\",Adapter:t}),i.Adapter=t}(),function(){\"use strict\";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});\"string\"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/waypoints/lib/jquery.waypoints.min.js\n// module id = 8f3ec98312b1f1f6bafb\n// module chunks = app/js/classroom/course-list/index app/js/courseset/show/index app/js/task/index","import ESInfiniteCachedScroll from 'common/es-infinite-cached-scroll';\nimport { isEmpty } from 'common/utils';\n\nclass PagedCourseLesson {\n\n  /**\n   * @param options\n   * {\n   *   'displayAllImmediately': false //默认为false, 如果为true, 则不做分页处理，立刻显示全部\n   *   'afterFirstLoad': function() {},\n   *   'pageSize': 25,\n   * }\n   */\n  constructor(options) {\n    if (typeof options == 'undefined') {\n      options = {};\n    }\n    this._init(options);\n  }\n\n  _init(options) {\n    let finalOptions = $.extend(this._getDefaultOptions(options), options);\n    finalOptions.wrapDom = options.wrapTarget;\n    finalOptions.pageSize = this._getPageSizeByMaxLessonsNumOfChapter(finalOptions)\n    new ESInfiniteCachedScroll(finalOptions);\n\n    if (this._displayAllImmediately) {\n      this._destroyPaging();\n    }\n  }\n\n  // 分页数根据课程的最大章中的数量来设定，小于25则设置为25\n  _getPageSizeByMaxLessonsNumOfChapter(options) {\n    let items = options.data;\n    if (isEmpty(items)) {\n      return;\n    }\n    let pageSize = 0\n    let num = 0\n    items.forEach(item => {\n      if (options.context.isChapter(item)) {\n        pageSize = num > pageSize ? num : pageSize\n        num = 0;\n      } else {\n        num ++;\n      }\n    });\n\n    return pageSize < 25 ? 25 : pageSize + 1\n  }\n\n  _getDefaultOptions(options) {\n    const $hiddenCachedData = this._wrapTarget(options.wrapTarget, '.js-hidden-cached-data');\n    const $hiddenCourseInfo = this._wrapTarget(options.wrapTarget, '.js-hidden-course-info');\n    const $hiddenI18n = this._wrapTarget(options.wrapTarget, '.js-hidden-i18n');\n    const $hiddenActivityMetas = this._wrapTarget(options.wrapTarget, '.js-hidden-activity-metas');\n    const $hiddenCurrentTimestamp = this._wrapTarget(options.wrapTarget, '.js-hidden-current-timestamp');\n    return {\n      'data': this._toJson($hiddenCachedData.html()),\n\n      'context': {\n        'course': this._toJson($hiddenCourseInfo.html()),\n\n        'i18n': this._toJson($hiddenI18n.html()),\n\n        'metas': this._toJson($hiddenActivityMetas.html()),\n\n        'currentTimeStamp': parseInt($hiddenCurrentTimestamp.html(), 10),\n\n        'isChapter': function(data, context) {\n          return 'chapter' == data.itemType;\n        },\n\n        'isUnit': function(data, context) {\n          return 'unit' == data.itemType;\n        },\n\n        'isLesson': function(data, context) {\n          return 'lesson' == data.itemType;\n        },\n\n        'isTask': function(data, context) {\n          return 'task' == data.itemType;\n        },\n\n        'getChapterName': function(data, context) {\n          return Translator.trans('course.chapter', { chapter_name: context.i18n.i18nChapterName, number: data.number, title: data.title, colon: (data.title ? ':' : '') });\n        },\n\n        'getUnitName': function(data, context) {\n          return Translator.trans('course.unit', { part_name: context.i18n.i18nUnitName, number: data.number, title: data.title, colon: (data.title ? ':' : '') });\n        },\n\n        'getLessonName': function(data, context) {\n          if ('1' == data['isOptional']) {\n            return data.title;\n          } else {\n            return Translator.trans('course.lesson', { part_name: context.i18n.i18nLessonName, number: context.getLessonNum(data, context), title: data.title });\n          }\n        },\n\n        /*\n         * 选修或未发布状态下，\n         *   业务逻辑：课时上面显示选修或敬请期待（未发布需要显示敬请期待），任务不显示选修或敬请期待\n         *   技术逻辑：\n         *     单任务课时，课时本身不显示选修或敬请期待，任务显示选修或敬请期待（页面上的课时，实际上是任务，只是套了一些课时的属性）\n         *     多任务课时，课时本身显示选修或敬请期待，任务不显示选修或敬请期待\n         */\n        'isItemDisplayedAsOptionalOrUnpublished': function(data, context) {\n          return context.isItemDisplayedAsOptional(data, context) ||\n            context.isItemDisplayedAsUnpublished(data, context);\n        },\n\n        /**\n         * 见 isItemDisplayedAsOptionalOrPublished 描述\n         */\n        'isItemDisplayedAsOptional': function(data, context) {\n          return '1' == data['isOptional'] && context.isLessonNode(data, context);\n        },\n\n        'isItemDisplayedAsUnpublished': function(data, context) {\n          return !context.isPublished(data, context) && context.isLessonNode(data, context);\n        },\n\n        'isLessonNode': function(data, context) {\n          return (data['itemType'] == 'task' && data['isSingleTaskLesson']) ||\n            (data['itemType'] == 'lesson' && !data['isSingleTaskLesson']);\n        },\n\n        'getTaskName': function(data, context) {\n          if (data.isSingleTaskLesson) {\n            return Translator.trans('course.lesson', { part_name: context.i18n.i18nLessonName, number: context.getLessonNum(data, context), title: data.title });\n          } else {\n            return Translator.trans('course.catalogue.task_status.task', { taskName: context.i18n.i18nTaskName, taskNumber: data.number, taskTitle: data.title });\n          }\n        },\n\n        'hasWatchLimitRemaining': function(data, context) {\n          return data.watchLimitRemaining !== false;\n        },\n\n        /** 课时详情页中，当前课时会高亮 */\n        'highlightTaskClass': function(data, context) {\n          return data.taskId == context.course.currentTaskId ? 'active' : '';\n        },\n\n        'taskClass': function(data, context) {\n          let classNames = 'es-icon left-menu';\n          if (context.isTaskLocked(data, context)) {\n            classNames += ' es-icon-lock';\n          } else if (data.result == '' || context.course.isMember == 'false') {\n            classNames += ' es-icon-undone-check color-gray';\n          } else if (data.resultStatus == 'start') {\n            classNames += ' es-icon-doing color-primary';\n          } else if (data.resultStatus == 'finish') {\n            classNames += ' es-icon-iccheckcircleblack24px color-primary';\n          }\n          return classNames;\n        },\n\n        'lessonContainerClass': function(data, context) {\n          let containerClass = 'color-gray bg-gray-lighter';\n          if (context.isTask(data, context)) {\n            return data.isSingleTaskLesson ? containerClass : '';\n          } else if (context.isLesson(data, context)) {\n            return containerClass;\n          }\n        },\n\n        'isTaskLocked': function(data, context) {\n          if (context.course.isMember) {\n            return context.course.learnMode == 'lockMode' && data.lock;\n          } else {\n            return context.course.learnMode == 'lockMode';\n          }\n        },\n\n        'isPublished': function(data, context) {\n          return 'published' == data.status;\n        },\n\n        'isPublishedTaskUnlocked': function(data, context) {\n          return context.isPublished(data, context) && !context.isTaskLocked(data, context);\n        },\n\n        'isCloudVideo': function(data, context) {\n          return 'video' == data.type && 'cloud' == data.fileStorage;\n        },\n\n        'getMetaIcon': function(data, context) {\n          if (typeof context.metas[data.type] != 'undefined') {\n            return context.metas[data.type]['icon'];\n          }\n          return '';\n        },\n\n        'getMetaName': function(data, context) {\n          if (typeof context.metas[data.type] != 'undefined') {\n            return context.metas[data.type]['name'];\n          }\n          return '';\n        },\n\n        'isLiveReplayGenerated': function(data, context) {\n          return 'ungenerated' != data.replayStatus;\n        },\n\n        'isLive': function(data, context) {\n          return 'live' == data.type;\n        },\n\n        'isLiveNotStarted': function(data, context) {\n          return context.isLive(data, context) && context.currentTimeStamp < context.toInt(data.activityStartTime);\n        },\n\n        'isLiveStarting': function(data, context) {\n          return context.isLive(data, context) && context.currentTimeStamp >= context.toInt(data.activityStartTime) &&\n            context.currentTimeStamp <= context.toInt(data.activityEndTime);\n        },\n\n        'isLiveFinished': function(data, context) {\n          return context.isLive(data, context) && context.currentTimeStamp > context.toInt(data.activityEndTime);\n        },\n\n        'toInt': function(timestampStr) {\n          return parseInt(timestampStr, 10);\n        },\n\n        'getLessonNum': function(data, context) {\n          let lessonNum = data.number;\n          if ('1' == context.course.isHideUnpublish) {\n            lessonNum = data.published_number;\n          }\n          return lessonNum;\n        },\n      },\n\n      'dataTemplateNode': '.js-infinite-item-template'\n    };\n  }\n\n  _wrapTarget($target, className) {\n    const $dom = $target ? $target.find(className): $(className);\n    return $dom;\n  }\n\n  _destroyPaging() {\n    let removedClasses = [\n      'js-infinite-item-template',\n      'js-hidden-cached-data',\n      'js-hidden-course-info',\n      'js-hidden-i18n',\n      'js-hidden-activity-metas',\n      'js-hidden-current-timestamp',\n      'infinite-container',\n      'js-down-loading-more'\n    ];\n\n    for (let i = 0; i < removedClasses.length; i++) {\n      $('.' + removedClasses[i]).removeClass(removedClasses[i]);\n    }\n  }\n\n  /*\n   * 将字符串转化为json，转换前先去除换行，如果字符串为空，则转化为 {}\n   */\n  _toJson(str) {\n    let json = {};\n    if (str) {\n      json = $.parseJSON(str.replace(/[\\r\\n\\t]/g, ''));\n    }\n    return json;\n  }\n}\n\nexport default PagedCourseLesson;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/courseset/show/paged-course-lesson.js","export let toggleIcon = (target, $expandIconClass, $putIconClass) => {\n  let $icon = target.find('.js-remove-icon');\n  let $text = target.find('.js-remove-text');\n  if ($icon.hasClass($expandIconClass)) {\n    $icon.removeClass($expandIconClass).addClass($putIconClass);\n    $text ? $text.text(Translator.trans('收起')): '';\n  } else {\n    $icon.removeClass($putIconClass).addClass($expandIconClass);\n    $text ? $text.text(Translator.trans('展开')): '';\n  }\n};\n\nexport let chapterAnimate = (\n  delegateTarget = 'body',\n  target = '.js-task-chapter',\n  $expandIconClass = 'es-icon-remove',\n  $putIconClass = 'es-icon-anonymous-iconfont') => {\n  $(delegateTarget).on('click', target, (event) => {\n    let $this = $(event.currentTarget);\n    $this.nextUntil(target).animate({ height: 'toggle', opacity: 'toggle' }, 'normal');\n    toggleIcon($this, $expandIconClass, $putIconClass);\n  });\n};\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/widget/chapter-animate.js","import CourseList from './list';\n\nnew CourseList($('.class-course-list'));\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/classroom/course-list/index.js"],"sourceRoot":""}