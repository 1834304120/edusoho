{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/settings/email/index.js","webpack:///./app/Resources/static-src/app/js/settings/email/email.js"],"names":["Email","drag","$","length","Drag","limitType","dragEvent","initValidator","initDragCaptchaCodeRule","self","on","token","_smsBtnable","$btn","validate","currentDom","ajax","rules","messages","dragCaptchaToken","required","Translator","trans","submitSuccess","data","html","submitError","responseJSON","message","initDragCaptcha","removeClass","attr"],"mappings":";;;;;AAAA,wB;;;;;;;;;;ACAA;;;;;;AACA,IAAIA,eAAJ,G;;;;;;;;;;;;;;;;;;;;;;ACDA;;;;AACA;;;;;;IAEqBA,K;AACnB,mBAAc;AAAA;;AACZ,SAAKC,IAAL,GAAYC,EAAE,WAAF,EAAeC,MAAf,GAAwB,IAAIC,cAAJ,CAASF,EAAE,WAAF,CAAT,EAAyBA,EAAE,YAAF,CAAzB,EAA0C;AAC5EG,iBAAW;AADiE,KAA1C,CAAxB,GAEP,IAFL;AAGA,SAAKC,SAAL;AACA,SAAKC,aAAL;AACA,SAAKC,uBAAL;AACD;;;;gCAEW;AACV,UAAIC,OAAO,IAAX;AACA,UAAI,KAAKR,IAAT,EAAe;AACb,aAAKA,IAAL,CAAUS,EAAV,CAAa,SAAb,EAAwB,UAASC,KAAT,EAAe;AACrCF,eAAKG,WAAL;AACD,SAFD;AAGD;AACF;;;oCAEe;AACd,UAAIC,OAAOX,EAAE,aAAF,CAAX;AACA,UAAIO,OAAO,IAAX;;AAEAP,QAAE,qBAAF,EAAyBY,QAAzB,CAAkC;AAChCC,oBAAY,aADoB;AAEhCC,cAAM,IAF0B;AAGhCC,eAAO;AACL,sBAAY,UADP;AAEL,mBAAS,mBAFJ;AAGL,8BAAoB;AAHf,SAHyB;AAQhCC,kBAAU;AACRC,4BAAkB;AAChBC,sBAAUC,WAAWC,KAAX,CAAiB,iCAAjB;AADM;AADV,SARsB;AAahCC,qBAbgC,yBAalBC,IAbkB,EAaZ;AAClBtB,YAAE,QAAF,EAAYuB,IAAZ,CAAiBD,IAAjB;AACD,SAf+B;AAgBhCE,mBAhBgC,uBAgBpBF,IAhBoB,EAgBd;AAChB,gCAAO,QAAP,EAAkBH,WAAWC,KAAX,CAAiBE,KAAKG,YAAL,CAAkBC,OAAnC,CAAlB;AACA,cAAInB,KAAKR,IAAT,EAAe;AACbQ,iBAAKR,IAAL,CAAU4B,eAAV;AACD;AACF;AArB+B,OAAlC;AAuBD;;;8CAEyB;AACxB,UAAI3B,EAAE,cAAF,EAAkBC,MAAtB,EAA8B;AAC5BD,UAAE,2BAAF,EAA+Be,KAA/B,CAAqC,KAArC,EAA4C;AAC1CG,oBAAU,IADgC;AAE1CF,oBAAU;AACRE,sBAAUC,WAAWC,KAAX,CAAiB,iCAAjB;AADF;AAFgC,SAA5C;AAMD;AACF;;;kCAEa;AACZpB,QAAE,kBAAF,EAAsB4B,WAAtB,CAAkC,UAAlC,EAA8CC,IAA9C,CAAmD,UAAnD,EAA+D,KAA/D;AACD;;;;;kBA7DkB/B,K","file":"app/js/settings/email/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import Email from './email';\nnew Email();\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/email/index.js","import Drag from 'app/common/drag';\nimport notify from 'common/notify';\n\nexport default class Email {\n  constructor() {\n    this.drag = $('#drag-btn').length ? new Drag($('#drag-btn'), $('.js-jigsaw'), {\n      limitType: 'web_register'\n    }) : null;\n    this.dragEvent();\n    this.initValidator();\n    this.initDragCaptchaCodeRule();\n  }\n\n  dragEvent() {\n    let self = this;\n    if (this.drag) {\n      this.drag.on('success', function(token){\n        self._smsBtnable();\n      });\n    }\n  }\n\n  initValidator() {\n    let $btn = $('#submit-btn');\n    let self = this;\n\n    $('#setting-email-form').validate({\n      currentDom: '#submit-btn',\n      ajax: true,\n      rules: {\n        'password': 'required',\n        'email': 'required es_email',\n        'dragCaptchaToken': 'required'\n      },\n      messages: {\n        dragCaptchaToken: {\n          required: Translator.trans('auth.register.drag_captcha_tips')\n        },\n      },\n      submitSuccess(data) {\n        $('#modal').html(data);\n      },\n      submitError(data) {\n        notify('danger',  Translator.trans(data.responseJSON.message));\n        if (self.drag) {\n          self.drag.initDragCaptcha();\n        }\n      }\n    });\n  }\n\n  initDragCaptchaCodeRule() {\n    if ($('.js-drag-img').length) {\n      $('[name=\"dragCaptchaToken\"]').rules('add', {\n        required: true,\n        messages: {\n          required: Translator.trans('auth.register.drag_captcha_tips')\n        }\n      });\n    }\n  }\n\n  _smsBtnable() {\n    $('.js-sms-send-btn').removeClass('disabled').attr('disabled', false);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/settings/email/email.js"],"sourceRoot":""}