{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/course/header-top/index.js","webpack:///./app/Resources/static-src/app/common/widget/qrcode.js"],"names":["$unfavorite","$","$favorite","bindOperation","discountCountdown","ancelRefund","on","confirm","Translator","trans","post","data","window","location","reload","$needHideBtn","$needShowBtn","click","url","console","log","done","success","removeClass","addClass","remainTime","parseInt","endtime","Date","valueOf","countdown","event","$this","html","strftime","setTimeout","app","crontab","fixButtonPosition","$target","height","$btn","document","ready","currentTarget","hasClass","ajax","type","dataType","find","attr","img","$qrcode"],"mappings":";;;;;;;;AAAA;;AAEA,IAAIA,cAAcC,EAAE,oBAAF,CAAlB;AACA,IAAIC,YAAYD,EAAE,kBAAF,CAAhB;AACAE,cAAcH,WAAd,EAA2BE,SAA3B;AACAC,cAAcD,SAAd,EAAyBF,WAAzB;AACAI;AACAC;;AAEA,SAASA,WAAT,GAAuB;AACrBJ,IAAE,gBAAF,EAAoBK,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AAC1C,QAAI,CAACC,QAAQC,WAAWC,KAAX,CAAiB,+BAAjB,CAAR,CAAL,EAAiE;AAC/D,aAAO,KAAP;AACD;AACDR,MAAES,IAAF,CAAOT,EAAE,IAAF,EAAQU,IAAR,CAAa,KAAb,CAAP,EAA4B,UAAUA,IAAV,EAAgB;AAC1CC,aAAOC,QAAP,CAAgBC,MAAhB;AACD,KAFD;AAGD,GAPD;AAQD;;AAED,SAASX,aAAT,CAAuBY,YAAvB,EAAqCC,YAArC,EAAmD;AACjDD,eAAaE,KAAb,CAAmB,YAAM;AACvB,QAAMC,MAAMH,aAAaJ,IAAb,CAAkB,KAAlB,CAAZ;AACAQ,YAAQC,GAAR,CAAYF,GAAZ;AACA,QAAI,CAACA,GAAL,EAAU;AACR;AACD;AACDjB,MAAES,IAAF,CAAOQ,GAAP,EACGG,IADH,CACQ,UAACC,OAAD,EAAa;AACjB,UAAI,CAACA,OAAL,EAAc;AACdN,mBAAaO,WAAb,CAAyB,QAAzB;AACAR,mBAAaS,QAAb,CAAsB,QAAtB;AACD,KALH;AAMD,GAZD;AAaD;;AAED,SAASpB,iBAAT,GAA6B;AAC3B,MAAIqB,aAAaC,SAASzB,EAAE,6BAAF,EAAiCU,IAAjC,CAAsC,YAAtC,CAAT,CAAjB;AACA,MAAIc,cAAc,CAAlB,EAAqB;AACnB,QAAIE,UAAU,IAAIC,IAAJ,CAAS,IAAIA,IAAJ,GAAWC,OAAX,KAAuBJ,aAAa,IAA7C,CAAd;AACAxB,MAAE,6BAAF,EAAiC6B,SAAjC,CAA2CH,OAA3C,EAAoD,UAAUI,KAAV,EAAiB;AACnE,UAAIC,QAAQ/B,EAAE,IAAF,EAAQgC,IAAR,CAAaF,MAAMG,QAAN,CAAe1B,WAAWC,KAAX,CAAiB,wCAAjB,CAAf,CAAb,CAAZ;AACD,KAFD,EAEGH,EAFH,CAEM,kBAFN,EAE0B,YAAY;AACpCL,QAAE,IAAF,EAAQgC,IAAR,CAAazB,WAAWC,KAAX,CAAiB,kCAAjB,CAAb;AACA0B,iBAAW,YAAY;AACrBlC,UAAES,IAAF,CAAO0B,IAAIC,OAAX,EAAoB,YAAY;AAC9BzB,iBAAOC,QAAP,CAAgBC,MAAhB;AACD,SAFD;AAGD,OAJD,EAIG,IAJH;AAKD,KATD;AAUD;AACF;;AAED,IAAMwB,oBAAoB,SAApBA,iBAAoB,GAAM;AAC9B,MAAMC,UAAUtC,EAAE,wBAAF,CAAhB;AACA,MAAMuC,SAASD,QAAQC,MAAR,EAAf;AACA,MAAMC,OAAOxC,EAAE,6BAAF,CAAb;AACA,MAAIuC,SAAU,GAAd,EAAmB;AACjBC,SAAKlB,WAAL,CAAiB,yBAAjB;AACD;AACF,CAPD;;AASAtB,EAAEyC,QAAF,EAAYC,KAAZ,CAAkB,YAAM;AACtBL;AACD,CAFD,E;;;;;;;;;;AC9DArC,EAAE,MAAF,EAAUK,EAAV,CAAa,OAAb,EAAsB,YAAtB,EAAoC,UAACyB,KAAD,EAAW;AAC7C,MAAMQ,UAAUtC,EAAE8B,MAAMa,aAAR,CAAhB;AACA,MAAIL,QAAQM,QAAR,CAAiB,MAAjB,CAAJ,EAA8B;AAC5BN,YAAQhB,WAAR,CAAoB,MAApB;AACD,GAFD,MAEO;AACLtB,MAAE6C,IAAF,CAAO;AACLC,YAAM,MADD;AAEL7B,WAAKqB,QAAQ5B,IAAR,CAAa,KAAb,CAFA;AAGLqC,gBAAU,MAHL;AAIL1B,eAAS,iBAACX,IAAD,EAAU;AACjB4B,gBAAQU,IAAR,CAAa,qBAAb,EAAoCC,IAApC,CAAyC,KAAzC,EAAgDvC,KAAKwC,GAArD;AACAZ,gBAAQf,QAAR,CAAiB,MAAjB;AACD;AAPI,KAAP;AASD;AACF,CAfD;;AAiBAvB,EAAE,MAAF,EAAUK,EAAV,CAAa,OAAb,EAAsB,YAAM;AAC1B,MAAM8C,UAAUnD,EAAE,YAAF,CAAhB;AACA,MAAImD,QAAQP,QAAR,CAAiB,MAAjB,CAAJ,EAA8B;AAC5BO,YAAQ7B,WAAR,CAAoB,MAApB;AACD;AACF,CALD,E","file":"app/js/course/header-top/index.js","sourcesContent":["import 'app/common/widget/qrcode';\n\nlet $unfavorite = $('.js-unfavorite-btn');\nlet $favorite = $('.js-favorite-btn');\nbindOperation($unfavorite, $favorite);\nbindOperation($favorite, $unfavorite);\ndiscountCountdown();\nancelRefund();\n\nfunction ancelRefund() {\n  $('.cancel-refund').on('click', function () {\n    if (!confirm(Translator.trans('course_set.refund_cancel_hint'))) {\n      return false;\n    }\n    $.post($(this).data('url'), function (data) {\n      window.location.reload();\n    });\n  });\n}\n\nfunction bindOperation($needHideBtn, $needShowBtn) {\n  $needHideBtn.click(() => {\n    const url = $needHideBtn.data('url');\n    console.log(url);\n    if (!url) {\n      return;\n    }\n    $.post(url)\n      .done((success) => {\n        if (!success) return;\n        $needShowBtn.removeClass('hidden');\n        $needHideBtn.addClass('hidden');\n      });\n  });\n}\n\nfunction discountCountdown() {\n  var remainTime = parseInt($('#discount-endtime-countdown').data('remaintime'));\n  if (remainTime >= 0) {\n    var endtime = new Date(new Date().valueOf() + remainTime * 1000);\n    $('#discount-endtime-countdown').countdown(endtime, function (event) {\n      var $this = $(this).html(event.strftime(Translator.trans('course_set.show.count_down_format_hint')));\n    }).on('finish.countdown', function () {\n      $(this).html(Translator.trans('course_set.show.time_finish_hint'));\n      setTimeout(function () {\n        $.post(app.crontab, function () {\n          window.location.reload();\n        });\n      }, 2000);\n    });\n  }\n}\n\nconst fixButtonPosition = () => {\n  const $target = $('.js-course-detail-info');\n  const height = $target.height();\n  const $btn = $('.js-course-header-operation');\n  if (height >  240) {\n    $btn.removeClass('course-detail-info__btn');\n  }\n};\n\n$(document).ready(() => {\n  fixButtonPosition();\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/course/header-top/index.js","$('body').on('click', '.es-qrcode', (event) => {\n  const $target = $(event.currentTarget);\n  if ($target.hasClass('open')) {\n    $target.removeClass('open');\n  } else {\n    $.ajax({\n      type: 'post',\n      url: $target.data('url'),\n      dataType: 'json',\n      success: (data) => {\n        $target.find('.qrcode-popover img').attr('src', data.img);\n        $target.addClass('open');\n      }\n    });\n  }\n});\n\n$('body').on('click', () => {\n  const $qrcode = $('.es-qrcode');\n  if ($qrcode.hasClass('open')) {\n    $qrcode.removeClass('open');\n  }\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/widget/qrcode.js"],"sourceRoot":""}