{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/open-course-manage/live-open-time-set/index.js"],"names":["$content","$","$form","now","Date","$btn","data","attr","html","Translator","trans","css","validator","validate","rules","startTime","required","after_now","es_remote","type","clientTime","val","timeLength","positive_integer","length","messages","datetimepicker","autoclose","language","document","documentElement","lang","on","ev","element","click","form","button","submit"],"mappings":";;;;;;;;AAAA,IAAIA,WAAWC,EAAE,4BAAF,CAAf;AACA,IAAIC,QAAQD,EAAE,wBAAF,CAAZ;AACA,IAAIE,MAAM,IAAIC,IAAJ,EAAV;AACA,IAAIC,OAAOJ,EAAE,4BAAF,CAAX;;AAEA,IAAI,CAACC,MAAMI,IAAN,CAAW,QAAX,CAAL,EAA2B;AACzBL,IAAE,kBAAF,EAAsBM,IAAtB,CAA2B,UAA3B,EAAuC,IAAvC;AACAN,IAAE,oBAAF,EAAwBM,IAAxB,CAA6B,UAA7B,EAAyC,IAAzC;AACAN,IAAE,4BAAF,EAAgCM,IAAhC,CAAqC,UAArC,EAAiD,IAAjD;;AAEAN,IAAE,uBAAF,EAA2BO,IAA3B,CAAgCC,WAAWC,KAAX,CAAiB,uCAAjB,CAAhC;AACAT,IAAE,uBAAF,EAA2BU,GAA3B,CAA+B,OAA/B,EAAwC,SAAxC;AACAV,IAAE,wBAAF,EAA4BO,IAA5B,CAAiCC,WAAWC,KAAX,CAAiB,uCAAjB,CAAjC;AACAT,IAAE,wBAAF,EAA4BU,GAA5B,CAAgC,OAAhC,EAAyC,SAAzC;AACD,CATD,MASO;AACLV,IAAE,kBAAF,EAAsBM,IAAtB,CAA2B,UAA3B,EAAuC,KAAvC;AACAN,IAAE,4BAAF,EAAgCM,IAAhC,CAAqC,UAArC,EAAiD,KAAjD;AACD;;AAED,IAAIK,YAAYV,MAAMW,QAAN,CAAe;AAC7BC,SAAO;AACLC,eAAW;AACTC,gBAAU,IADD;AAETC,iBAAW,IAFF;AAGTC,iBAAW;AACTC,cAAM,MADG;AAETb,cAAM;AACJc,sBAAY,sBAAY;AACtB,mBAAOnB,EAAE,kBAAF,EAAsBoB,GAAtB,EAAP;AACD;AAHG;AAFG;AAHF,KADN;AAaLC,gBAAY;AACVN,gBAAU,IADA;AAEVO,wBAAkB,IAFR;AAGVL,iBAAW;AACTC,cAAM,KADG;AAETb,cAAM,EAAsB;AAC1BS,qBAAW,qBAAY;AACrB,mBAAOd,EAAE,kBAAF,EAAsBoB,GAAtB,EAAP;AACD,WAHG;AAIJG,kBAAQ,kBAAY;AAClB,mBAAOvB,EAAE,mBAAF,EAAuBoB,GAAvB,EAAP;AACD;AANG;AAFG;AAHD;AAbP,GADsB;AA8B7BI,YAAU;AACRV,eAAW;AACTG,iBAAWT,WAAWC,KAAX,CAAiB,4BAAjB;AADF;AADH;AA9BmB,CAAf,CAAhB;;AAqCAT,EAAE,kBAAF,EAAsByB,cAAtB,CAAqC;AACnCC,aAAW,IADwB;AAEnCC,YAAUC,SAASC,eAAT,CAAyBC;AAFA,CAArC,EAGGC,EAHH,CAGM,MAHN,EAGc,UAAUC,EAAV,EAAc;AAC1BrB,YAAUsB,OAAV,CAAkB,kBAAlB;AACD,CALD;AAMAjC,EAAE,kBAAF,EAAsByB,cAAtB,CAAqC,cAArC,EAAqDvB,GAArD;;AAEAE,KAAK8B,KAAL,CAAW,YAAM;AACf,MAAIvB,UAAUwB,IAAV,EAAJ,EAAsB;AACpB/B,SAAKgC,MAAL,CAAY,SAAZ;AACAnC,UAAMoC,MAAN;AACD;AACF,CALD,E","file":"app/js/open-course-manage/live-open-time-set/index.js","sourcesContent":["let $content = $('#live-lesson-content-field');\nlet $form = $('#live-open-course-form');\nlet now = new Date();\nlet $btn = $('#live-open-course-form-btn');\n\nif (!$form.data('update')) {\n  $('[name=startTime]').attr('disabled', true);\n  $('#live-length-field').attr('disabled', true);\n  $('#live-open-course-form-btn').attr('disabled', true);\n\n  $('#starttime-help-block').html(Translator.trans('activity.live.started_or_ended_notice'));\n  $('#starttime-help-block').css('color', '#a94442');\n  $('#timelength-help-block').html(Translator.trans('activity.live.started_or_ended_notice'));\n  $('#timelength-help-block').css('color', '#a94442');\n} else {\n  $('[name=startTime]').attr('disabled', false);\n  $('#live-open-course-form-btn').attr('disabled', false);\n}\n\nlet validator = $form.validate({\n  rules: {\n    startTime: {\n      required: true,\n      after_now: true,\n      es_remote: {\n        type: 'post',\n        data: {\n          clientTime: function () {\n            return $('[name=startTime]').val();\n          }\n        }\n      }\n    },\n    timeLength: {\n      required: true,\n      positive_integer: true,\n      es_remote: {\n        type: 'get',\n        data: {                     //要传递的数据\n          startTime: function () {\n            return $('[name=startTime]').val();\n          },\n          length: function () {\n            return $('[name=timeLength]').val();\n          },\n        }\n      }\n    }\n  },\n  messages: {\n    startTime: {\n      es_remote: Translator.trans('validate.after_now.message')\n    }\n  }\n});\n\n$('[name=startTime]').datetimepicker({\n  autoclose: true,\n  language: document.documentElement.lang\n}).on('hide', function (ev) {\n  validator.element('[name=startTime]');\n});\n$('[name=startTime]').datetimepicker('setStartDate', now);\n\n$btn.click(() => {\n  if (validator.form()) {\n    $btn.button('loading');\n    $form.submit();\n  }\n});\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/open-course-manage/live-open-time-set/index.js"],"sourceRoot":""}