{"version":3,"sources":["webpack:///./app/Resources/static-src/app/js/announcement/announcement-write/index.js"],"names":["validator","initValidator","initEvent","initCkeditor","initDatetimePicker","$","validate","onkeyup","rules","content","required","startTime","DateAndTime","endTime","modal","click","$modal","html","load","data","form","button","post","attr","serialize","json","window","location","reload","editor","CKEDITOR","replace","toolbar","fileSingleSizeLimit","app","filebrowserImageUploadUrl","on","val","getData","now","Date","datetimepicker","language","autoclose","ev","substring"],"mappings":"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","file":"app/js/announcement/announcement-write/index.js","sourcesContent":["let validator = initValidator();\ninitEvent(validator);\ninitCkeditor(validator);\ninitDatetimePicker(validator);\n\nfunction initValidator() {\n  return $('#announcement-write-form').validate({\n    onkeyup: false,\n    rules: {\n      content: {\n        required: true,\n      },\n      startTime: {\n        required: true,\n        DateAndTime: true,\n      },\n      endTime: {\n        required: true,\n        DateAndTime: true,\n      }\n    },\n  });\n}\n\nfunction initEvent() {\n  $('#modal').modal('show');\n  $('a[data-role=\"announcement-modal\"]').click(function () {\n    var $modal = $('#modal');\n    $modal.html('').load($(this).data('url'));\n  });\n  $('.js-save-btn').click(function () {\n    if (validator.form()) {\n      $('.js-save-btn').button('loading');\n      $.post($('#announcement-write-form').attr('action'), $('#announcement-write-form').serialize(), function (json) {\n        window.location.reload();\n      }, 'json');\n    }\n  });\n}\n\nfunction initCkeditor(validator) {\n  // group: 'course'\n  var editor = CKEDITOR.replace('announcement-content-field', {\n    toolbar: 'Simple',\n    fileSingleSizeLimit: app.fileSingleSizeLimit,\n    filebrowserImageUploadUrl: $('#announcement-content-field').data('imageUploadUrl')\n  });\n\n  editor.on('change', () => {\n    $('#announcement-content-field').val(editor.getData());\n    validator.form();\n  });\n  editor.on('blur', () => {\n    $('#announcement-content-field').val(editor.getData());\n    validator.form();\n  });\n}\n\nfunction initDatetimePicker(validator) {\n  var now = new Date();\n  $('[name=startTime]').datetimepicker({\n    language: 'zh',\n    autoclose: true\n  }).on('hide', function (ev) {\n    validator.form();\n  });\n\n  $('[name=startTime]').datetimepicker('setStartDate', now);\n  $('[name=startTime]').datetimepicker().on('changeDate', function () {\n    $('[name=endTime]').datetimepicker('setStartDate', $('[name=startTime]').val().substring(0, 16));\n  });\n\n  $('[name=endTime]').datetimepicker({\n    autoclose: true,\n    language: 'zh',\n  }).on('hide', function (ev) {\n    validator.form();\n  });\n\n  $('[name=endTime]').datetimepicker('setStartDate', now);\n\n  $('[name=endTime]').datetimepicker().on('changeDate', function () {\n    $('[name=startTime]').datetimepicker('setEndDate', $('[name=endTime]').val().substring(0, 16));\n  });\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/announcement/announcement-write/index.js"],"sourceRoot":""}