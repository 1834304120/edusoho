{"version":3,"sources":["webpack:///external \"jQuery\"","webpack:///./app/Resources/static-src/app/js/cashier/pay/wechatpay_mweb.js","webpack:///./app/Resources/static-src/app/js/cashier/coin.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/lianlianpay_wap.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/sdk.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/payment.js","webpack:///./app/Resources/static-src/app/js/cashier/index.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/alipay_legacy_express.js","webpack:///./app/Resources/static-src/app/common/xxtea.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/lianlianpay_web.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/wechatpay_js.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/confirm.js","webpack:///./app/Resources/static-src/app/js/cashier/form.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/alipay_legacy_wap.js","webpack:///./app/Resources/static-src/app/js/cashier/pay/wechatpay_native.js"],"names":["WechatPayMweb","res","checkOrderStatus","location","href","mwebUrl","BasePayment","Coin","props","$container","$coinContainer","cashierForm","$form","priceType","data","coinRate","maxCoinInput","init","initEvent","on","changeAmount","event","$this","$","currentTarget","inputCoinNum","val","parseFloat","isNaN","removePasswordValidate","trigger","calcPayPrice","toFixed","addPasswordValidate","coinName","price","originalPirce","coinPrice","Translator","trans","find","rules","LianlianpayWap","AlipayLegacyWap","PaySDK","params","options","gateway","getGateway","paySdk","initPaySdk","pay","cancelCheckOrder","undefined","store","get","wpn","WechatPayNative","wpm","wpj","WechatPayJs","ale","AlipayLegacyExpress","alw","llwp","llwb","LianlianpayWeb","payment","isMobile","isWechat","set","require","tradeSn","confirmModal","ConfirmModal","show","trade","createTrade","paidSuccessUrl","getURLParameter","afterTradeCreated","startInterval","window","intervalCheckOrderId","setInterval","checkIsPaid","bind","clearInterval","getTrade","then","isPaid","remove","name","decodeURIComponent","RegExp","exec","search","replace","postParams","type","orderSn","coinAmount","amount","openid","payPassword","XXTEA","encryptToBase64","customParams","forEach","k","filterParams","Api","create","async","promise","done","error","response","JSON","parse","responseText","code","message","resolve","reject","CashierForm","element","getOptions","showConfirmModal","open","payUrl","global","btoa","base64EncodeChars","split","str","buf","i","j","len","r","l","c","length","Array","charCodeAt","join","atob","base64DecodeChars","c1","c2","c3","c4","out","test","charAt","String","fromCharCode","DELTA","toBinaryString","v","includeLength","n","m","result","substring","toUint32Array","bs","int32","mx","sum","y","z","p","e","fixk","encryptUint32Array","q","Math","floor","decryptUint32Array","utf8Encode","codeUnit","nextCodeUnit","rune","Error","utf8DecodeShortString","charCodes","off","unit","toString","apply","utf8DecodeLongString","size","utf8Decode","substr","encrypt","key","decrypt","decryptFromBase64","param","modalID","template","append","modal","$priceList","validator","validate","initCoin","$coin","coin","switchPayType","payOrder","id","title","addPriceItem","removePriceItem","changeCoinPrice","valid","$btn","button","formDataToObject","payAmount","text","hasClass","addClass","siblings","removeClass","attr","post","formArr","serializeArray","index","value","$priceItem","hasPriceItem","html","$payCoin","isQQBuildInBrowser","navigator","userAgent","match","intervalWechatId","$modal","qrcodeUrl","cash_amount"],"mappings":"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","file":"app/js/cashier/index.js","sourcesContent":["module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 0\n// module chunks = app/js/main app/js/v2/demo/index app/js/activity-manage/doc/index app/js/activity-manage/download/index app/js/activity-manage/flash/index app/js/activity-manage/homework/index app/js/activity-manage/ppt/index app/js/activity-manage/video/index app/js/article/detail/index app/js/attachment/index app/js/auth/captcha-modal/index app/js/auth/password-reset/index app/js/auth/register/index app/js/batch-upload/index app/js/card/card-receive/index app/js/card/index/index app/js/cashier/index app/js/cashier/modal/index app/js/classroom-manage/set-picture/index app/js/classroom-manage/student-expiryday/index app/js/classroom-manage/student-import/index app/js/classroom-manage/students-create/index app/js/classroom-manage/students-manage/index app/js/classroom/buy-modal/index app/js/classroom/index app/js/classroom/thread-form/index app/js/classroom/thread-show/index app/js/coin/invite-code/index app/js/course-chapter-manage/index app/js/course-manage-file/index/index app/js/course-manage/batch-create/index app/js/course-manage/lesson-manage/default/index app/js/course-manage/lesson-manage/normal/index app/js/course-manage/live-replay/upload/index app/js/course-manage/overview/index app/js/course-manage/student-import/index app/js/course/buy-modal/index app/js/course/thread-show/index app/js/courseset/show/index app/js/exporter/index app/js/group/index app/js/group/logo/index app/js/group/thread-add/index app/js/live-course/explore/index app/js/material-lib/index/index app/js/material-lib/share-history/index app/js/media-manage/index app/js/activity-manage/audio/index app/js/mobile-bind/index app/js/my/order-refund-apply/index app/js/my/order-refund/index app/js/my/order/index app/js/oauth2/create/index app/js/open-course-manage/add-material/index app/js/open-course-manage/lesson-modal/index app/js/open-course/index app/js/open-course/member-sms/index app/js/order/coupon-item/index app/js/order/create-sms/index app/js/order/create/index app/js/pay/select/index app/js/pay/show-mobile-modal/index app/js/player/index app/js/question-manage/form/index app/js/review/list/index app/js/search/index app/js/settings/avatar-crop-modal/index app/js/settings/bind-mobile/index app/js/settings/email/index app/js/settings/find_pay_password_by_sms/index app/js/settings/find-pay-password/index app/js/settings/password/index app/js/settings/pay-password-modal/index app/js/settings/pay-password/index app/js/settings/profile/index app/js/settings/reset-pay-password/index app/js/settings/security-questions/index app/js/settings/security/index app/js/settings/setup-password/index app/js/settings/setup/index app/js/settings/update-pay-password/index app/js/settings/user-profile/index app/js/subject/index app/js/task-manage/create/index app/js/task/plugin/note/index app/js/task/plugin/question/index app/js/testpaper-manage/create/index app/js/testpaper-manage/index app/js/testpaper-manage/questions/index app/js/testpaper/do-test/exercise/index app/js/testpaper/do-test/normal/index app/js/testpaper/result/index app/js/thread/user-info-modal/index app/js/user/fill-info/index app/js/message/show/index","import BasePayment from './payment';\n\nexport default class WechatPayMweb extends BasePayment {\n\n  afterTradeCreated(res) {\n    this.checkOrderStatus();\n    location.href = res.mwebUrl;\n  }\n\n  startInterval() {\n    return true;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/wechatpay_mweb.js","export default class Coin {\n  constructor(props) {\n    this.$container = props.$coinContainer;\n    this.cashierForm = props.cashierForm;\n    this.$form = props.$form;\n    this.priceType = this.$container.data('priceType');\n    this.coinRate = this.$container.data('coinRate');\n    this.maxCoinInput = this.$container.data('maxAllowCoin') > this.$container.data('coinBalance') ?\n      this.$container.data('coinBalance') : this.$container.data('maxAllowCoin');\n    \n    this.init();\n  }\n\n  init() {\n    this.initEvent();\n  }\n\n  initEvent() {\n    this.$form.on('change', '.js-coin-amount', event => this.changeAmount(event));\n  }\n\n  changeAmount(event) {\n    let $this = $(event.currentTarget);\n    let inputCoinNum = $this.val();\n\n    if (parseFloat(inputCoinNum) > parseFloat(this.maxCoinInput)) {\n      inputCoinNum = this.maxCoinInput;\n    }\n\n    if (isNaN(parseFloat(inputCoinNum)) || parseFloat(inputCoinNum) <= 0) {\n      inputCoinNum = 0;\n      $this.val('');\n      this.removePasswordValidate();\n\n      this.$form.trigger('removePriceItem', ['coin-price']);\n      this.cashierForm.calcPayPrice(inputCoinNum);\n      return;\n    }\n\n    $this.val(parseFloat(inputCoinNum).toFixed(2));\n\n    this.addPasswordValidate();\n    let coinName = this.$form.data('coin-name');\n    let price = 0.00;\n    if (this.priceType === 'coin') {\n      price = parseFloat(inputCoinNum).toFixed(2) + ' ' + coinName;\n\n      let originalPirce = parseFloat(this.$container.data('maxAllowCoin'));\n      let coinPrice = parseFloat(originalPirce - inputCoinNum).toFixed(2) + ' ' + coinName;\n      this.$form.trigger('changeCoinPrice', [coinPrice]);\n    } else {\n      price = '￥' + parseFloat(inputCoinNum / this.coinRate).toFixed(2);\n    }\n    this.$form.trigger('addPriceItem', ['coin-price', coinName + Translator.trans('order.create.minus'), price]);\n    this.cashierForm.calcPayPrice(inputCoinNum);\n  }\n\n  addPasswordValidate() {\n    this.$container.find('[name=\"payPassword\"]').rules('add', 'required es_remote');\n  }\n\n  removePasswordValidate() {\n    this.$container.find('[name=\"payPassword\"]').rules('remove', 'required es_remote');\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/coin.js","import AlipayLegacyWap from './alipay_legacy_wap';\n\nexport default class LianlianpayWap extends AlipayLegacyWap {}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/lianlianpay_wap.js","import WechatPayNative from './wechatpay_native';\nimport AlipayLegacyExpress from './alipay_legacy_express';\nimport AlipayLegacyWap from './alipay_legacy_wap';\nimport LianlianpayWap from './lianlianpay_wap';\nimport LianlianpayWeb from './lianlianpay_web';\nimport WechatPayJs from './wechatpay_js';\nimport WechatPayMweb from './wechatpay_mweb';\nimport 'store';\n\nexport default class PaySDK {\n\n  pay(params, options = {}) {\n    let gateway = this.getGateway(params['payment'], params['isMobile'], params['isWechat']);\n    params.gateway = gateway;\n    let paySdk = this.initPaySdk(gateway);\n\n    paySdk.options = Object.assign({\n      'showConfirmModal': 1\n    }, options);\n\n    paySdk.pay(params);\n\n    return paySdk;\n  }\n\n  checkOrderStatus() {\n    let paySdk = this.initPaySdk();\n    if (paySdk != null) {\n      paySdk.checkOrderStatus();\n    }\n  }\n\n  cancelCheckOrder() {\n    let paySdk = this.initPaySdk();\n    if (paySdk != null) {\n      paySdk.cancelCheckOrder();\n    }\n  }\n\n  initPaySdk(gateway) {\n    gateway = gateway === undefined ? store.get('payment_gateway') : gateway;\n    var paySdk = null;\n    switch (gateway) {\n    case 'WechatPay_Native':\n      paySdk = this.wpn ? this.wpn : this.wpn = new WechatPayNative();\n      break;\n    case 'WechatPay_MWeb':\n      paySdk = this.wpm ? this.wpm : this.wpm = new WechatPayMweb();\n      break;\n    case 'WechatPay_Js':\n      paySdk = this.wpj ? this.wpj : this.wpj = new WechatPayJs();\n      break;\n    case 'Alipay_LegacyExpress':\n      paySdk = this.ale ? this.ale : this.ale = new AlipayLegacyExpress();\n      break;\n    case 'Alipay_LegacyWap':\n      paySdk = this.alw ? this.alw : this.alw = new AlipayLegacyWap();\n      break;\n    case 'Lianlian_Wap':\n      paySdk = this.llwp ? this.llwp : this.llwp = new LianlianpayWap();\n      break;\n    case 'Lianlian_Web':\n      paySdk = this.llwb ? this.llwb : this.llwb = new LianlianpayWeb();\n      break;\n    }\n    return paySdk;\n  }\n\n  getGateway(payment, isMobile, isWechat) {\n    let gateway = '';\n    switch (payment) {\n    case 'wechat':\n      if (isWechat) {\n        gateway = 'WechatPay_Js';\n      } else if (isMobile) {\n        gateway = 'WechatPay_MWeb';\n      } else {\n        gateway = 'WechatPay_Native';\n      }\n      break;\n    case 'alipay':\n      if (isMobile) {\n        gateway = 'Alipay_LegacyWap';\n      } else {\n        gateway = 'Alipay_LegacyExpress';\n      }\n      break;\n\n    case 'lianlianpay':\n      if (isMobile) {\n        gateway = 'Lianlian_Wap';\n      } else {\n        gateway = 'Lianlian_Web';\n      }\n      break;\n    }\n\n    store.set('payment_gateway', gateway);\n    return gateway;\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/sdk.js","import Api from 'common/api';\nimport 'store';\nimport notify from 'common/notify';\nimport ConfirmModal from './confirm';\nrequire('app/common/xxtea.js');\n\nexport default class BasePayment {\n\n  setOptions(options) {\n    this.options = options;\n  }\n\n  getOptions() {\n    return this.options;\n  }\n\n  showConfirmModal(tradeSn) {\n    if (!this.confirmModal) {\n      this.confirmModal = new ConfirmModal();\n    }\n\n    this.confirmModal.show(tradeSn);\n  }\n\n  pay(params) {\n    let trade = this.createTrade(params);\n    if (trade == null) {\n      return;\n    }\n    if (trade.paidSuccessUrl) {\n      location.href = trade.paidSuccessUrl;\n    } else {\n      store.set('trade_' + this.getURLParameter('sn'), trade.tradeSn);\n      this.afterTradeCreated(trade);\n    }\n  }\n\n  afterTradeCreated(res) {\n\n  }\n\n  customParams(params) {\n    return params;\n  }\n\n  checkOrderStatus() {\n    if (this.startInterval()) {\n      window.intervalCheckOrderId = setInterval(this.checkIsPaid.bind(this), 2000);\n    }\n  }\n\n  cancelCheckOrder() {\n    clearInterval(window.intervalCheckOrderId);\n  }\n\n  startInterval() {\n    return false;\n  }\n\n  checkIsPaid() {\n    let tradeSn = store.get('trade_' + this.getURLParameter('sn'));\n    BasePayment.getTrade(tradeSn).then(res => {\n      if (res.isPaid) {\n        store.remove('payment_gateway');\n        store.remove('trade_' + this.getURLParameter('sn'));\n        location.href = res.paidSuccessUrl;\n      }\n    });\n  }\n\n  getURLParameter(name) {\n    return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search) || [null, ''])[1].replace(/\\+/g, '%20')) || null;\n  }\n\n  filterParams(postParams) {\n    let params = {\n      gateway: postParams.gateway,\n      type: postParams.type,\n      orderSn: postParams.orderSn,\n      coinAmount: postParams.coinAmount,\n      amount: postParams.amount,\n      openid: postParams.openid,\n      payPassword: window.XXTEA.encryptToBase64(postParams.payPassword, 'EduSoho'),\n    };\n\n    params = this.customParams(params);\n\n    Object.keys(params).forEach(k => (!params[k] && params[k] !== undefined) && delete params[k]);\n\n    return params;\n  }\n\n  createTrade(postParams) {\n\n    let params = this.filterParams(postParams);\n\n    let trade = null;\n\n    Api.trade.create({ data: params, async: false, promise: false }).done(res => {\n      trade = res;\n    }).error(res => {\n      let response = JSON.parse(res.responseText);\n      if (response.error.code == 2) {\n        notify('danger', response.error.message);\n      } else {\n        notify('danger', Translator.trans('cashier.pay.error_message'));\n      }\n    });\n\n    return trade;\n  }\n\n  static getTrade(tradeSn, orderSn = '') {\n    let params = {};\n\n    if (tradeSn == undefined || tradeSn == '') {\n      return new Promise((resolve, reject) => {\n        resolve({ isPaid: false });\n      });\n    }\n    if (tradeSn) {\n      params.tradeSn = tradeSn;\n    }\n\n    if (orderSn) {\n      params.orderSn = orderSn;\n    }\n    return Api.trade.get({\n      params: params\n    });\n  }\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/payment.js","import CashierForm from './form';\n\nnew CashierForm({\n  element: '#cashier-form'\n});\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/index.js","import BasePayment from './payment';\n\nexport default class AlipayLegacyExpress extends BasePayment {\n\n  afterTradeCreated(res) {\n    this.checkOrderStatus();\n    let options = this.getOptions();\n    if (options.showConfirmModal) {\n      window.open(res.payUrl, '_blank');\n      this.showConfirmModal(res.tradeSn);\n    } else {\n      location.href = res.payUrl;\n    }\n\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/alipay_legacy_express.js","/**********************************************************\\\n|                                                          |\n| xxtea.js                                                 |\n|                                                          |\n| XXTEA encryption algorithm library for JavaScript.       |\n|                                                          |\n| Encryption Algorithm Authors:                            |\n|      David J. Wheeler                                    |\n|      Roger M. Needham                                    |\n|                                                          |\n| Code Author: Ma Bingyao <mabingyao@gmail.com>            |\n| LastModified: Oct 4, 2016                                |\n|                                                          |\n\\**********************************************************/\n\n(function (global) {\n  'use strict';\n\n  if (typeof(global.btoa) == 'undefined') {\n    global.btoa = function() {\n      var base64EncodeChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.split('');\n      return function(str) {\n        var buf, i, j, len, r, l, c;\n        i = j = 0;\n        len = str.length;\n        r = len % 3;\n        len = len - r;\n        l = (len / 3) << 2;\n        if (r > 0) {\n          l += 4;\n        }\n        buf = new Array(l);\n\n        while (i < len) {\n          c = str.charCodeAt(i++) << 16 |\n                        str.charCodeAt(i++) << 8  |\n                        str.charCodeAt(i++);\n          buf[j++] = base64EncodeChars[c >> 18] +\n                               base64EncodeChars[c >> 12 & 0x3f] +\n                               base64EncodeChars[c >> 6  & 0x3f] +\n                               base64EncodeChars[c & 0x3f] ;\n        }\n        if (r == 1) {\n          c = str.charCodeAt(i++);\n          buf[j++] = base64EncodeChars[c >> 2] +\n                               base64EncodeChars[(c & 0x03) << 4] +\n                               '==';\n        }\n        else if (r == 2) {\n          c = str.charCodeAt(i++) << 8 |\n                        str.charCodeAt(i++);\n          buf[j++] = base64EncodeChars[c >> 10] +\n                               base64EncodeChars[c >> 4 & 0x3f] +\n                               base64EncodeChars[(c & 0x0f) << 2] +\n                               '=';\n        }\n        return buf.join('');\n      };\n    }();\n  }\n\n  if (typeof(global.atob) == 'undefined') {\n    global.atob = function() {\n      var base64DecodeChars = [\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,\n        -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63,\n        52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1,\n        -1,  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14,\n        15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1,\n        -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\n        41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1\n      ];\n      return function(str) {\n        var c1, c2, c3, c4;\n        var i, j, len, r, l, out;\n\n        len = str.length;\n        if (len % 4 !== 0) {\n          return '';\n        }\n        if (/[^ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\\+\\/\\=]/.test(str)) {\n          return '';\n        }\n        if (str.charAt(len - 2) == '=') {\n          r = 1;\n        }\n        else if (str.charAt(len - 1) == '=') {\n          r = 2;\n        }\n        else {\n          r = 0;\n        }\n        l = len;\n        if (r > 0) {\n          l -= 4;\n        }\n        l = (l >> 2) * 3 + r;\n        out = new Array(l);\n\n        i = j = 0;\n        while (i < len) {\n          // c1\n          c1 = base64DecodeChars[str.charCodeAt(i++)];\n          if (c1 == -1) break;\n\n          // c2\n          c2 = base64DecodeChars[str.charCodeAt(i++)];\n          if (c2 == -1) break;\n\n          out[j++] = String.fromCharCode((c1 << 2) | ((c2 & 0x30) >> 4));\n\n          // c3\n          c3 = base64DecodeChars[str.charCodeAt(i++)];\n          if (c3 == -1) break;\n\n          out[j++] = String.fromCharCode(((c2 & 0x0f) << 4) | ((c3 & 0x3c) >> 2));\n\n          // c4\n          c4 = base64DecodeChars[str.charCodeAt(i++)];\n          if (c4 == -1) break;\n\n          out[j++] = String.fromCharCode(((c3 & 0x03) << 6) | c4);\n        }\n        return out.join('');\n      };\n    }();\n  }\n\n  var DELTA = 0x9E3779B9;\n\n  function toBinaryString(v, includeLength) {\n    var length = v.length;\n    var n = length << 2;\n    if (includeLength) {\n      var m = v[length - 1];\n      n -= 4;\n      if ((m < n - 3) || (m > n)) {\n        return null;\n      }\n      n = m;\n    }\n    for (var i = 0; i < length; i++) {\n      v[i] = String.fromCharCode(\n        v[i] & 0xFF,\n        v[i] >>> 8 & 0xFF,\n        v[i] >>> 16 & 0xFF,\n        v[i] >>> 24 & 0xFF\n      );\n    }\n    var result = v.join('');\n    if (includeLength) {\n      return result.substring(0, n);\n    }\n    return result;\n  }\n\n  function toUint32Array(bs, includeLength) {\n    var length = bs.length;\n    var n = length >> 2;\n    if ((length & 3) !== 0) {\n      ++n;\n    }\n    var v;\n    if (includeLength) {\n      v = new Array(n + 1);\n      v[n] = length;\n    }\n    else {\n      v = new Array(n);\n    }\n    for (var i = 0; i < length; ++i) {\n      v[i >> 2] |= bs.charCodeAt(i) << ((i & 3) << 3);\n    }\n    return v;\n  }\n\n  function int32(i) {\n    return i & 0xFFFFFFFF;\n  }\n\n  function mx(sum, y, z, p, e, k) {\n    return ((z >>> 5 ^ y << 2) + (y >>> 3 ^ z << 4)) ^ ((sum ^ y) + (k[p & 3 ^ e] ^ z));\n  }\n\n  function fixk(k) {\n    if (k.length < 4) k.length = 4;\n    return k;\n  }\n\n  function encryptUint32Array(v, k) {\n    var length = v.length;\n    var n = length - 1;\n    var y, z, sum, e, p, q;\n    z = v[n];\n    sum = 0;\n    for (q = Math.floor(6 + 52/length) | 0; q > 0; --q) {\n      sum = int32(sum + DELTA);\n      e = sum >>> 2 & 3;\n      for (p = 0; p < n; ++p) {\n        y = v[p + 1];\n        z = v[p] = int32(v[p] + mx(sum, y, z, p, e, k));\n      }\n      y = v[0];\n      z = v[n] = int32(v[n] + mx(sum, y, z, n, e, k));\n    }\n    return v;\n  }\n\n  function decryptUint32Array(v, k) {\n    var length = v.length;\n    var n = length - 1;\n    var y, z, sum, e, p, q;\n    y = v[0];\n    q = Math.floor(6 + 52/length);\n    for (sum = int32(q * DELTA); sum !== 0; sum = int32(sum - DELTA)) {\n      e = sum >>> 2 & 3;\n      for (p = n; p > 0; --p) {\n        z = v[p - 1];\n        y = v[p] = int32(v[p] - mx(sum, y, z, p, e, k));\n      }\n      z = v[n];\n      y = v[0] = int32(v[0] - mx(sum, y, z, 0, e, k));\n    }\n    return v;\n  }\n\n  function utf8Encode(str) {\n    if (/^[\\x00-\\x7f]*$/.test(str)) {\n      return str;\n    }\n    var buf = [];\n    var n = str.length;\n    for (var i = 0, j = 0; i < n; ++i, ++j) {\n      var codeUnit = str.charCodeAt(i);\n      if (codeUnit < 0x80) {\n        buf[j] = str.charAt(i);\n      }\n      else if (codeUnit < 0x800) {\n        buf[j] = String.fromCharCode(0xC0 | (codeUnit >> 6),\n          0x80 | (codeUnit & 0x3F));\n      }\n      else if (codeUnit < 0xD800 || codeUnit > 0xDFFF) {\n        buf[j] = String.fromCharCode(0xE0 | (codeUnit >> 12),\n          0x80 | ((codeUnit >> 6) & 0x3F),\n          0x80 | (codeUnit & 0x3F));\n      }\n      else {\n        if (i + 1 < n) {\n          var nextCodeUnit = str.charCodeAt(i + 1);\n          if (codeUnit < 0xDC00 && 0xDC00 <= nextCodeUnit && nextCodeUnit <= 0xDFFF) {\n            var rune = (((codeUnit & 0x03FF) << 10) | (nextCodeUnit & 0x03FF)) + 0x010000;\n            buf[j] = String.fromCharCode(0xF0 | ((rune >> 18) &0x3F),\n              0x80 | ((rune >> 12) & 0x3F),\n              0x80 | ((rune >> 6) & 0x3F),\n              0x80 | (rune & 0x3F));\n            ++i;\n            continue;\n          }\n        }\n        throw new Error('Malformed string');\n      }\n    }\n    return buf.join('');\n  }\n\n  function utf8DecodeShortString(bs, n) {\n    var charCodes = new Array(n);\n    var i = 0, off = 0;\n    for (var len = bs.length; i < n && off < len; i++) {\n      var unit = bs.charCodeAt(off++);\n      switch (unit >> 4) {\n      case 0:\n      case 1:\n      case 2:\n      case 3:\n      case 4:\n      case 5:\n      case 6:\n      case 7:\n        charCodes[i] = unit;\n        break;\n      case 12:\n      case 13:\n        if (off < len) {\n          charCodes[i] = ((unit & 0x1F) << 6) |\n                                    (bs.charCodeAt(off++) & 0x3F);\n        }\n        else {\n          throw new Error('Unfinished UTF-8 octet sequence');\n        }\n        break;\n      case 14:\n        if (off + 1 < len) {\n          charCodes[i] = ((unit & 0x0F) << 12) |\n                                   ((bs.charCodeAt(off++) & 0x3F) << 6) |\n                                   (bs.charCodeAt(off++) & 0x3F);\n        }\n        else {\n          throw new Error('Unfinished UTF-8 octet sequence');\n        }\n        break;\n      case 15:\n        if (off + 2 < len) {\n          var rune = (((unit & 0x07) << 18) |\n                                ((bs.charCodeAt(off++) & 0x3F) << 12) |\n                                ((bs.charCodeAt(off++) & 0x3F) << 6) |\n                                (bs.charCodeAt(off++) & 0x3F)) - 0x10000;\n          if (0 <= rune && rune <= 0xFFFFF) {\n            charCodes[i++] = (((rune >> 10) & 0x03FF) | 0xD800);\n            charCodes[i] = ((rune & 0x03FF) | 0xDC00);\n          }\n          else {\n            throw new Error('Character outside valid Unicode range: 0x' + rune.toString(16));\n          }\n        }\n        else {\n          throw new Error('Unfinished UTF-8 octet sequence');\n        }\n        break;\n      default:\n        throw new Error('Bad UTF-8 encoding 0x' + unit.toString(16));\n      }\n    }\n    if (i < n) {\n      charCodes.length = i;\n    }\n    return String.fromCharCode.apply(String, charCodes);\n  }\n\n  function utf8DecodeLongString(bs, n) {\n    var buf = [];\n    var charCodes = new Array(0x8000);\n    var i = 0, off = 0;\n    for (var len = bs.length; i < n && off < len; i++) {\n      var unit = bs.charCodeAt(off++);\n      switch (unit >> 4) {\n      case 0:\n      case 1:\n      case 2:\n      case 3:\n      case 4:\n      case 5:\n      case 6:\n      case 7:\n        charCodes[i] = unit;\n        break;\n      case 12:\n      case 13:\n        if (off < len) {\n          charCodes[i] = ((unit & 0x1F) << 6) |\n                                    (bs.charCodeAt(off++) & 0x3F);\n        }\n        else {\n          throw new Error('Unfinished UTF-8 octet sequence');\n        }\n        break;\n      case 14:\n        if (off + 1 < len) {\n          charCodes[i] = ((unit & 0x0F) << 12) |\n                                   ((bs.charCodeAt(off++) & 0x3F) << 6) |\n                                   (bs.charCodeAt(off++) & 0x3F);\n        }\n        else {\n          throw new Error('Unfinished UTF-8 octet sequence');\n        }\n        break;\n      case 15:\n        if (off + 2 < len) {\n          var rune = (((unit & 0x07) << 18) |\n                                ((bs.charCodeAt(off++) & 0x3F) << 12) |\n                                ((bs.charCodeAt(off++) & 0x3F) << 6) |\n                                (bs.charCodeAt(off++) & 0x3F)) - 0x10000;\n          if (0 <= rune && rune <= 0xFFFFF) {\n            charCodes[i++] = (((rune >> 10) & 0x03FF) | 0xD800);\n            charCodes[i] = ((rune & 0x03FF) | 0xDC00);\n          }\n          else {\n            throw new Error('Character outside valid Unicode range: 0x' + rune.toString(16));\n          }\n        }\n        else {\n          throw new Error('Unfinished UTF-8 octet sequence');\n        }\n        break;\n      default:\n        throw new Error('Bad UTF-8 encoding 0x' + unit.toString(16));\n      }\n      if (i >= 0x7FFF - 1) {\n        var size = i + 1;\n        charCodes.length = size;\n        buf[buf.length] = String.fromCharCode.apply(String, charCodes);\n        n -= size;\n        i = -1;\n      }\n    }\n    if (i > 0) {\n      charCodes.length = i;\n      buf[buf.length] = String.fromCharCode.apply(String, charCodes);\n    }\n    return buf.join('');\n  }\n\n  // n is UTF16 length\n  function utf8Decode(bs, n) {\n    if (n === undefined || n === null || (n < 0)) n = bs.length;\n    if (n === 0) return '';\n    if (/^[\\x00-\\x7f]*$/.test(bs) || !(/^[\\x00-\\xff]*$/.test(bs))) {\n      if (n === bs.length) return bs;\n      return bs.substr(0, n);\n    }\n    return ((n < 0xFFFF) ?\n      utf8DecodeShortString(bs, n) :\n      utf8DecodeLongString(bs, n));\n  }\n\n  function encrypt(data, key) {\n    if (data === undefined || data === null || data.length === 0) {\n      return data;\n    }\n    data = utf8Encode(data);\n    key = utf8Encode(key);\n    return toBinaryString(encryptUint32Array(toUint32Array(data, true), fixk(toUint32Array(key, false))), false);\n  }\n\n  function encryptToBase64(data, key) {\n    return global.btoa(encrypt(data, key));\n  }\n\n  function decrypt(data, key) {\n    if (data === undefined || data === null || data.length === 0) {\n      return data;\n    }\n    key = utf8Encode(key);\n    return utf8Decode(toBinaryString(decryptUint32Array(toUint32Array(data, false), fixk(toUint32Array(key, false))), true));\n  }\n\n  function decryptFromBase64(data, key) {\n    if (data === undefined || data === null || data.length === 0) {\n      return data;\n    }\n    return decrypt(global.atob(data), key);\n  }\n\n  global.XXTEA = {\n    utf8Encode: utf8Encode,\n    utf8Decode: utf8Decode,\n    encrypt: encrypt,\n    encryptToBase64: encryptToBase64,\n    decrypt: decrypt,\n    decryptFromBase64: decryptFromBase64\n  };\n})(window);\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/common/xxtea.js","import AlipayLegacyExpress from './alipay_legacy_express';\n\nexport default class LianlianpayWeb extends AlipayLegacyExpress {\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/lianlianpay_web.js","import BasePayment from './payment';\n\nexport default class WechatPayJs extends BasePayment {\n\n  pay(res) {\n    location.href = '/pay/center/wxpay?' + $.param(res);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/wechatpay_js.js","import notify from 'common/notify';\nimport BasePayment from './payment';\n\nclass ConfirmModal {\n  constructor() {\n    this.$container = $('body');\n    this.modalID = 'cashier-confirm-modal';\n    this.tradeSn = '';\n    let template = `\n      <div id=\"${this.modalID}\" class=\"modal\">\n        <div class=\"modal-dialog cd-modal-dialog\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n                <i class=\"cd-icon cd-icon-close\"></i>\n              </button>\n              <h4 class=\"modal-title\">${Translator.trans('cashier.confirm.title')}</h4>\n            </div>\n            <div class=\"modal-body\">\n              <p>\n              ${Translator.trans('cashier.confirm.desc')}\n              </p>\n            </div>\n            <div class=\"modal-footer\">\n              <a class=\"btn cd-btn cd-btn-flat-default cd-btn-lg\" data-dismiss=\"modal\">${Translator.trans('cashier.confirm.pick_again')}</a>\n              <a class=\"btn cd-btn cd-btn-primary cd-btn-lg js-confirm-btn\">${Translator.trans('cashier.confirm.success')}</a>\n            </div>\n          </div>\n        <div>  \n      </div>\n    `;\n\n    if (this.$container.find('#' + this.modalID).length === 0) {\n      this.$container.append(template);\n    }\n\n    $('body').on('click', '.js-confirm-btn', this.checkIsPaid.bind(this));\n  }\n\n  checkIsPaid() {\n    BasePayment.getTrade(this.tradeSn).then(res => {\n      if (res.isPaid) {\n        location.href = res.paidSuccessUrl;\n      } else {\n        notify('danger', Translator.trans('cashier.confirm.fail_message'));\n        $('#' + this.modalID).modal('hide');\n      }\n    });\n  }\n\n  show(tradeSn) {\n    $('#' + this.modalID).modal('show');\n    this.tradeSn = tradeSn;\n  }\n}\n\nexport default ConfirmModal;\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/confirm.js","import Coin from './coin';\nimport PaySDK from './pay/sdk';\n\nclass CashierForm {\n  constructor(props) {\n    this.$form = $(props.element);\n    this.$priceList = this.$form.find('#order-center-price-list');\n\n    this.validator = this.$form.validate();\n\n    this.initEvent();\n    this.initCoin();\n\n    this.paySdk = new PaySDK();\n\n    this.paySdk.checkOrderStatus();\n  }\n\n  initCoin() {\n    let $coin = $('#coin-use-section');\n    if ($coin.length > 0) {\n      this.coin = new Coin({\n        $coinContainer: $coin,\n        cashierForm: this,\n        $form: this.$form\n      });\n    }\n  }\n\n  initEvent() {\n    let $form = this.$form;\n\n    $form.on('click', '.js-pay-type', event => this.switchPayType(event));\n    $form.on('click', '.js-pay-btn', event => this.payOrder(event));\n    $form.on('addPriceItem', (event, id, title, price) => this.addPriceItem(event, id, title, price));\n    $form.on('removePriceItem', (event, id) => this.removePriceItem(event, id));\n    $form.on('changeCoinPrice', (event, price) => this.changeCoinPrice(event, price));\n\n  }\n\n  payOrder(event) {\n    let $form = this.$form;\n\n    if ($form.valid()) {\n      let $btn = $(event.currentTarget);\n      $btn.button('loading');\n      let params = this.formDataToObject($form);\n\n      params.payAmount = $form.find('.js-pay-price').text();\n      this.paySdk.cancelCheckOrder();\n      this.paySdk.pay(params);\n      $btn.button('reset');\n    }\n  }\n\n  switchPayType(event) {\n    let $this = $(event.currentTarget);\n    if (!$this.hasClass('active')) {\n      $this.addClass('active').siblings().removeClass('active');\n      $('input[name=\\'payment\\']').val($this.attr('id'));\n    }\n  }\n\n  calcPayPrice(coinAmount) {\n    $.post(this.$form.data('priceUrl'), {\n      coinAmount\n    }).done((res) => {\n      this.$form.find('.js-pay-price').text(res.data);\n    });\n  }\n\n  formDataToObject($form) {\n    let params = {},\n      formArr = $form.serializeArray();\n    for (let index in formArr) {\n      params[formArr[index].name] = formArr[index].value;\n    }\n\n    return params;\n  }\n\n  hasPriceItem(event, id) {\n    let $priceItem = $(`#${id}`);\n    if ($priceItem.length) {\n      return true;\n    }\n\n    return false;\n  }\n\n  addPriceItem(event, id, title, price) {\n    let $priceItem = $(`#${id}`);\n\n    if (this.hasPriceItem(event, id)) {\n      $priceItem.remove();\n    }\n\n    let html = `\n      <div class=\"order-center-price\" id=\"${id}\">\n        <div class=\"order-center-price__title\">${title}</div>\n        <div class=\"order-center-price__content\">-${price}</div>\n      </div>\n    `;\n\n    this.$priceList.append(html);\n  }\n\n  removePriceItem(event, id) {\n    let $priceItem = $(`#${id}`);\n\n    if (this.hasPriceItem(event, id)) {\n      $priceItem.remove();\n    }\n  }\n\n  changeCoinPrice(event, price) {\n    let $payCoin = this.$form.find('.js-pay-coin');\n    $payCoin.text(price);\n  }\n}\n\n\nexport default CashierForm;\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/form.js","import BasePayment from './payment';\n\nexport default class AlipayLegacyWap extends BasePayment {\n\n  afterTradeCreated(res) {\n    location.href = res.payUrl;\n  }\n\n  customParams(params) {\n    if (!this.isQQBuildInBrowser()) {\n      params['app_pay'] = 'Y';\n      params['wap_pay'] = true;\n    }\n    return params;\n  }\n\n  isQQBuildInBrowser() {\n    return navigator.userAgent.match(/QQ\\//i) ? true : false;\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/alipay_legacy_wap.js","import BasePayment from './payment';\n\nexport default class WechatPayNative extends BasePayment {\n  constructor() {\n    super();\n    this.$container = $('body');\n    this.modalID = 'wechat-qrcode-modal';\n    let template = `\n      <div id=\"${this.modalID}\" class=\"modal\">\n        <div class=\"modal-dialog cd-modal-dialog cd-modal-dialog-sm\">\n          <div class=\"modal-content\">\n          \n            <div class=\"modal-header\">\n              <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\">\n                <i class=\"cd-icon cd-icon-close\"></i>\n              </button>\n              <h4 class=\"modal-title\">${Translator.trans('cashier.wechat_pay')}</h4>\n            </div>\n            \n            <div class=\"modal-body text-center\">\n              <div style=\"height: 270px; width: 270px; margin: 0 auto;\">\n                <img class=\"cd-mb16 js-qrcode-img\" src=\"\">\n              </div>\n              <div class=\"cd-mb16\">\n                ${Translator.trans('cashier.wechat_pay.scan_qcode_pay_tips')}\n              </div>\n              <div class=\"cd-text-danger cd-mb32 js-pay-amount\" style=\"font-size:16px;\"></div>\n            </div>\n            \n          </div>\n        </div>\n      </div>\n    `;\n\n    if (this.$container.find('#' + this.modalID).length === 0) {\n      this.$container.append(template);\n    }\n\n    this.$container.find('#' + this.modalID).on('hidden.bs.modal', function() {\n      clearInterval(window.intervalWechatId);\n    });\n  }\n\n  afterTradeCreated(res) {\n    this.checkOrderStatus();\n    let $modal = this.$container.find('#' + this.modalID);\n    $modal.find('.js-qrcode-img').attr('src', res.qrcodeUrl);\n    $modal.find('.js-pay-amount').text('￥' + res.cash_amount);\n    $modal.modal('show');\n  }\n\n  startInterval() {\n    return true;\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./app/Resources/static-src/app/js/cashier/pay/wechatpay_native.js"],"sourceRoot":""}